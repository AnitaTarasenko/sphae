[2023:11:23 11:37:32] Config file ../nanopore/nanoporeSDSU.spae.out/sphae.config.yaml already exists. Using existing config file.
[2023:11:23 11:37:32] Updating config file with new values
[2023:11:23 11:37:32] Writing config file to ../nanopore/nanoporeSDSU.spae.out/sphae.config.yaml
[2023:11:23 11:37:32] ------------------
[2023:11:23 11:37:32] | Runtime config |
[2023:11:23 11:37:32] ------------------

args:
  db_dir: null
  input: null
  output: null
  sequencing: null
db:
  models: https://zenodo.org/record/8198288/files/phynteny_models_v0.1.11.tar.gz
  pfam: ftp://ftp.ebi.ac.uk/pub/databases/Pfam/releases/
  pfam_file: Pfam35.0/Pfam-A.hmm.gz
params:
  flye: --nano-hq
  genomeSize: 44k
  medaka: r1041_e82_400bps_sup_v4.2.0
resources:
  bigjob:
    cpu: 32
    mem: 64000
    time: 480
  smalljob:
    cpu: 8
    mem: 16000
    time: 480
sphae:
  args:
    _input: ../nanopore/nanopore_sequences_SRA_bact
    conda_prefix: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda
    configfile: ../nanopore/nanoporeSDSU.spae.out/sphae.config.yaml
    db_dir: null
    host: null
    log: ../nanopore/nanoporeSDSU.spae.out/sphae.log
    output: ../nanopore/nanoporeSDSU.spae.out
    profile: null
    sequencing: longread
    snake_args:
    - -k
    snake_default:
    - --rerun-incomplete
    - --printshellcmds
    - --nolock
    - --show-failed-logs
    system_config: /scratch/user/nala0006/spae-paper/sphae/sphae/config/config.yaml
    temp_dir: null
    threads: 64
    use_conda: true
trimnami:
  args:
    fasta: false
    fastqc: false
    host: null
    log: ../nanopore/nanoporeSDSU.spae.out/logs/trimnami.log
    minimap: sr
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING
    reads: ../nanopore/nanoporeSDSU.spae.out/temp/samples.reads.tsv
    subsample: true
  host: null
  qc:
    subsample: --bases 100M

[2023:11:23 11:37:32] ---------------------
[2023:11:23 11:37:32] | Snakemake command |
[2023:11:23 11:37:32] ---------------------

snakemake -s /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/Snakefile --configfile ../nanopore/nanoporeSDSU.spae.out/sphae.config.yaml --cores 64 --use-conda --conda-prefix /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda --rerun-incomplete --printshellcmds --nolock --show-failed-logs -k
Config file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/../config/config.yaml is extended by additional config specified via the command line.
/home/nala0006/miniconda3/envs/sphae/lib/python3.11/site-packages/metasnek/fastq_finder.py:66: Warning: Possible orphaned paired read detected for CS-1_1.fastq with tag _1.
  warnings.warn(
/home/nala0006/miniconda3/envs/sphae/lib/python3.11/site-packages/metasnek/fastq_finder.py:66: Warning: Possible orphaned paired read detected for Ecoli_33_1.fastq with tag _1.
  warnings.warn(
/home/nala0006/miniconda3/envs/sphae/lib/python3.11/site-packages/metasnek/fastq_finder.py:66: Warning: Possible orphaned paired read detected for CS-2_12_2.fastq with tag _2.
  warnings.warn(
/home/nala0006/miniconda3/envs/sphae/lib/python3.11/site-packages/attrmap/attrmap.py:424: UserWarning: To reduce 'problematic' attributes, `keys` is deprecated, use `attrmap.utils.get_keys` instead.
  warn("To reduce 'problematic' attributes, "
Building DAG of jobs...
/home/nala0006/miniconda3/lib/python3.9/site-packages/requests/__init__.py:109: RequestsDependencyWarning: urllib3 (1.26.9) or chardet (5.2.0)/charset_normalizer (2.0.12) doesn't match a supported version!
  warnings.warn(
Using shell: /usr/bin/bash
Provided cores: 64
Rules claiming more threads will be scaled down.
Job stats:
job                         count
------------------------  -------
all                             1
checkv_flye_nano               19
genomes_extract_flye           19
genomes_flye                   19
join_assembly_stats_flye       19
medaka                         19
pharokka_flye                  63
phynteny_run_nanopore          63
rename_contigs_flye            19
summarize_longread             26
viralverify_flye_nano          19
total                         286

Select jobs to execute...

[Thu Nov 23 11:37:36 2023]
rule viralverify_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/assembly.fasta, /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/assembly_result_table.csv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Bu_13.log
    jobid: 181
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/viralverify_flye_nano.Bu_13.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/assembly_result_table.csv
    wildcards: sample=Bu_13
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/assembly.fasta ]]
        then
            viralverify                 -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/assembly.fasta                 --hmm /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Bu_13.log
        fi
        

[Thu Nov 23 11:37:36 2023]
rule viralverify_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/assembly.fasta, /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/assembly_result_table.csv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Bu_02.log
    jobid: 213
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/viralverify_flye_nano.Bu_02.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/assembly_result_table.csv
    wildcards: sample=Bu_02
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/assembly.fasta ]]
        then
            viralverify                 -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/assembly.fasta                 --hmm /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Bu_02.log
        fi
        
Activating conda environment: sphae/workflow/conda/d9cd3342e36b62c24e780b9d55be160e_
Activating conda environment: sphae/workflow/conda/d9cd3342e36b62c24e780b9d55be160e_

[Thu Nov 23 11:37:36 2023]
rule viralverify_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/assembly.fasta, /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/assembly_result_table.csv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Bu_05.log
    jobid: 157
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/viralverify_flye_nano.Bu_05.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/assembly_result_table.csv
    wildcards: sample=Bu_05
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/assembly.fasta ]]
        then
            viralverify                 -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/assembly.fasta                 --hmm /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Bu_05.log
        fi
        
Activating conda environment: sphae/workflow/conda/d9cd3342e36b62c24e780b9d55be160e_

[Thu Nov 23 11:37:36 2023]
rule viralverify_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/assembly.fasta, /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/assembly_result_table.csv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.CS-1_9.log
    jobid: 239
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/viralverify_flye_nano.CS-1_9.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/assembly_result_table.csv
    wildcards: sample=CS-1_9
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/assembly.fasta ]]
        then
            viralverify                 -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/assembly.fasta                 --hmm /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.CS-1_9.log
        fi
        
Activating conda environment: sphae/workflow/conda/d9cd3342e36b62c24e780b9d55be160e_

[Thu Nov 23 11:37:36 2023]
rule viralverify_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/assembly.fasta, /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/assembly_result_table.csv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Ec_24.log
    jobid: 159
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/viralverify_flye_nano.Ec_24.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/assembly_result_table.csv
    wildcards: sample=Ec_24
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/assembly.fasta ]]
        then
            viralverify                 -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/assembly.fasta                 --hmm /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Ec_24.log
        fi
        
Activating conda environment: sphae/workflow/conda/d9cd3342e36b62c24e780b9d55be160e_

[Thu Nov 23 11:37:36 2023]
rule viralverify_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/assembly.fasta, /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/assembly_result_table.csv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.CS-1_7.log
    jobid: 241
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/viralverify_flye_nano.CS-1_7.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/assembly_result_table.csv
    wildcards: sample=CS-1_7
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/assembly.fasta ]]
        then
            viralverify                 -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/assembly.fasta                 --hmm /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.CS-1_7.log
        fi
        
Activating conda environment: sphae/workflow/conda/d9cd3342e36b62c24e780b9d55be160e_

[Thu Nov 23 11:37:36 2023]
rule viralverify_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/assembly.fasta, /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/assembly_result_table.csv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Lg_25.log
    jobid: 131
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/viralverify_flye_nano.Lg_25.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/assembly_result_table.csv
    wildcards: sample=Lg_25
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/assembly.fasta ]]
        then
            viralverify                 -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/assembly.fasta                 --hmm /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Lg_25.log
        fi
        
Activating conda environment: sphae/workflow/conda/d9cd3342e36b62c24e780b9d55be160e_

[Thu Nov 23 11:37:36 2023]
rule viralverify_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/assembly.fasta, /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/assembly_result_table.csv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Ec_23.log
    jobid: 155
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/viralverify_flye_nano.Ec_23.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/assembly_result_table.csv
    wildcards: sample=Ec_23
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/assembly.fasta ]]
        then
            viralverify                 -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/assembly.fasta                 --hmm /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Ec_23.log
        fi
        
Activating conda environment: sphae/workflow/conda/d9cd3342e36b62c24e780b9d55be160e_
Waiting at most 5 seconds for missing files.
MissingOutputException in rule viralverify_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.viralverify.smk, line 37:
Job 181  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/assembly_result_table.csv
Select jobs to execute...

[Thu Nov 23 11:37:41 2023]
rule viralverify_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/assembly.fasta, /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/assembly_result_table.csv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Ecoli_33_1.log
    jobid: 243
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/viralverify_flye_nano.Ecoli_33_1.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/assembly_result_table.csv
    wildcards: sample=Ecoli_33_1
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/assembly.fasta ]]
        then
            viralverify                 -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/assembly.fasta                 --hmm /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Ecoli_33_1.log
        fi
        
Activating conda environment: sphae/workflow/conda/d9cd3342e36b62c24e780b9d55be160e_
Waiting at most 5 seconds for missing files.
MissingOutputException in rule viralverify_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.viralverify.smk, line 37:
Job 213  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/assembly_result_table.csv
Waiting at most 5 seconds for missing files.
MissingOutputException in rule viralverify_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.viralverify.smk, line 37:
Job 157  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/assembly_result_table.csv
Waiting at most 5 seconds for missing files.
MissingOutputException in rule viralverify_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.viralverify.smk, line 37:
Job 239  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/assembly_result_table.csv
Waiting at most 5 seconds for missing files.
MissingOutputException in rule viralverify_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.viralverify.smk, line 37:
Job 159  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/assembly_result_table.csv
Waiting at most 5 seconds for missing files.
MissingOutputException in rule viralverify_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.viralverify.smk, line 37:
Job 241  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/assembly_result_table.csv
Waiting at most 5 seconds for missing files.
MissingOutputException in rule viralverify_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.viralverify.smk, line 37:
Job 131  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/assembly_result_table.csv
Waiting at most 5 seconds for missing files.
MissingOutputException in rule viralverify_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.viralverify.smk, line 37:
Job 155  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/assembly_result_table.csv
Select jobs to execute...

[Thu Nov 23 11:38:16 2023]
rule viralverify_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/assembly.fasta, /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/assembly_result_table.csv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.CS-1_8.log
    jobid: 197
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/viralverify_flye_nano.CS-1_8.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/assembly_result_table.csv
    wildcards: sample=CS-1_8
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/assembly.fasta ]]
        then
            viralverify                 -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/assembly.fasta                 --hmm /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.CS-1_8.log
        fi
        
Activating conda environment: sphae/workflow/conda/d9cd3342e36b62c24e780b9d55be160e_

[Thu Nov 23 11:38:16 2023]
rule viralverify_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/assembly.fasta, /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/assembly_result_table.csv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Ec_25.log
    jobid: 225
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/viralverify_flye_nano.Ec_25.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/assembly_result_table.csv
    wildcards: sample=Ec_25
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/assembly.fasta ]]
        then
            viralverify                 -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/assembly.fasta                 --hmm /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Ec_25.log
        fi
        
Activating conda environment: sphae/workflow/conda/d9cd3342e36b62c24e780b9d55be160e_

[Thu Nov 23 11:38:16 2023]
rule viralverify_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/assembly.fasta, /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/assembly_result_table.csv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.CS-1_1.log
    jobid: 161
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/viralverify_flye_nano.CS-1_1.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/assembly_result_table.csv
    wildcards: sample=CS-1_1
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/assembly.fasta ]]
        then
            viralverify                 -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/assembly.fasta                 --hmm /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.CS-1_1.log
        fi
        

Activating conda environment: sphae/workflow/conda/d9cd3342e36b62c24e780b9d55be160e_
[Thu Nov 23 11:38:16 2023]
rule viralverify_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/assembly.fasta, /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/assembly_result_table.csv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Ecoli_26.log
    jobid: 133
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/viralverify_flye_nano.Ecoli_26.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/assembly_result_table.csv
    wildcards: sample=Ecoli_26
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/assembly.fasta ]]
        then
            viralverify                 -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/assembly.fasta                 --hmm /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Ecoli_26.log
        fi
        
Activating conda environment: sphae/workflow/conda/d9cd3342e36b62c24e780b9d55be160e_

[Thu Nov 23 11:38:16 2023]
rule viralverify_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/assembly.fasta, /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/assembly_result_table.csv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Eu_6.log
    jobid: 221
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/viralverify_flye_nano.Eu_6.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/assembly_result_table.csv
    wildcards: sample=Eu_6
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/assembly.fasta ]]
        then
            viralverify                 -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/assembly.fasta                 --hmm /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Eu_6.log
        fi
        
Activating conda environment: sphae/workflow/conda/d9cd3342e36b62c24e780b9d55be160e_

[Thu Nov 23 11:38:16 2023]
rule viralverify_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/assembly.fasta, /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/assembly_result_table.csv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.CS-1_4.log
    jobid: 167
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/viralverify_flye_nano.CS-1_4.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/assembly_result_table.csv
    wildcards: sample=CS-1_4
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/assembly.fasta ]]
        then
            viralverify                 -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/assembly.fasta                 --hmm /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.CS-1_4.log
        fi
        
Activating conda environment: sphae/workflow/conda/d9cd3342e36b62c24e780b9d55be160e_

[Thu Nov 23 11:38:16 2023]
rule viralverify_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/assembly.fasta, /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/assembly_result_table.csv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Ecoli_39.log
    jobid: 249
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/viralverify_flye_nano.Ecoli_39.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/assembly_result_table.csv
    wildcards: sample=Ecoli_39
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/assembly.fasta ]]
        then
            viralverify                 -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/assembly.fasta                 --hmm /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Ecoli_39.log
        fi
        
Activating conda environment: sphae/workflow/conda/d9cd3342e36b62c24e780b9d55be160e_
Waiting at most 5 seconds for missing files.
MissingOutputException in rule viralverify_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.viralverify.smk, line 37:
Job 243  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/assembly_result_table.csv
Select jobs to execute...

[Thu Nov 23 11:38:21 2023]
rule viralverify_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/assembly.fasta, /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/assembly_result_table.csv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Bu_06.log
    jobid: 171
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/viralverify_flye_nano.Bu_06.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/assembly_result_table.csv
    wildcards: sample=Bu_06
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/assembly.fasta ]]
        then
            viralverify                 -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/assembly.fasta                 --hmm /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.Bu_06.log
        fi
        
Activating conda environment: sphae/workflow/conda/d9cd3342e36b62c24e780b9d55be160e_
Waiting at most 5 seconds for missing files.
MissingOutputException in rule viralverify_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.viralverify.smk, line 37:
Job 197  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/assembly_result_table.csv
Waiting at most 5 seconds for missing files.
MissingOutputException in rule viralverify_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.viralverify.smk, line 37:
Job 225  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/assembly_result_table.csv
Waiting at most 5 seconds for missing files.
MissingOutputException in rule viralverify_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.viralverify.smk, line 37:
Job 161  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/assembly_result_table.csv
Waiting at most 5 seconds for missing files.
MissingOutputException in rule viralverify_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.viralverify.smk, line 37:
Job 133  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/assembly_result_table.csv
Waiting at most 5 seconds for missing files.
MissingOutputException in rule viralverify_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.viralverify.smk, line 37:
Job 221  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/assembly_result_table.csv
Waiting at most 5 seconds for missing files.
MissingOutputException in rule viralverify_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.viralverify.smk, line 37:
Job 167  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/assembly_result_table.csv
Waiting at most 5 seconds for missing files.
MissingOutputException in rule viralverify_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.viralverify.smk, line 37:
Job 249  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/assembly_result_table.csv
Select jobs to execute...

[Thu Nov 23 11:38:56 2023]
rule medaka:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Eu_6_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Eu_6.log
    jobid: 112
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/medaka.Eu_6.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/consensus.fasta
    wildcards: sample=Eu_6
    threads: 32
    resources: tmpdir=/local/nala0006/2279931, mem_mb=64000, mem_mib=61036, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Eu_6_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Eu_6.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/consensus.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_

[Thu Nov 23 11:38:56 2023]
rule viralverify_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/assembly.fasta, /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/assembly_result_table.csv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.CS-1_3.log
    jobid: 229
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/viralverify_flye_nano.CS-1_3.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/assembly_result_table.csv
    wildcards: sample=CS-1_3
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/assembly.fasta ]]
        then
            viralverify                 -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/assembly.fasta                 --hmm /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.CS-1_3.log
        fi
        
Activating conda environment: sphae/workflow/conda/d9cd3342e36b62c24e780b9d55be160e_

[Thu Nov 23 11:38:56 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_32.log
    jobid: 531
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32.gbk
    wildcards: sample=Ecoli_32
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_32                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_32.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32_genome.fasta -n Ecoli_32_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr -p Ecoli_32 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_

[Thu Nov 23 11:38:56 2023]
rule viralverify_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/assembly.fasta, /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/assembly_result_table.csv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.CS-1_6.log
    jobid: 199
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/viralverify_flye_nano.CS-1_6.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/assembly_result_table.csv
    wildcards: sample=CS-1_6
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/assembly.fasta ]]
        then
            viralverify                 -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/assembly.fasta                 --hmm /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/Pfam35.0/Pfam-A.hmm.gz                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/viralverify_flye_nano.CS-1_6.log
        fi
        
Activating conda environment: sphae/workflow/conda/d9cd3342e36b62c24e780b9d55be160e_
Waiting at most 5 seconds for missing files.
[Thu Nov 23 11:38:59 2023]
Error in rule medaka:
    jobid: 112
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Eu_6_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Eu_6.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Eu_6_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Eu_6.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/consensus.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Eu_6.log:
================================================================================
[11:38:59 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmppeom59r2.
[11:38:59 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmp53sv3tv0.
Creating fai index file /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/assembly.fasta.fai
[faidx] Could not build fai index /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/assembly.fasta.fai
================================================================================

MissingOutputException in rule viralverify_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.viralverify.smk, line 37:
Job 171  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/assembly_result_table.csv
Select jobs to execute...

[Thu Nov 23 11:39:01 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_34.log
    jobid: 593
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_dnaapler_reoriented.fasta
    wildcards: sample=Ecoli_34
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_34                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_34.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34_genome.fasta -n Ecoli_34_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr -p Ecoli_34 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
Waiting at most 5 seconds for missing files.
MissingOutputException in rule viralverify_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.viralverify.smk, line 37:
Job 229  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/assembly_result_table.csv
Waiting at most 5 seconds for missing files.
MissingOutputException in rule viralverify_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.viralverify.smk, line 37:
Job 199  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/assembly_result_table.csv
Select jobs to execute...

[Thu Nov 23 11:39:11 2023]
rule medaka:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Bu_05_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Bu_05.log
    jobid: 80
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/medaka.Bu_05.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/consensus.fasta
    wildcards: sample=Bu_05
    threads: 32
    resources: tmpdir=/local/nala0006/2279931, mem_mb=64000, mem_mib=61036, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Bu_05_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Bu_05.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/consensus.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_

[Thu Nov 23 11:39:11 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_36.log
    jobid: 581
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/top_hits_card.tsv
    wildcards: sample=Ecoli_36
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_36                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_36.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36_genome.fasta -n Ecoli_36_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr -p Ecoli_36 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_

[Thu Nov 23 11:39:11 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_31.log
    jobid: 523
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_dnaapler_reoriented.fasta
    wildcards: sample=Ecoli_31
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_31                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_31.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31_genome.fasta -n Ecoli_31_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr -p Ecoli_31 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_dnaapler_reoriented.fasta
        fi
        
Select jobs to execute...
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
[Thu Nov 23 11:39:14 2023]
Error in rule medaka:
    jobid: 80
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Bu_05_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Bu_05.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Bu_05_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Bu_05.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/consensus.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Bu_05.log:
================================================================================
[11:39:14 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmp1ymridre.
[11:39:14 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmplkgck27_.
Creating fai index file /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/assembly.fasta.fai
[faidx] Could not build fai index /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/assembly.fasta.fai
================================================================================


[Thu Nov 23 11:39:14 2023]
rule medaka:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ec_24_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ec_24.log
    jobid: 81
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/medaka.Ec_24.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/consensus.fasta
    wildcards: sample=Ec_24
    threads: 32
    resources: tmpdir=/local/nala0006/2279931, mem_mb=64000, mem_mib=61036, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ec_24_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ec_24.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/consensus.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
[Thu Nov 23 11:39:17 2023]
Error in rule medaka:
    jobid: 81
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ec_24_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ec_24.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ec_24_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ec_24.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/consensus.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ec_24.log:
================================================================================
[11:39:16 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmp_a9yfivq.
[11:39:17 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpe8cdmvuq.
Creating fai index file /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/assembly.fasta.fai
[faidx] Could not build fai index /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/assembly.fasta.fai
================================================================================

Select jobs to execute...

[Thu Nov 23 11:39:17 2023]
rule medaka:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ec_23_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ec_23.log
    jobid: 79
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/medaka.Ec_23.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/consensus.fasta
    wildcards: sample=Ec_23
    threads: 32
    resources: tmpdir=/local/nala0006/2279931, mem_mb=64000, mem_mib=61036, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ec_23_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ec_23.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/consensus.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
[Thu Nov 23 11:39:20 2023]
Error in rule medaka:
    jobid: 79
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ec_23_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ec_23.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ec_23_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ec_23.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/consensus.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ec_23.log:
================================================================================
[11:39:19 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpbks02jov.
[11:39:20 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpjvx53q_x.
Creating fai index file /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/assembly.fasta.fai
[faidx] Could not build fai index /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/assembly.fasta.fai
================================================================================

Select jobs to execute...

[Thu Nov 23 11:39:20 2023]
rule medaka:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Bu_02_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Bu_02.log
    jobid: 108
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/medaka.Bu_02.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/consensus.fasta
    wildcards: sample=Bu_02
    threads: 32
    resources: tmpdir=/local/nala0006/2279931, mem_mb=64000, mem_mib=61036, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Bu_02_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Bu_02.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/consensus.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
[Thu Nov 23 11:39:23 2023]
Error in rule medaka:
    jobid: 108
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Bu_02_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Bu_02.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Bu_02_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Bu_02.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/consensus.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Bu_02.log:
================================================================================
[11:39:22 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpf0cfns6f.
[11:39:23 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpnhtvosm5.
Creating fai index file /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/assembly.fasta.fai
[faidx] Could not build fai index /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/assembly.fasta.fai
================================================================================

Select jobs to execute...

[Thu Nov 23 11:39:23 2023]
rule medaka:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_9_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_9.log
    jobid: 121
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/medaka.CS-1_9.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/consensus.fasta
    wildcards: sample=CS-1_9
    threads: 32
    resources: tmpdir=/local/nala0006/2279931, mem_mb=64000, mem_mib=61036, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_9_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_9.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/consensus.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
[Thu Nov 23 11:39:25 2023]
Error in rule medaka:
    jobid: 121
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_9_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_9.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_9_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_9.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/consensus.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_9.log:
================================================================================
[11:39:25 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmp9sjjubgg.
[11:39:25 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpg0blusqk.
Creating fai index file /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/assembly.fasta.fai
[faidx] Could not build fai index /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/assembly.fasta.fai
================================================================================

Select jobs to execute...

[Thu Nov 23 11:39:25 2023]
rule medaka:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ec_25_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ec_25.log
    jobid: 114
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/medaka.Ec_25.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/consensus.fasta
    wildcards: sample=Ec_25
    threads: 32
    resources: tmpdir=/local/nala0006/2279931, mem_mb=64000, mem_mib=61036, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ec_25_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ec_25.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/consensus.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
[Thu Nov 23 11:39:28 2023]
Error in rule medaka:
    jobid: 114
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ec_25_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ec_25.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ec_25_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ec_25.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/consensus.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ec_25.log:
================================================================================
[11:39:28 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpfh142gav.
[11:39:28 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmphrqgpqmo.
Creating fai index file /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/assembly.fasta.fai
[faidx] Could not build fai index /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/assembly.fasta.fai
================================================================================

Select jobs to execute...

[Thu Nov 23 11:39:28 2023]
rule medaka:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Bu_06_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Bu_06.log
    jobid: 87
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/medaka.Bu_06.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/consensus.fasta
    wildcards: sample=Bu_06
    threads: 32
    resources: tmpdir=/local/nala0006/2279931, mem_mb=64000, mem_mib=61036, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Bu_06_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Bu_06.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/consensus.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
[Thu Nov 23 11:39:31 2023]
Error in rule medaka:
    jobid: 87
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Bu_06_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Bu_06.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Bu_06_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Bu_06.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/consensus.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Bu_06.log:
================================================================================
[11:39:30 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmptyhdjq9c.
[11:39:31 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpi5bl2qjh.
Creating fai index file /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/assembly.fasta.fai
[faidx] Could not build fai index /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/assembly.fasta.fai
================================================================================

Select jobs to execute...

[Thu Nov 23 11:39:31 2023]
rule medaka:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ecoli_26_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ecoli_26.log
    jobid: 68
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/medaka.Ecoli_26.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/consensus.fasta
    wildcards: sample=Ecoli_26
    threads: 32
    resources: tmpdir=/local/nala0006/2279931, mem_mb=64000, mem_mib=61036, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ecoli_26_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ecoli_26.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/consensus.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
[Thu Nov 23 11:39:34 2023]
Error in rule medaka:
    jobid: 68
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ecoli_26_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ecoli_26.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ecoli_26_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ecoli_26.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/consensus.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ecoli_26.log:
================================================================================
[11:39:33 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpjo7_96_0.
[11:39:34 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmp1x5h_a2l.
Creating fai index file /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/assembly.fasta.fai
[faidx] Could not build fai index /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/assembly.fasta.fai
================================================================================

Select jobs to execute...

[Thu Nov 23 11:39:34 2023]
rule medaka:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ecoli_39_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ecoli_39.log
    jobid: 126
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/medaka.Ecoli_39.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/consensus.fasta
    wildcards: sample=Ecoli_39
    threads: 32
    resources: tmpdir=/local/nala0006/2279931, mem_mb=64000, mem_mib=61036, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ecoli_39_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ecoli_39.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/consensus.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
[Thu Nov 23 11:39:36 2023]
Error in rule medaka:
    jobid: 126
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ecoli_39_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ecoli_39.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ecoli_39_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ecoli_39.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/consensus.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ecoli_39.log:
================================================================================
[11:39:36 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmp8jptyoyd.
[11:39:36 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpbzd_qkqa.
Creating fai index file /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/assembly.fasta.fai
[faidx] Could not build fai index /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/assembly.fasta.fai
================================================================================

Select jobs to execute...

[Thu Nov 23 11:39:36 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_14.log
    jobid: 557
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_length_gc_cds_density.tsv
    wildcards: sample=Bf_14
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_14                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_14.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14_genome.fasta -n Bf_14_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr -p Bf_14 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_

[Thu Nov 23 11:39:36 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_05.log
    jobid: 631
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_length_gc_cds_density.tsv
    wildcards: sample=Bf_05
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_05                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_05.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05_genome.fasta -n Bf_05_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr -p Bf_05 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_dnaapler_reoriented.fasta
        fi
        

Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
[Thu Nov 23 11:39:37 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-2_12_2.log
    jobid: 615
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/top_hits_vfdb.tsv
    wildcards: sample=CS-2_12_2
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p CS-2_12_2                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-2_12_2.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2_genome.fasta -n CS-2_12_2_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr -p CS-2_12_2 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_

[Thu Nov 23 11:39:37 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_13.log
    jobid: 507
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_minced_spacers.txt
    wildcards: sample=Bf_13
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_13                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_13.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13_genome.fasta -n Bf_13_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr -p Bf_13 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
2023-11-23 11:43:17.748 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:43:17.749 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:43:17.749 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32_genome.fasta', plot_name='Ecoli_32_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr', gff='', genbank='', prefix='Ecoli_32', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:43:17.749 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:43:17.749 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:43:17.749 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:43:17.749 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:43:17.749 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:43:17.749 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:43:17.749 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:43:17.750 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:43:17.754 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32_genome.fasta.
2023-11-23 11:43:17.755 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32_genome.fasta is in FASTA format.
2023-11-23 11:43:17.755 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32_genome.fasta for duplicate FASTA headers.
2023-11-23 11:43:17.756 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32_genome.fasta are unique.
2023-11-23 11:43:17.756 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:43:17.756 | INFO     | __main__:<module>:291 - Plotting the phage.
2023-11-23 11:43:18.582 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:43:18.582 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:43:18.582 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34_genome.fasta', plot_name='Ecoli_34_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr', gff='', genbank='', prefix='Ecoli_34', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:43:18.582 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:43:18.583 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:43:18.583 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:43:18.583 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:43:18.583 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:43:18.583 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:43:18.583 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:43:18.583 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:43:18.587 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34_genome.fasta.
2023-11-23 11:43:18.588 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34_genome.fasta is in FASTA format.
2023-11-23 11:43:18.588 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34_genome.fasta for duplicate FASTA headers.
2023-11-23 11:43:18.588 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34_genome.fasta are unique.
2023-11-23 11:43:18.589 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:43:18.589 | INFO     | __main__:<module>:291 - Plotting the phage.
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:43:22 2023]
Error in rule pharokka_flye:
    jobid: 531
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_32.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_32                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_32.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32_genome.fasta -n Ecoli_32_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr -p Ecoli_32 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_32.log:
================================================================================
2023-11-23 11:38:58.731 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr as -f or --force was specified.
2023-11-23 11:38:58.743 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:38:58.743 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Ecoli_32', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:38:58.743 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:38:58.743 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:38:58.743 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:38:58.747 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:38:58.747 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:38:58.941 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:38:58.941 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:38:58.956 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:38:58.957 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:38:59.090 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:38:59.090 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:38:59.214 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:38:59.215 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:38:59.221 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:38:59.221 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:38:59.237 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:38:59.237 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:38:59.738 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:38:59.739 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:38:59.739 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:38:59.739 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:38:59.739 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:38:59.739 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:38:59.751 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32_genome.fasta.
2023-11-23 11:38:59.751 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32_genome.fasta is in FASTA format.
2023-11-23 11:38:59.752 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32_genome.fasta for duplicate FASTA headers.
2023-11-23 11:38:59.752 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32_genome.fasta are unique.
2023-11-23 11:38:59.752 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:38:59.752 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:38:59.753 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:38:59.758 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32_genome.fasta ...
2023-11-23 11:39:01.523 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32_genome.fasta
2023-11-23 11:39:01.531 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:39:01.536 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:18.044 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:18.049 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:34.751 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:34.782 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:39:34.786 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:35.017 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:35.019 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:39:35.022 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_minced.gff ...
2023-11-23 11:39:35.141 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_minced.gff
2023-11-23 11:39:35.143 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:39:35.146 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:35.171 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:35.173 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:39:35.174 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:39:35.178 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/target_dir/target_seqs ...
2023-11-23 11:39:35.830 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/target_dir/target_seqs
2023-11-23 11:39:35.834 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:41:55.474 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:41:55.481 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:41:55.668 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:41:55.687 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:41:55.692 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:41:56.405 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/CARD_target_dir/target_seqs
2023-11-23 11:41:56.411 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:42:18.877 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:42:18.883 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:42:18.971 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:42:18.990 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:42:18.996 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:42:19.767 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/VFDB_target_dir/target_seqs
2023-11-23 11:42:19.773 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:42:58.656 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:42:58.662 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:42:58.768 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:42:58.786 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:43:14.518 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:43:14.536 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:43:14.536 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:43:14.802 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:43:14.811 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:43:14.812 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:43:14.820 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:43:14.967 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:43:15.016 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:43:15.029 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:43:15.033 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/input_mash_sketch.msh -i ...
2023-11-23 11:43:15.055 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/input_mash_sketch.msh -i
2023-11-23 11:43:15.060 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:43:15.623 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:43:15.889 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:43:15.889 | INFO     | __main__:main:481 - Elapsed time: 257.15 seconds
2023-11-23 11:43:15.889 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:43:15.889 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:43:15.889 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:43:15.889 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:43:15.890 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:43:15.890 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:43:22 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_06.log
    jobid: 527
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_top_hits_mash_inphared.tsv
    wildcards: sample=Bf_06
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_06                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_06.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06_genome.fasta -n Bf_06_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr -p Bf_06 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:43:23 2023]
Error in rule pharokka_flye:
    jobid: 593
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_34.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_34                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_34.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34_genome.fasta -n Ecoli_34_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr -p Ecoli_34 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_34.log:
================================================================================
2023-11-23 11:39:03.316 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr as -f or --force was specified.
2023-11-23 11:39:03.407 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:39:03.407 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Ecoli_34', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:39:03.407 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:39:03.408 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:39:03.408 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:39:03.408 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:39:03.408 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:39:03.542 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:39:03.542 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:39:03.551 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:39:03.551 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:39:03.637 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:39:03.637 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:39:03.709 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:39:03.709 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:39:03.715 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:39:03.715 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:39:03.726 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:39:03.727 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:39:04.210 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:39:04.211 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:39:04.211 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:39:04.211 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:39:04.211 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:39:04.211 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:39:04.219 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34_genome.fasta.
2023-11-23 11:39:04.219 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34_genome.fasta is in FASTA format.
2023-11-23 11:39:04.219 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34_genome.fasta for duplicate FASTA headers.
2023-11-23 11:39:04.220 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34_genome.fasta are unique.
2023-11-23 11:39:04.220 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:39:04.220 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:39:04.221 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:39:04.226 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34_genome.fasta ...
2023-11-23 11:39:05.934 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34_genome.fasta
2023-11-23 11:39:05.941 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:39:05.945 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:20.674 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:20.679 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:35.550 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:35.587 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:39:35.591 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:35.817 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:35.820 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:39:35.824 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_minced.gff ...
2023-11-23 11:39:35.940 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_minced.gff
2023-11-23 11:39:35.942 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:39:35.945 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:35.971 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:35.973 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:39:35.974 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:39:35.978 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/target_dir/target_seqs ...
2023-11-23 11:39:36.680 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/target_dir/target_seqs
2023-11-23 11:39:36.685 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:41:56.321 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:41:56.327 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:41:56.528 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:41:56.547 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:41:56.552 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:41:57.339 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/CARD_target_dir/target_seqs
2023-11-23 11:41:57.345 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:42:19.821 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:42:19.827 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:42:19.926 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:42:19.944 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:42:19.950 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:42:20.695 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/VFDB_target_dir/target_seqs
2023-11-23 11:42:20.702 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:42:59.439 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:42:59.445 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:42:59.540 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:42:59.557 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:43:15.414 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:43:15.430 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:43:15.430 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:43:15.692 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:43:15.700 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:43:15.701 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:43:15.709 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:43:15.859 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:43:15.909 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:43:15.913 | INFO     | post_processing:extract_terl:1969 - More than one CDS annotated as terminase large subunit found. 
Saving all.
2023-11-23 11:43:15.923 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:43:15.926 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/input_mash_sketch.msh -i ...
2023-11-23 11:43:15.961 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/input_mash_sketch.msh -i
2023-11-23 11:43:15.966 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:43:16.555 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:43:16.832 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:43:16.832 | INFO     | __main__:main:481 - Elapsed time: 253.43 seconds
2023-11-23 11:43:16.832 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:43:16.832 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:43:16.833 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:43:16.833 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:43:16.833 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:43:16.833 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:43:23 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_07.log
    jobid: 571
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07.gbk
    wildcards: sample=Bf_07
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_07                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_07.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07_genome.fasta -n Bf_07_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr -p Bf_07 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
2023-11-23 11:43:34.383 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:43:34.383 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:43:34.383 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31_genome.fasta', plot_name='Ecoli_31_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr', gff='', genbank='', prefix='Ecoli_31', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:43:34.383 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:43:34.383 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:43:34.383 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:43:34.384 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:43:34.384 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:43:34.384 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:43:34.384 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:43:34.384 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:43:34.388 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31_genome.fasta.
2023-11-23 11:43:34.388 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31_genome.fasta is in FASTA format.
2023-11-23 11:43:34.388 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31_genome.fasta for duplicate FASTA headers.
2023-11-23 11:43:34.389 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31_genome.fasta are unique.
2023-11-23 11:43:34.389 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:43:34.389 | INFO     | __main__:<module>:291 - Plotting the phage.
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:43:38 2023]
Error in rule pharokka_flye:
    jobid: 523
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_31.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_31                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_31.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31_genome.fasta -n Ecoli_31_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr -p Ecoli_31 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_31.log:
================================================================================
2023-11-23 11:39:13.485 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr as -f or --force was specified.
2023-11-23 11:39:13.498 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:39:13.498 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Ecoli_31', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:39:13.499 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:39:13.499 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:39:13.499 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:39:13.499 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:39:13.499 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:39:13.632 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:39:13.632 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:39:13.640 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:39:13.640 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:39:13.721 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:39:13.721 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:39:13.789 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:39:13.790 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:39:13.795 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:39:13.796 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:39:13.806 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:39:13.806 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:39:14.304 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:39:14.304 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:39:14.304 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:39:14.304 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:39:14.304 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:39:14.304 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:39:14.311 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31_genome.fasta.
2023-11-23 11:39:14.311 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31_genome.fasta is in FASTA format.
2023-11-23 11:39:14.311 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31_genome.fasta for duplicate FASTA headers.
2023-11-23 11:39:14.312 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31_genome.fasta are unique.
2023-11-23 11:39:14.312 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:39:14.312 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:39:14.313 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:39:14.318 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31_genome.fasta ...
2023-11-23 11:39:15.884 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31_genome.fasta
2023-11-23 11:39:15.891 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:39:15.895 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:30.896 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:30.901 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:45.763 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:45.799 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:39:45.803 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:46.040 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:46.042 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:39:46.046 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_minced.gff ...
2023-11-23 11:39:46.156 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_minced.gff
2023-11-23 11:39:46.158 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:39:46.162 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:46.188 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:46.190 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:39:46.191 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:39:46.196 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/target_dir/target_seqs ...
2023-11-23 11:39:46.864 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/target_dir/target_seqs
2023-11-23 11:39:46.870 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:42:08.052 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:42:08.058 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:42:08.187 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:42:08.207 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:42:08.213 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:42:08.937 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/CARD_target_dir/target_seqs
2023-11-23 11:42:08.943 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:42:31.450 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:42:31.456 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:42:31.536 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:42:31.554 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:42:31.559 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:42:32.290 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/VFDB_target_dir/target_seqs
2023-11-23 11:42:32.295 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:43:16.075 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:43:16.080 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:43:16.164 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:43:16.182 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:43:31.433 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:43:31.447 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:43:31.447 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:43:31.682 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:43:31.691 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:43:31.691 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:43:31.699 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:43:31.843 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:43:31.892 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:43:31.892 | INFO     | post_processing:extract_terl:1969 - More than one CDS annotated as terminase large subunit found. 
Saving all.
2023-11-23 11:43:31.905 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:43:31.909 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/input_mash_sketch.msh -i ...
2023-11-23 11:43:31.929 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/input_mash_sketch.msh -i
2023-11-23 11:43:31.934 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:43:32.467 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:43:32.729 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:43:32.729 | INFO     | __main__:main:481 - Elapsed time: 259.24 seconds
2023-11-23 11:43:32.729 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:43:32.729 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:43:32.729 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:43:32.729 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:43:32.730 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:43:32.730 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:43:38 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_04.log
    jobid: 605
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/top_hits_vfdb.tsv
    wildcards: sample=Bf_04
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_04                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_04.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04_genome.fasta -n Bf_04_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr -p Bf_04 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
2023-11-23 11:43:47.236 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:43:47.236 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:43:47.236 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36_genome.fasta', plot_name='Ecoli_36_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr', gff='', genbank='', prefix='Ecoli_36', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:43:47.236 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:43:47.236 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:43:47.236 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:43:47.237 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:43:47.237 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:43:47.237 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:43:47.237 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:43:47.237 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:43:47.241 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36_genome.fasta.
2023-11-23 11:43:47.241 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36_genome.fasta is in FASTA format.
2023-11-23 11:43:47.241 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36_genome.fasta for duplicate FASTA headers.
2023-11-23 11:43:47.242 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36_genome.fasta are unique.
2023-11-23 11:43:47.242 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:43:47.242 | INFO     | __main__:<module>:291 - Plotting the phage.
2023-11-23 11:43:48.308 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:43:48.308 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:43:48.309 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05_genome.fasta', plot_name='Bf_05_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr', gff='', genbank='', prefix='Bf_05', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:43:48.309 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:43:48.309 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:43:48.309 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:43:48.309 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:43:48.309 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:43:48.309 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:43:48.309 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:43:48.309 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:43:48.313 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05_genome.fasta.
2023-11-23 11:43:48.313 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05_genome.fasta is in FASTA format.
2023-11-23 11:43:48.314 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05_genome.fasta for duplicate FASTA headers.
2023-11-23 11:43:48.314 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05_genome.fasta are unique.
2023-11-23 11:43:48.314 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:43:48.314 | INFO     | __main__:<module>:291 - Plotting the phage.
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:43:51 2023]
Error in rule pharokka_flye:
    jobid: 581
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_36.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_36                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_36.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36_genome.fasta -n Ecoli_36_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr -p Ecoli_36 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_36.log:
================================================================================
2023-11-23 11:39:13.476 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr as -f or --force was specified.
2023-11-23 11:39:13.488 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:39:13.488 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Ecoli_36', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:39:13.489 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:39:13.489 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:39:13.489 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:39:13.489 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:39:13.489 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:39:13.627 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:39:13.627 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:39:13.636 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:39:13.636 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:39:13.716 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:39:13.716 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:39:13.784 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:39:13.785 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:39:13.790 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:39:13.790 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:39:13.802 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:39:13.802 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:39:14.295 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:39:14.295 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:39:14.295 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:39:14.295 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:39:14.295 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:39:14.295 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:39:14.303 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36_genome.fasta.
2023-11-23 11:39:14.303 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36_genome.fasta is in FASTA format.
2023-11-23 11:39:14.303 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36_genome.fasta for duplicate FASTA headers.
2023-11-23 11:39:14.304 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36_genome.fasta are unique.
2023-11-23 11:39:14.304 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:39:14.304 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:39:14.305 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:39:14.310 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36_genome.fasta ...
2023-11-23 11:39:15.860 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36_genome.fasta
2023-11-23 11:39:15.868 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:39:15.872 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:32.856 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:32.865 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:49.665 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:49.704 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:39:49.708 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:49.941 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:49.943 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:39:49.947 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_minced.gff ...
2023-11-23 11:39:50.054 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_minced.gff
2023-11-23 11:39:50.056 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:39:50.059 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:50.084 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:50.087 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:39:50.087 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:39:50.092 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/target_dir/target_seqs ...
2023-11-23 11:39:50.754 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/target_dir/target_seqs
2023-11-23 11:39:50.760 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:42:20.727 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:42:20.733 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:42:20.875 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:42:20.894 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:42:20.900 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:42:21.564 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/CARD_target_dir/target_seqs
2023-11-23 11:42:21.570 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:42:47.352 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:42:47.357 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:42:47.455 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:42:47.472 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:42:47.478 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:42:48.294 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/VFDB_target_dir/target_seqs
2023-11-23 11:42:48.300 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:43:29.613 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:43:29.619 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:43:29.715 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:43:29.732 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:43:44.308 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:43:44.321 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:43:44.321 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:43:44.526 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:43:44.534 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:43:44.535 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:43:44.542 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:43:44.673 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:43:44.717 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:43:44.729 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:43:44.733 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/input_mash_sketch.msh -i ...
2023-11-23 11:43:44.753 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/input_mash_sketch.msh -i
2023-11-23 11:43:44.758 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:43:45.289 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:43:45.559 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:43:45.559 | INFO     | __main__:main:481 - Elapsed time: 272.07 seconds
2023-11-23 11:43:45.560 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:43:45.560 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:43:45.560 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:43:45.560 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:43:45.560 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:43:45.560 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:43:51 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_07.log
    jobid: 551
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_minced_spacers.txt
    wildcards: sample=Bu_07
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bu_07                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_07.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07_genome.fasta -n Bu_07_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr -p Bu_07 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:43:52 2023]
Error in rule pharokka_flye:
    jobid: 631
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_05.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_05                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_05.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05_genome.fasta -n Bf_05_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr -p Bf_05 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_05.log:
================================================================================
2023-11-23 11:39:38.495 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr as -f or --force was specified.
2023-11-23 11:39:38.515 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:39:38.515 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bf_05', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:39:38.515 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:39:38.516 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:39:38.516 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:39:38.516 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:39:38.516 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:39:38.653 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:39:38.654 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:39:38.663 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:39:38.663 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:39:38.744 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:39:38.744 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:39:38.807 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:39:38.807 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:39:38.812 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:39:38.812 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:39:38.823 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:39:38.823 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:39:39.348 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:39:39.348 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:39:39.348 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:39:39.348 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:39:39.349 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:39:39.349 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:39:39.356 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05_genome.fasta.
2023-11-23 11:39:39.357 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05_genome.fasta is in FASTA format.
2023-11-23 11:39:39.357 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05_genome.fasta for duplicate FASTA headers.
2023-11-23 11:39:39.358 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05_genome.fasta are unique.
2023-11-23 11:39:39.358 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:39:39.358 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:39:39.358 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:39:39.364 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05_genome.fasta ...
2023-11-23 11:39:40.879 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05_genome.fasta
2023-11-23 11:39:40.886 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:39:40.890 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:48.111 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:48.117 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:55.318 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:55.348 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:39:55.355 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:55.532 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:55.535 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:39:55.538 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_minced.gff ...
2023-11-23 11:39:55.640 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_minced.gff
2023-11-23 11:39:55.642 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:39:55.645 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:55.663 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:55.666 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:39:55.666 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:39:55.671 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/target_dir/target_seqs ...
2023-11-23 11:39:56.540 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/target_dir/target_seqs
2023-11-23 11:39:56.547 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:42:30.590 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:42:30.596 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:42:30.726 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:42:30.745 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:42:30.750 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:42:31.447 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/CARD_target_dir/target_seqs
2023-11-23 11:42:31.453 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:42:54.230 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:42:54.236 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:42:54.315 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:42:54.335 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:42:54.341 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:42:55.044 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/VFDB_target_dir/target_seqs
2023-11-23 11:42:55.049 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:43:30.888 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:43:30.893 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:43:30.977 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:43:30.994 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:43:45.504 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:43:45.519 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:43:45.519 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:43:45.698 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:43:45.706 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:43:45.706 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:43:45.721 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:43:45.844 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:43:45.886 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:43:45.899 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:43:45.909 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/input_mash_sketch.msh -i ...
2023-11-23 11:43:45.927 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/input_mash_sketch.msh -i
2023-11-23 11:43:45.932 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:43:46.493 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:43:46.735 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:43:46.736 | INFO     | __main__:main:481 - Elapsed time: 248.22 seconds
2023-11-23 11:43:46.736 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:43:46.736 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:43:46.736 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:43:46.736 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:43:46.736 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:43:46.736 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:43:52 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_12.log
    jobid: 589
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/top_hits_vfdb.tsv
    wildcards: sample=Bf_12
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_12                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_12.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12_genome.fasta -n Bf_12_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr -p Bf_12 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
2023-11-23 11:43:55.594 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:43:55.595 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:43:55.595 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13_genome.fasta', plot_name='Bf_13_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr', gff='', genbank='', prefix='Bf_13', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:43:55.595 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:43:55.595 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:43:55.595 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:43:55.595 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:43:55.595 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:43:55.595 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:43:55.595 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:43:55.595 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:43:55.599 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13_genome.fasta.
2023-11-23 11:43:55.600 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13_genome.fasta is in FASTA format.
2023-11-23 11:43:55.600 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13_genome.fasta for duplicate FASTA headers.
2023-11-23 11:43:55.600 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13_genome.fasta are unique.
2023-11-23 11:43:55.601 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:43:55.601 | INFO     | __main__:<module>:291 - Plotting the phage.
2023-11-23 11:43:55.815 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:43:55.815 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:43:55.815 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14_genome.fasta', plot_name='Bf_14_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr', gff='', genbank='', prefix='Bf_14', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:43:55.815 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:43:55.815 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:43:55.815 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:43:55.815 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:43:55.815 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:43:55.816 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:43:55.816 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:43:55.816 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:43:55.819 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14_genome.fasta.
2023-11-23 11:43:55.820 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14_genome.fasta is in FASTA format.
2023-11-23 11:43:55.820 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14_genome.fasta for duplicate FASTA headers.
2023-11-23 11:43:55.820 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14_genome.fasta are unique.
2023-11-23 11:43:55.821 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:43:55.821 | INFO     | __main__:<module>:291 - Plotting the phage.
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:43:59 2023]
Error in rule pharokka_flye:
    jobid: 507
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_13.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_13                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_13.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13_genome.fasta -n Bf_13_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr -p Bf_13 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_13.log:
================================================================================
2023-11-23 11:39:38.569 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr as -f or --force was specified.
2023-11-23 11:39:38.582 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:39:38.582 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bf_13', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:39:38.582 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:39:38.582 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:39:38.582 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:39:38.583 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:39:38.583 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:39:38.725 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:39:38.725 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:39:38.734 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:39:38.734 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:39:38.817 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:39:38.817 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:39:38.883 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:39:38.884 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:39:38.889 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:39:38.889 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:39:38.900 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:39:38.900 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:39:39.393 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:39:39.394 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:39:39.394 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:39:39.394 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:39:39.394 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:39:39.394 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:39:39.403 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13_genome.fasta.
2023-11-23 11:39:39.404 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13_genome.fasta is in FASTA format.
2023-11-23 11:39:39.404 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13_genome.fasta for duplicate FASTA headers.
2023-11-23 11:39:39.404 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13_genome.fasta are unique.
2023-11-23 11:39:39.405 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:39:39.405 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:39:39.405 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:39:39.410 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13_genome.fasta ...
2023-11-23 11:39:40.792 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13_genome.fasta
2023-11-23 11:39:40.802 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:39:40.806 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:48.129 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:48.134 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:55.464 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:55.494 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:39:55.497 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:55.675 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:55.678 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:39:55.681 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_minced.gff ...
2023-11-23 11:39:55.783 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_minced.gff
2023-11-23 11:39:55.786 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:39:55.790 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:55.810 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:55.814 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:39:55.814 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:39:55.819 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/target_dir/target_seqs ...
2023-11-23 11:39:56.763 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/target_dir/target_seqs
2023-11-23 11:39:56.769 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:42:34.330 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:42:34.336 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:42:34.534 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:42:34.555 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:42:34.560 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:42:35.583 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/CARD_target_dir/target_seqs
2023-11-23 11:42:35.589 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:43:01.979 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:43:01.985 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:43:02.073 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:43:02.092 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:43:02.097 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:43:02.939 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/VFDB_target_dir/target_seqs
2023-11-23 11:43:02.946 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:43:38.176 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:43:38.183 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:43:38.281 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:43:38.298 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:43:52.743 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:43:52.756 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:43:52.757 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:43:52.946 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:43:52.954 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:43:52.955 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:43:52.962 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:43:53.085 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:43:53.128 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:43:53.132 | INFO     | post_processing:extract_terl:1969 - More than one CDS annotated as terminase large subunit found. 
Saving all.
2023-11-23 11:43:53.142 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:43:53.145 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/input_mash_sketch.msh -i ...
2023-11-23 11:43:53.164 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/input_mash_sketch.msh -i
2023-11-23 11:43:53.169 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:43:53.713 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:43:53.966 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:43:53.966 | INFO     | __main__:main:481 - Elapsed time: 255.39 seconds
2023-11-23 11:43:53.966 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:43:53.966 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:43:53.967 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:43:53.967 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:43:53.967 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:43:53.967 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:43:59 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_01.log
    jobid: 513
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_length_gc_cds_density.tsv
    wildcards: sample=Bf_01
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_01                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_01.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01_genome.fasta -n Bf_01_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr -p Bf_01 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:44:00 2023]
Error in rule pharokka_flye:
    jobid: 557
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_14.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_14                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_14.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14_genome.fasta -n Bf_14_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr -p Bf_14 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_14.log:
================================================================================
2023-11-23 11:39:38.498 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr as -f or --force was specified.
2023-11-23 11:39:38.512 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:39:38.512 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bf_14', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:39:38.512 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:39:38.512 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:39:38.512 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:39:38.513 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:39:38.513 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:39:38.653 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:39:38.653 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:39:38.662 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:39:38.662 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:39:38.743 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:39:38.743 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:39:38.814 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:39:38.815 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:39:38.820 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:39:38.820 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:39:38.832 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:39:38.832 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:39:39.354 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:39:39.354 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:39:39.354 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:39:39.354 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:39:39.355 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:39:39.355 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:39:39.361 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14_genome.fasta.
2023-11-23 11:39:39.361 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14_genome.fasta is in FASTA format.
2023-11-23 11:39:39.361 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14_genome.fasta for duplicate FASTA headers.
2023-11-23 11:39:39.362 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14_genome.fasta are unique.
2023-11-23 11:39:39.362 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:39:39.362 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:39:39.362 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:39:39.369 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14_genome.fasta ...
2023-11-23 11:39:40.801 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14_genome.fasta
2023-11-23 11:39:40.811 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:39:40.815 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:48.065 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:48.071 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:55.386 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:55.414 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:39:55.418 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:55.598 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:55.600 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:39:55.603 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_minced.gff ...
2023-11-23 11:39:55.714 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_minced.gff
2023-11-23 11:39:55.717 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:39:55.720 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:55.740 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:55.743 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:39:55.743 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:39:55.748 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/target_dir/target_seqs ...
2023-11-23 11:39:56.687 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/target_dir/target_seqs
2023-11-23 11:39:56.693 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:42:34.625 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:42:34.631 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:42:34.873 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:42:34.893 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:42:34.898 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:42:35.801 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/CARD_target_dir/target_seqs
2023-11-23 11:42:35.807 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:43:02.168 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:43:02.175 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:43:02.272 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:43:02.293 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:43:02.298 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:43:03.079 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/VFDB_target_dir/target_seqs
2023-11-23 11:43:03.084 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:43:38.357 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:43:38.363 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:43:38.452 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:43:38.467 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:43:52.959 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:43:52.973 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:43:52.973 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:43:53.168 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:43:53.176 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:43:53.176 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:43:53.183 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:43:53.318 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:43:53.362 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:43:53.366 | INFO     | post_processing:extract_terl:1969 - More than one CDS annotated as terminase large subunit found. 
Saving all.
2023-11-23 11:43:53.376 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:43:53.379 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/input_mash_sketch.msh -i ...
2023-11-23 11:43:53.396 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/input_mash_sketch.msh -i
2023-11-23 11:43:53.401 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:43:53.948 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:43:54.200 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:43:54.200 | INFO     | __main__:main:481 - Elapsed time: 255.69 seconds
2023-11-23 11:43:54.200 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:43:54.200 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:43:54.200 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:43:54.200 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:43:54.200 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:43:54.201 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:44:00 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_10.log
    jobid: 595
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_length_gc_cds_density.tsv
    wildcards: sample=Bf_10
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_10                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_10.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10_genome.fasta -n Bf_10_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr -p Bf_10 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
2023-11-23 11:44:07.207 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:44:07.207 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:44:07.208 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2_genome.fasta', plot_name='CS-2_12_2_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr', gff='', genbank='', prefix='CS-2_12_2', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:44:07.208 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:44:07.208 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:44:07.208 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:44:07.208 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:44:07.208 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:44:07.208 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:44:07.208 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:44:07.208 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:44:07.213 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2_genome.fasta.
2023-11-23 11:44:07.213 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2_genome.fasta is in FASTA format.
2023-11-23 11:44:07.213 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2_genome.fasta for duplicate FASTA headers.
2023-11-23 11:44:07.214 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2_genome.fasta are unique.
2023-11-23 11:44:07.214 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:44:07.214 | INFO     | __main__:<module>:291 - Plotting the phage.
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:44:11 2023]
Error in rule pharokka_flye:
    jobid: 615
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-2_12_2.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p CS-2_12_2                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-2_12_2.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2_genome.fasta -n CS-2_12_2_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr -p CS-2_12_2 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-2_12_2.log:
================================================================================
2023-11-23 11:39:38.501 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr as -f or --force was specified.
2023-11-23 11:39:38.514 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:39:38.515 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='CS-2_12_2', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:39:38.515 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:39:38.515 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:39:38.515 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:39:38.515 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:39:38.515 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:39:38.660 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:39:38.661 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:39:38.668 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:39:38.669 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:39:38.752 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:39:38.752 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:39:38.821 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:39:38.822 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:39:38.828 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:39:38.828 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:39:38.836 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:39:38.837 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:39:39.351 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:39:39.351 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:39:39.352 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:39:39.352 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:39:39.352 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:39:39.352 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:39:39.358 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2_genome.fasta.
2023-11-23 11:39:39.358 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2_genome.fasta is in FASTA format.
2023-11-23 11:39:39.359 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2_genome.fasta for duplicate FASTA headers.
2023-11-23 11:39:39.359 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2_genome.fasta are unique.
2023-11-23 11:39:39.359 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:39:39.359 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:39:39.360 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:39:39.366 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2_genome.fasta ...
2023-11-23 11:39:40.802 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2_genome.fasta
2023-11-23 11:39:40.811 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:39:40.815 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:39:51.998 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:39:52.004 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:40:03.352 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:40:03.389 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:40:03.393 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:40:03.591 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:40:03.594 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:40:03.597 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_minced.gff ...
2023-11-23 11:40:03.737 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_minced.gff
2023-11-23 11:40:03.740 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:40:03.743 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:40:03.765 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:40:03.767 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:40:03.767 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:40:03.772 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/target_dir/target_seqs ...
2023-11-23 11:40:04.443 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/target_dir/target_seqs
2023-11-23 11:40:04.449 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:42:46.224 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:42:46.230 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:42:46.360 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:42:46.378 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:42:46.386 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:42:47.094 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CARD_target_dir/target_seqs
2023-11-23 11:42:47.099 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:43:11.376 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:43:11.382 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:43:11.464 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:43:11.484 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:43:11.489 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:43:12.183 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/VFDB_target_dir/target_seqs
2023-11-23 11:43:12.189 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:43:50.383 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:43:50.388 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:43:50.473 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:43:50.491 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:44:04.404 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:44:04.414 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:44:04.415 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:44:04.578 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:44:04.586 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:44:04.586 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:44:04.593 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:44:04.697 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:44:04.733 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:44:04.744 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:44:04.748 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/input_mash_sketch.msh -i ...
2023-11-23 11:44:04.767 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/input_mash_sketch.msh -i
2023-11-23 11:44:04.772 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:44:05.315 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:44:05.564 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:44:05.564 | INFO     | __main__:main:481 - Elapsed time: 267.05 seconds
2023-11-23 11:44:05.564 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:44:05.564 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:44:05.565 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:44:05.565 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:44:05.565 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:44:05.565 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:44:11 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_03.log
    jobid: 567
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_top_hits_mash_inphared.tsv
    wildcards: sample=Bf_03
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_03                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_03.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03_genome.fasta -n Bf_03_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr -p Bf_03 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
2023-11-23 11:47:19.932 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:47:19.933 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:47:19.933 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06_genome.fasta', plot_name='Bf_06_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr', gff='', genbank='', prefix='Bf_06', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:47:19.933 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:47:19.933 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:47:19.933 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:47:19.933 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:47:19.933 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:47:19.934 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:47:19.934 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:47:19.934 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:47:19.939 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06_genome.fasta.
2023-11-23 11:47:19.940 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06_genome.fasta is in FASTA format.
2023-11-23 11:47:19.940 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06_genome.fasta for duplicate FASTA headers.
2023-11-23 11:47:19.940 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06_genome.fasta are unique.
2023-11-23 11:47:19.941 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:47:19.941 | INFO     | __main__:<module>:291 - Plotting the phage.
2023-11-23 11:47:22.934 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:47:22.934 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:47:22.934 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07_genome.fasta', plot_name='Bf_07_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr', gff='', genbank='', prefix='Bf_07', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:47:22.935 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:47:22.935 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:47:22.935 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:47:22.935 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:47:22.935 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:47:22.935 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:47:22.935 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:47:22.935 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:47:22.939 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07_genome.fasta.
2023-11-23 11:47:22.940 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07_genome.fasta is in FASTA format.
2023-11-23 11:47:22.940 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07_genome.fasta for duplicate FASTA headers.
2023-11-23 11:47:22.940 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07_genome.fasta are unique.
2023-11-23 11:47:22.940 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:47:22.940 | INFO     | __main__:<module>:291 - Plotting the phage.
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:47:24 2023]
Error in rule pharokka_flye:
    jobid: 527
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_06.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_06                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_06.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06_genome.fasta -n Bf_06_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr -p Bf_06 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_06.log:
================================================================================
2023-11-23 11:43:23.930 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr as -f or --force was specified.
2023-11-23 11:43:23.942 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:43:23.943 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bf_06', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:43:23.943 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:43:23.943 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:43:23.943 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:43:23.945 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:43:23.945 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:43:24.101 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:43:24.101 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:43:24.110 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:43:24.110 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:43:24.202 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:43:24.203 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:43:24.276 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:43:24.277 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:43:24.284 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:43:24.285 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:43:24.296 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:43:24.296 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:43:24.840 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:43:24.841 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:43:24.841 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:43:24.841 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:43:24.841 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:43:24.841 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:43:24.847 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06_genome.fasta.
2023-11-23 11:43:24.848 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06_genome.fasta is in FASTA format.
2023-11-23 11:43:24.848 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06_genome.fasta for duplicate FASTA headers.
2023-11-23 11:43:24.848 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06_genome.fasta are unique.
2023-11-23 11:43:24.849 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:43:24.849 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:43:24.849 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:43:24.854 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06_genome.fasta ...
2023-11-23 11:43:26.512 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06_genome.fasta
2023-11-23 11:43:26.520 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:43:26.524 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:43:33.447 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:43:33.453 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:43:40.374 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:43:40.402 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:43:40.406 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:43:40.580 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:43:40.582 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:43:40.586 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_minced.gff ...
2023-11-23 11:43:40.691 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_minced.gff
2023-11-23 11:43:40.693 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:43:40.696 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:43:40.714 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:43:40.716 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:43:40.717 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:43:40.721 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/target_dir/target_seqs ...
2023-11-23 11:43:41.380 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/target_dir/target_seqs
2023-11-23 11:43:41.385 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:45:58.346 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:45:58.352 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:45:58.501 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:45:58.518 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:45:58.524 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:45:59.230 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/CARD_target_dir/target_seqs
2023-11-23 11:45:59.235 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:46:21.615 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:46:21.621 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:46:21.748 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:46:21.769 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:46:21.774 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:46:22.628 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/VFDB_target_dir/target_seqs
2023-11-23 11:46:22.633 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:47:01.079 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:47:01.085 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:47:01.176 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:47:01.194 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:47:16.331 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:47:16.346 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:47:16.346 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:47:16.561 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:47:16.569 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:47:16.570 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:47:16.577 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:47:16.713 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:47:16.761 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:47:16.765 | INFO     | post_processing:extract_terl:1969 - More than one CDS annotated as terminase large subunit found. 
Saving all.
2023-11-23 11:47:16.784 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:47:16.788 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/input_mash_sketch.msh -i ...
2023-11-23 11:47:16.821 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/input_mash_sketch.msh -i
2023-11-23 11:47:16.827 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:47:17.473 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:47:17.858 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:47:17.859 | INFO     | __main__:main:481 - Elapsed time: 233.92 seconds
2023-11-23 11:47:17.859 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:47:17.859 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:47:17.859 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:47:17.859 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:47:17.859 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:47:17.859 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:47:24 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-2_11.log
    jobid: 553
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11.gbk
    wildcards: sample=CS-2_11
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p CS-2_11                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-2_11.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11_genome.fasta -n CS-2_11_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr -p CS-2_11 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:47:27 2023]
Error in rule pharokka_flye:
    jobid: 571
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_07.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_07                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_07.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07_genome.fasta -n Bf_07_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr -p Bf_07 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_07.log:
================================================================================
2023-11-23 11:43:25.006 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr as -f or --force was specified.
2023-11-23 11:43:25.019 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:43:25.019 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bf_07', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:43:25.019 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:43:25.019 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:43:25.019 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:43:25.020 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:43:25.020 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:43:25.171 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:43:25.172 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:43:25.180 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:43:25.181 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:43:25.267 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:43:25.267 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:43:25.344 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:43:25.344 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:43:25.351 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:43:25.351 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:43:25.362 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:43:25.362 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:43:25.989 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:43:25.989 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:43:25.990 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:43:25.990 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:43:25.990 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:43:25.990 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:43:25.996 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07_genome.fasta.
2023-11-23 11:43:25.997 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07_genome.fasta is in FASTA format.
2023-11-23 11:43:25.997 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07_genome.fasta for duplicate FASTA headers.
2023-11-23 11:43:25.997 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07_genome.fasta are unique.
2023-11-23 11:43:25.997 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:43:25.997 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:43:25.998 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:43:26.003 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07_genome.fasta ...
2023-11-23 11:43:27.522 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07_genome.fasta
2023-11-23 11:43:27.529 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:43:27.533 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:43:34.310 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:43:34.316 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:43:41.100 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:43:41.129 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:43:41.133 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:43:41.307 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:43:41.309 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:43:41.312 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_minced.gff ...
2023-11-23 11:43:41.420 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_minced.gff
2023-11-23 11:43:41.422 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:43:41.425 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:43:41.443 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:43:41.445 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:43:41.445 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:43:41.450 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/target_dir/target_seqs ...
2023-11-23 11:43:42.135 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/target_dir/target_seqs
2023-11-23 11:43:42.140 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:45:59.543 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:45:59.549 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:45:59.676 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:45:59.694 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:45:59.698 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:46:00.426 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/CARD_target_dir/target_seqs
2023-11-23 11:46:00.432 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:46:22.857 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:46:22.863 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:46:22.950 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:46:22.967 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:46:22.972 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:46:23.625 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/VFDB_target_dir/target_seqs
2023-11-23 11:46:23.630 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:47:04.770 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:47:04.776 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:47:04.865 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:47:04.883 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:47:19.878 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:47:19.893 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:47:19.893 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:47:20.099 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:47:20.124 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:47:20.125 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:47:20.132 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:47:20.264 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:47:20.316 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:47:20.316 | INFO     | post_processing:extract_terl:1969 - More than one CDS annotated as terminase large subunit found. 
Saving all.
2023-11-23 11:47:20.327 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:47:20.330 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/input_mash_sketch.msh -i ...
2023-11-23 11:47:20.351 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/input_mash_sketch.msh -i
2023-11-23 11:47:20.356 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:47:20.940 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:47:21.244 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:47:21.244 | INFO     | __main__:main:481 - Elapsed time: 236.23 seconds
2023-11-23 11:47:21.245 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:47:21.245 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:47:21.245 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:47:21.245 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:47:21.245 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:47:21.245 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:47:27 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-2_12.log
    jobid: 517
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_length_gc_cds_density.tsv
    wildcards: sample=CS-2_12
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p CS-2_12                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-2_12.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12_genome.fasta -n CS-2_12_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr -p CS-2_12 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
2023-11-23 11:47:41.532 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:47:41.533 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:47:41.533 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04_genome.fasta', plot_name='Bf_04_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr', gff='', genbank='', prefix='Bf_04', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:47:41.533 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:47:41.533 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:47:41.533 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:47:41.533 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:47:41.533 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:47:41.533 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:47:41.533 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:47:41.534 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:47:41.537 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04_genome.fasta.
2023-11-23 11:47:41.538 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04_genome.fasta is in FASTA format.
2023-11-23 11:47:41.538 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04_genome.fasta for duplicate FASTA headers.
2023-11-23 11:47:41.538 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04_genome.fasta are unique.
2023-11-23 11:47:41.538 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:47:41.539 | INFO     | __main__:<module>:291 - Plotting the phage.
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:47:45 2023]
Error in rule pharokka_flye:
    jobid: 605
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_04.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_04                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_04.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04_genome.fasta -n Bf_04_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr -p Bf_04 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_04.log:
================================================================================
2023-11-23 11:43:40.366 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr as -f or --force was specified.
2023-11-23 11:43:40.378 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:43:40.378 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bf_04', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:43:40.378 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:43:40.378 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:43:40.378 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:43:40.379 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:43:40.379 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:43:40.512 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:43:40.512 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:43:40.520 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:43:40.520 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:43:40.601 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:43:40.602 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:43:40.665 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:43:40.666 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:43:40.671 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:43:40.671 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:43:40.682 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:43:40.683 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:43:41.173 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:43:41.174 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:43:41.174 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:43:41.174 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:43:41.174 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:43:41.174 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:43:41.180 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04_genome.fasta.
2023-11-23 11:43:41.181 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04_genome.fasta is in FASTA format.
2023-11-23 11:43:41.181 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04_genome.fasta for duplicate FASTA headers.
2023-11-23 11:43:41.181 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04_genome.fasta are unique.
2023-11-23 11:43:41.181 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:43:41.181 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:43:41.182 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:43:41.187 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04_genome.fasta ...
2023-11-23 11:43:42.605 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04_genome.fasta
2023-11-23 11:43:42.613 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:43:42.617 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:43:49.695 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:43:49.700 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:43:56.754 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:43:56.783 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:43:56.789 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:43:56.954 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:43:56.956 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:43:56.960 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_minced.gff ...
2023-11-23 11:43:57.058 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_minced.gff
2023-11-23 11:43:57.061 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:43:57.064 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:43:57.082 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:43:57.084 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:43:57.085 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:43:57.089 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/target_dir/target_seqs ...
2023-11-23 11:43:57.756 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/target_dir/target_seqs
2023-11-23 11:43:57.761 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:46:21.752 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:46:21.758 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:46:21.901 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:46:21.922 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:46:21.927 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:46:22.749 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/CARD_target_dir/target_seqs
2023-11-23 11:46:22.755 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:46:45.040 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:46:45.046 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:46:45.130 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:46:45.150 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:46:45.155 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:46:45.968 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/VFDB_target_dir/target_seqs
2023-11-23 11:46:45.974 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:47:23.623 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:47:23.628 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:47:23.727 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:47:23.746 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:47:38.538 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:47:38.553 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:47:38.553 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:47:38.759 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:47:38.767 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:47:38.768 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:47:38.775 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:47:38.906 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:47:38.959 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:47:38.973 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:47:38.976 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/input_mash_sketch.msh -i ...
2023-11-23 11:47:38.997 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/input_mash_sketch.msh -i
2023-11-23 11:47:39.003 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:47:39.559 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:47:39.833 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:47:39.833 | INFO     | __main__:main:481 - Elapsed time: 239.46 seconds
2023-11-23 11:47:39.833 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:47:39.833 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:47:39.834 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:47:39.834 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:47:39.834 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:47:39.834 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:47:45 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_30-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_30.log
    jobid: 757
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
    wildcards: sample=Bu_30
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_30-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bu_30" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bu_30" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bu_30" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
        fi
        

[Thu Nov 23 11:47:45 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_10-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_10.log
    jobid: 740
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
    wildcards: sample=Bf_10
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_10-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bf_10" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bf_10" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bf_10" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
        fi
        

[Thu Nov 23 11:47:45 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_07-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_07.log
    jobid: 728
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
    wildcards: sample=Bf_07
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_07-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bf_07" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bf_07" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bf_07" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
        fi
        
cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/phynteny/phynteny.gbk': No such file or directory
[Thu Nov 23 11:47:45 2023]

Error in rule summarize_longread:
    jobid: 757
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_30-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_30.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_30-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bu_30" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bu_30" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bu_30" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_30-sr/Bu_30_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_30.log not found.

[Thu Nov 23 11:47:45 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bb_15-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bb_15.log
    jobid: 741
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
    wildcards: sample=Bb_15
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bb_15-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bb_15" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bb_15" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bb_15" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
        fi
        
cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/phynteny/phynteny.gbk': No such file or directory

[Thu Nov 23 11:47:45 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_07-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_07.log
    jobid: 718
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
    wildcards: sample=Bu_07
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_07-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bu_07" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bu_07" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bu_07" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
        fi
        
[Thu Nov 23 11:47:45 2023]
Error in rule summarize_longread:
    jobid: 740
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_10-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_10.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_10-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bf_10" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bf_10" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bf_10" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_10-sr/Bf_10_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_10.log not found.

cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/phynteny/phynteny.gbk': No such file or directory

[Thu Nov 23 11:47:45 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_18-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_18.log
    jobid: 754
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
    wildcards: sample=Bu_18
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_18-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bu_18" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bu_18" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bu_18" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
        fi
        
[Thu Nov 23 11:47:45 2023]
cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/phynteny/phynteny.gbk': No such file or directory
Error in rule summarize_longread:
    jobid: 728
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_07-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_07.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_07-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_07-sr/Bf_07-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_07-sr/Bf_07_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bf_07" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bf_07" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bf_07" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_07-sr/Bf_07_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_07.log not found.

[Thu Nov 23 11:47:45 2023]
Error in rule summarize_longread:
    jobid: 741
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bb_15-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bb_15.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bb_15-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bb_15" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bb_15" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bb_15" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bb_15-sr/Bb_15_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bb_15.log not found.


[Thu Nov 23 11:47:45 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_20-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_20.log
    jobid: 748
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
    wildcards: sample=Bu_20
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_20-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bu_20" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bu_20" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bu_20" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
        fi
        
cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/phynteny/phynteny.gbk': No such file or directory

[Thu Nov 23 11:47:45 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_12-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_12.log
    jobid: 737
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
    wildcards: sample=Bf_12
    resources: tmpdir=/local/nala0006/2279931
[Thu Nov 23 11:47:45 2023]


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_12-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bf_12" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bf_12" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bf_12" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
        fi
        
Error in rule summarize_longread:
    jobid: 718
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_07-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_07.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_07-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bu_07" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bu_07" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bu_07" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_07-sr/Bu_07_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_07.log not found.

cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/phynteny/phynteny.gbk': No such file or directory
[Thu Nov 23 11:47:45 2023]
Error in rule summarize_longread:
    jobid: 754
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_18-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_18.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_18-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bu_18" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bu_18" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bu_18" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_18-sr/Bu_18_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_18.log not found.

cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/phynteny/phynteny.gbk': No such file or directory
[Thu Nov 23 11:47:45 2023]
Error in rule summarize_longread:
    jobid: 748
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_20-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_20.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_20-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bu_20" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bu_20" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bu_20" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_20-sr/Bu_20_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_20.log not found.

Select jobs to execute...

[Thu Nov 23 11:47:45 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_04-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_04.log
    jobid: 745
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
    wildcards: sample=Bf_04
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_04-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bf_04" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bf_04" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bf_04" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
        fi
        
cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/phynteny/phynteny.gbk': No such file or directory

[Thu Nov 23 11:47:45 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_36-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Ecoli_36.log
    jobid: 733
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
    wildcards: sample=Ecoli_36
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_36-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Ecoli_36" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Ecoli_36" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Ecoli_36" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
        fi
        
[Thu Nov 23 11:47:45 2023]
Error in rule summarize_longread:
    jobid: 737
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_12-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_12.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_12-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bf_12" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bf_12" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bf_12" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_12-sr/Bf_12_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_12.log not found.


[Thu Nov 23 11:47:45 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_06-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_06.log
    jobid: 706
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
    wildcards: sample=Bf_06
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_06-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bf_06" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bf_06" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bf_06" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
        fi
        

[Thu Nov 23 11:47:45 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-2_11-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.CS-2_11.log
    jobid: 719
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
    wildcards: sample=CS-2_11
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-2_11-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: CS-2_11" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: CS-2_11" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: CS-2_11" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
        fi
        
cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/phynteny/phynteny.gbk': No such file or directory
[Thu Nov 23 11:47:45 2023]
Error in rule summarize_longread:
    jobid: 745
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_04-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_04.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_04-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_04-sr/Bf_04-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_04-sr/Bf_04_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bf_04" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bf_04" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bf_04" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_04-sr/Bf_04_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_04.log not found.

cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/phynteny/phynteny.gbk': No such file or directory

[Thu Nov 23 11:47:45 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-2_12-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.CS-2_12.log
    jobid: 701
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
    wildcards: sample=CS-2_12
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-2_12-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: CS-2_12" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: CS-2_12" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: CS-2_12" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
        fi
        
[Thu Nov 23 11:47:45 2023]
Error in rule summarize_longread:
    jobid: 733
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_36-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Ecoli_36.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_36-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_36-sr/Ecoli_36-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_36-sr/Ecoli_36_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Ecoli_36" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Ecoli_36" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Ecoli_36" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_36-sr/Ecoli_36_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Ecoli_36.log not found.

cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/phynteny/phynteny.gbk': No such file or directory
[Thu Nov 23 11:47:46 2023]
Error in rule summarize_longread:
    jobid: 706
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_06-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_06.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_06-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_06-sr/Bf_06-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_06-sr/Bf_06_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bf_06" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bf_06" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bf_06" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_06-sr/Bf_06_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_06.log not found.

cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/phynteny/phynteny.gbk': No such file or directory
[Thu Nov 23 11:47:46 2023]
Error in rule summarize_longread:
    jobid: 719
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-2_11-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.CS-2_11.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-2_11-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: CS-2_11" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: CS-2_11" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: CS-2_11" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_11-sr/CS-2_11_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.CS-2_11.log not found.

Select jobs to execute...

[Thu Nov 23 11:47:46 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_05-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_05.log
    jobid: 758
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
    wildcards: sample=Bf_05
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_05-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bf_05" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bf_05" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bf_05" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
        fi
        
cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/phynteny/phynteny.gbk': No such file or directory
[Thu Nov 23 11:47:46 2023]
Error in rule summarize_longread:
    jobid: 701
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-2_12-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.CS-2_12.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-2_12-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: CS-2_12" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: CS-2_12" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: CS-2_12" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12-sr/CS-2_12_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.CS-2_12.log not found.


[Thu Nov 23 11:47:46 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_24-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_24.log
    jobid: 716
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
    wildcards: sample=Bu_24
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_24-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bu_24" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bu_24" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bu_24" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
        fi
        

[Thu Nov 23 11:47:46 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_09-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_09.log
    jobid: 705
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
    wildcards: sample=Bu_09
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_09-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bu_09" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bu_09" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bu_09" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
        fi
        
cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/phynteny/phynteny.gbk': No such file or directory

[Thu Nov 23 11:47:46 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_03-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_03.log
    jobid: 726
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
    wildcards: sample=Bf_03
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_03-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bf_03" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bf_03" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bf_03" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
        fi
        
[Thu Nov 23 11:47:46 2023]
Error in rule summarize_longread:
    jobid: 758
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_05-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_05.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_05-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_05-sr/Bf_05-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_05-sr/Bf_05_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bf_05" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bf_05" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bf_05" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_05-sr/Bf_05_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_05.log not found.

cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/phynteny/phynteny.gbk': No such file or directory

[Thu Nov 23 11:47:46 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_32-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Ecoli_32.log
    jobid: 708
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
    wildcards: sample=Ecoli_32
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_32-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Ecoli_32" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Ecoli_32" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Ecoli_32" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
        fi
        
[Thu Nov 23 11:47:46 2023]
Error in rule summarize_longread:
    jobid: 716
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_24-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_24.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_24-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bu_24" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bu_24" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bu_24" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_24-sr/Bu_24_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_24.log not found.

cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/phynteny/phynteny.gbk': No such file or directory
[Thu Nov 23 11:47:46 2023]
Error in rule summarize_longread:
    jobid: 705
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_09-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_09.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_09-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bu_09" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bu_09" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bu_09" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_09-sr/Bu_09_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_09.log not found.

cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/phynteny/phynteny.gbk': No such file or directory
[Thu Nov 23 11:47:46 2023]
Error in rule summarize_longread:
    jobid: 726
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_03-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_03.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_03-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bf_03" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bf_03" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bf_03" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_03-sr/Bf_03_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_03.log not found.

Select jobs to execute...

[Thu Nov 23 11:47:46 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-2_12_2-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.CS-2_12_2.log
    jobid: 750
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
    wildcards: sample=CS-2_12_2
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-2_12_2-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: CS-2_12_2" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: CS-2_12_2" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: CS-2_12_2" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
        fi
        
cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/phynteny/phynteny.gbk': No such file or directory
[Thu Nov 23 11:47:46 2023]
Error in rule summarize_longread:
    jobid: 708
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_32-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Ecoli_32.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_32-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_32-sr/Ecoli_32-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_32-sr/Ecoli_32_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Ecoli_32" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Ecoli_32" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Ecoli_32" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_32-sr/Ecoli_32_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Ecoli_32.log not found.


[Thu Nov 23 11:47:46 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_34-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Ecoli_34.log
    jobid: 739
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
    wildcards: sample=Ecoli_34
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_34-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Ecoli_34" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Ecoli_34" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Ecoli_34" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
        fi
        

[Thu Nov 23 11:47:46 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_13-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_13.log
    jobid: 696
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
    wildcards: sample=Bf_13
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_13-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bf_13" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bf_13" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bf_13" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
        fi
        
cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/phynteny/phynteny.gbk': No such file or directory
[Thu Nov 23 11:47:46 2023]
Error in rule summarize_longread:
    jobid: 750
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-2_12_2-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.CS-2_12_2.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-2_12_2-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12_2-sr/CS-2_12_2-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12_2-sr/CS-2_12_2_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: CS-2_12_2" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: CS-2_12_2" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: CS-2_12_2" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/CS-2_12_2-sr/CS-2_12_2_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.CS-2_12_2.log not found.


[Thu Nov 23 11:47:46 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_01-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_01.log
    jobid: 699
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
    wildcards: sample=Bf_01
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_01-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bf_01" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bf_01" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bf_01" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
        fi
        
cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/phynteny/phynteny.gbk': No such file or directory
[Thu Nov 23 11:47:46 2023]
Error in rule summarize_longread:
    jobid: 739
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_34-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Ecoli_34.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_34-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_34-sr/Ecoli_34-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_34-sr/Ecoli_34_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Ecoli_34" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Ecoli_34" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Ecoli_34" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_34-sr/Ecoli_34_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Ecoli_34.log not found.


[Thu Nov 23 11:47:46 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_17-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Ecoli_17.log
    jobid: 707
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
    wildcards: sample=Ecoli_17
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_17-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Ecoli_17" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Ecoli_17" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Ecoli_17" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
        fi
        
cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/phynteny/phynteny.gbk': No such file or directory
[Thu Nov 23 11:47:46 2023]
Error in rule summarize_longread:
    jobid: 696
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_13-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_13.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_13-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_13-sr/Bf_13-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_13-sr/Bf_13_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bf_13" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bf_13" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bf_13" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_13-sr/Bf_13_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_13.log not found.

cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/phynteny/phynteny.gbk': No such file or directory
[Thu Nov 23 11:47:46 2023]
Error in rule summarize_longread:
    jobid: 699
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_01-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_01.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_01-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bf_01" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bf_01" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bf_01" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_01-sr/Bf_01_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_01.log not found.

Select jobs to execute...

[Thu Nov 23 11:47:46 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_31-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Ecoli_31.log
    jobid: 704
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
    wildcards: sample=Ecoli_31
    resources: tmpdir=/local/nala0006/2279931

cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/phynteny/phynteny.gbk': No such file or directory

        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_31-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Ecoli_31" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Ecoli_31" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Ecoli_31" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
        fi
        
[Thu Nov 23 11:47:46 2023]
Error in rule summarize_longread:
    jobid: 707
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_17-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Ecoli_17.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_17-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Ecoli_17" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Ecoli_17" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Ecoli_17" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_17-sr/Ecoli_17_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Ecoli_17.log not found.


[Thu Nov 23 11:47:46 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_14-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_14.log
    jobid: 732
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
    wildcards: sample=Bu_14
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_14-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bu_14" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bu_14" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bu_14" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
        fi
        

[Thu Nov 23 11:47:46 2023]
localrule summarize_longread:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_14-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_14.log
    jobid: 721
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
    wildcards: sample=Bf_14
    resources: tmpdir=/local/nala0006/2279931


        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_14-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bf_14" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bf_14" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bf_14" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
        fi
        
cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/phynteny/phynteny.gbk': No such file or directory
[Thu Nov 23 11:47:46 2023]
Error in rule summarize_longread:
    jobid: 704
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_31-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Ecoli_31.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_31-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_31-sr/Ecoli_31-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_31-sr/Ecoli_31_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Ecoli_31" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Ecoli_31" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Ecoli_31" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Ecoli_31-sr/Ecoli_31_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Ecoli_31.log not found.

cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/phynteny/phynteny.gbk': No such file or directory
[Thu Nov 23 11:47:46 2023]
Error in rule summarize_longread:
    jobid: 732
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_14-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_14.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_14-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bu_14" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bu_14" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bu_14" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bu_14-sr/Bu_14_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bu_14.log not found.

Select jobs to execute...
cp: cannot stat '../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/phynteny/phynteny.gbk': No such file or directory
[Thu Nov 23 11:47:46 2023]
Error in rule summarize_longread:
    jobid: 721
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_14-sr/flye.log
    output: ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
    log: ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_14.log (check log file(s) for error details)
    shell:
        
        #first checking if the assembly worked
        if tail -n 1 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bf_14-sr/flye.log | grep 'INFO: Final assembly:' ; then

            if [[ -f "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14-genome-candidates.csv" ]]; then
                line_count=$(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14-genome-candidates.csv")
                if [ "$line_count" -gt 1 ]; then
                    #copying  the final files over
                    if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_dnaapler_reoriented.fasta ]]; then
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_genome.fasta
                    else
                        cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14.fasta ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_genome.fasta
                    fi
                

                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/phynteny/phynteny.gbk ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14.gbk
                    cp -r ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_pharokka_plot.png ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_pharokka_plot.png

                    echo "Sample: $(sed -n '2p' ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14-genome-candidates.csv | cut -d ',' -f 2)" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    
                    line_count=$(wc -l < ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14-genome-candidates.csv)

                    if [ "$line_count" -gt 2 ]; then
                        echo "Genome is incomplete or contaminated, includes mutliple contigs" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    else
                        echo "Length: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14-genome-candidates.csv | cut -d ',' -f 13)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                        echo "Coding density: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_length_gc_cds_density.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                        echo "Circular: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14-genome-candidates.csv | cut -d ',' -f 14)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                        echo "Completeness: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14-genome-candidates.csv | cut -d ',' -f 21)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                        echo "Contamination: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_14-sr/Bf_14-genome-candidates.csv | cut -d ',' -f 23)" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                        echo "Accession: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_top_hits_mash_inphared.tsv | cut -f 2 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                        echo "Taxa mash hits: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_top_hits_mash_inphared.tsv | cut -f 5 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                        echo "Taxa_Name: $(tail -n +2 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_top_hits_mash_inphared.tsv | cut -f 6 )" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    fi

                    if grep -q "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/phynteny/phynteny.gbk; then
                        echo "Integrase found, below are the gene names found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
			grep "integra" ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/phynteny/phynteny.gbk >>../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    else
                        echo "No integrase" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/top_hits_card.tsv") -eq 1 ]]; then
                        echo "No AMR genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    else
                        echo "AMR genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/top_hits_vfdb.tsv") -eq 1 ]]; then
                        echo "No virulence factor genes" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    else
                        echo "Virulence factor genes found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    fi

                    if [[ $(wc -l < "../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_14-sr/Bf_14_minced_spacers.txt") -gt 2 ]]; then
                        echo "CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    else
                        echo "No CRISPR spacers found" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    fi
                else
                    #this is if the assembly is too fragmented
                    echo "Sample: Bf_14" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                    echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                fi
            
            else
                #this is if the assembly is too fragmented
                echo "Sample: Bf_14" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
                echo "Assembly likely too fragmented or none of the contigs were assigned viral" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
            fi
        
        else
            #this is if the assembly failed then
            echo "Sample: Bf_14" > ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
            echo "Failed during assembly" >> ../nanopore/nanoporeSDSU.spae.out/RESULTS/Bf_14-sr/Bf_14_summary.txt
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/final_summary.Bf_14.log not found.


[Thu Nov 23 11:47:46 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_17.log
    jobid: 529
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_pharokka_plot.png
    wildcards: sample=Ecoli_17
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_17                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_17.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17_genome.fasta -n Ecoli_17_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr -p Ecoli_17 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
2023-11-23 11:47:58.647 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:47:58.647 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:47:58.647 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07_genome.fasta', plot_name='Bu_07_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr', gff='', genbank='', prefix='Bu_07', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:47:58.647 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:47:58.647 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:47:58.647 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:47:58.648 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:47:58.648 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:47:58.648 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:47:58.648 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:47:58.648 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:47:58.652 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07_genome.fasta.
2023-11-23 11:47:58.652 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07_genome.fasta is in FASTA format.
2023-11-23 11:47:58.652 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07_genome.fasta for duplicate FASTA headers.
2023-11-23 11:47:58.653 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07_genome.fasta are unique.
2023-11-23 11:47:58.653 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:47:58.653 | INFO     | __main__:<module>:291 - Plotting the phage.
2023-11-23 11:48:01.829 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:48:01.829 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:48:01.829 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12_genome.fasta', plot_name='Bf_12_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr', gff='', genbank='', prefix='Bf_12', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:48:01.829 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:48:01.829 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:48:01.829 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:48:01.830 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:48:01.830 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:48:01.830 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:48:01.830 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:48:01.830 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:48:01.834 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12_genome.fasta.
2023-11-23 11:48:01.834 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12_genome.fasta is in FASTA format.
2023-11-23 11:48:01.834 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12_genome.fasta for duplicate FASTA headers.
2023-11-23 11:48:01.835 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12_genome.fasta are unique.
2023-11-23 11:48:01.835 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:48:01.835 | INFO     | __main__:<module>:291 - Plotting the phage.
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:48:02 2023]
Error in rule pharokka_flye:
    jobid: 551
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_07.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bu_07                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_07.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07_genome.fasta -n Bu_07_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr -p Bu_07 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_07.log:
================================================================================
2023-11-23 11:43:53.207 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr as -f or --force was specified.
2023-11-23 11:43:53.219 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:43:53.219 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bu_07', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:43:53.219 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:43:53.219 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:43:53.219 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:43:53.220 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:43:53.220 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:43:53.352 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:43:53.353 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:43:53.360 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:43:53.361 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:43:53.445 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:43:53.445 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:43:53.510 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:43:53.510 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:43:53.516 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:43:53.516 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:43:53.528 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:43:53.528 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:43:54.024 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:43:54.025 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:43:54.025 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:43:54.025 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:43:54.025 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:43:54.025 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:43:54.034 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07_genome.fasta.
2023-11-23 11:43:54.035 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07_genome.fasta is in FASTA format.
2023-11-23 11:43:54.035 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07_genome.fasta for duplicate FASTA headers.
2023-11-23 11:43:54.035 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07_genome.fasta are unique.
2023-11-23 11:43:54.035 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:43:54.035 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:43:54.036 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:43:54.040 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07_genome.fasta ...
2023-11-23 11:43:55.464 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_07-sr/Bu_07_genome.fasta
2023-11-23 11:43:55.472 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:43:55.475 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:44:02.268 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:44:02.273 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:44:09.064 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:44:09.096 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:44:09.100 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:44:09.276 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:44:09.279 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:44:09.282 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_minced.gff ...
2023-11-23 11:44:09.390 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_minced.gff
2023-11-23 11:44:09.393 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:44:09.396 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:44:09.415 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:44:09.418 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:44:09.418 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:44:09.422 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/target_dir/target_seqs ...
2023-11-23 11:44:10.124 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/target_dir/target_seqs
2023-11-23 11:44:10.129 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:46:37.598 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:46:37.604 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:46:37.743 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:46:37.764 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:46:37.769 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:46:38.576 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/CARD_target_dir/target_seqs
2023-11-23 11:46:38.581 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:47:03.137 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:47:03.143 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:47:03.222 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:47:03.241 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:47:03.245 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:47:03.954 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/VFDB_target_dir/target_seqs
2023-11-23 11:47:03.959 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:47:40.309 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:47:40.315 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:47:40.407 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:47:40.426 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:47:55.513 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:47:55.529 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:47:55.529 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:47:55.752 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:47:55.761 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:47:55.762 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:47:55.770 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:47:55.914 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:47:55.964 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:47:55.969 | INFO     | post_processing:extract_terl:1969 - More than one CDS annotated as terminase large subunit found. 
Saving all.
2023-11-23 11:47:55.978 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:47:55.982 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/input_mash_sketch.msh -i ...
2023-11-23 11:47:56.015 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/input_mash_sketch.msh -i
2023-11-23 11:47:56.020 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:47:56.585 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:47:56.866 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:47:56.867 | INFO     | __main__:main:481 - Elapsed time: 243.65 seconds
2023-11-23 11:47:56.867 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:47:56.867 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:47:56.867 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:47:56.867 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:47:56.867 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:47:56.867 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_07-sr/Bu_07_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:48:02 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_09.log
    jobid: 525
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/top_hits_vfdb.tsv
    wildcards: sample=Bu_09
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bu_09                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_09.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09_genome.fasta -n Bu_09_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr -p Bu_09 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:48:06 2023]
Error in rule pharokka_flye:
    jobid: 589
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_12.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_12                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_12.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12_genome.fasta -n Bf_12_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr -p Bf_12 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_12.log:
================================================================================
2023-11-23 11:43:53.960 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr as -f or --force was specified.
2023-11-23 11:43:53.974 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:43:53.974 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bf_12', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:43:53.974 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:43:53.975 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:43:53.975 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:43:53.975 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:43:53.975 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:43:54.106 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:43:54.107 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:43:54.116 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:43:54.116 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:43:54.197 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:43:54.197 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:43:54.264 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:43:54.264 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:43:54.269 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:43:54.270 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:43:54.280 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:43:54.280 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:43:54.753 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:43:54.753 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:43:54.753 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:43:54.754 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:43:54.754 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:43:54.754 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:43:54.760 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12_genome.fasta.
2023-11-23 11:43:54.760 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12_genome.fasta is in FASTA format.
2023-11-23 11:43:54.760 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12_genome.fasta for duplicate FASTA headers.
2023-11-23 11:43:54.761 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12_genome.fasta are unique.
2023-11-23 11:43:54.761 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:43:54.761 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:43:54.761 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:43:54.766 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12_genome.fasta ...
2023-11-23 11:43:56.151 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_12-sr/Bf_12_genome.fasta
2023-11-23 11:43:56.158 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:43:56.162 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:44:02.961 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:44:02.966 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:44:09.786 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:44:09.816 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:44:09.820 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:44:09.991 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:44:09.993 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:44:09.998 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_minced.gff ...
2023-11-23 11:44:10.106 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_minced.gff
2023-11-23 11:44:10.109 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:44:10.114 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:44:10.133 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:44:10.135 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:44:10.135 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:44:10.140 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/target_dir/target_seqs ...
2023-11-23 11:44:10.897 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/target_dir/target_seqs
2023-11-23 11:44:10.902 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:46:42.419 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:46:42.430 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:46:42.567 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:46:42.586 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:46:42.592 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:46:43.325 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/CARD_target_dir/target_seqs
2023-11-23 11:46:43.331 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:47:06.862 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:47:06.868 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:47:06.948 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:47:06.965 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:47:06.970 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:47:07.638 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/VFDB_target_dir/target_seqs
2023-11-23 11:47:07.643 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:47:43.793 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:47:43.799 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:47:43.882 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:47:43.901 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:47:58.900 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:47:58.915 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:47:58.915 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:47:59.128 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:47:59.136 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:47:59.137 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:47:59.145 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:47:59.282 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:47:59.330 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:47:59.345 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:47:59.349 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/input_mash_sketch.msh -i ...
2023-11-23 11:47:59.369 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/input_mash_sketch.msh -i
2023-11-23 11:47:59.375 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:47:59.942 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:48:00.204 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:48:00.205 | INFO     | __main__:main:481 - Elapsed time: 246.23 seconds
2023-11-23 11:48:00.205 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:48:00.205 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:48:00.205 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:48:00.205 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:48:00.205 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:48:00.205 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_12-sr/Bf_12_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:48:06 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_30.log
    jobid: 629
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_dnaapler_reoriented.fasta
    wildcards: sample=Bu_30
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bu_30                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_30.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30_genome.fasta -n Bu_30_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr -p Bu_30 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
2023-11-23 11:48:17.508 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:48:17.509 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:48:17.509 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10_genome.fasta', plot_name='Bf_10_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr', gff='', genbank='', prefix='Bf_10', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:48:17.509 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:48:17.509 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:48:17.509 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:48:17.509 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:48:17.509 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:48:17.509 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:48:17.509 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:48:17.509 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:48:17.513 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10_genome.fasta.
2023-11-23 11:48:17.513 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10_genome.fasta is in FASTA format.
2023-11-23 11:48:17.514 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10_genome.fasta for duplicate FASTA headers.
2023-11-23 11:48:17.514 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10_genome.fasta are unique.
2023-11-23 11:48:17.514 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:48:17.514 | INFO     | __main__:<module>:291 - Plotting the phage.
2023-11-23 11:48:18.301 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:48:18.301 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:48:18.301 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01_genome.fasta', plot_name='Bf_01_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr', gff='', genbank='', prefix='Bf_01', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:48:18.301 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:48:18.301 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:48:18.302 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:48:18.302 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:48:18.302 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:48:18.302 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:48:18.302 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:48:18.302 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:48:18.306 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01_genome.fasta.
2023-11-23 11:48:18.306 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01_genome.fasta is in FASTA format.
2023-11-23 11:48:18.306 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01_genome.fasta for duplicate FASTA headers.
2023-11-23 11:48:18.307 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01_genome.fasta are unique.
2023-11-23 11:48:18.307 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:48:18.307 | INFO     | __main__:<module>:291 - Plotting the phage.
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:48:21 2023]
Error in rule pharokka_flye:
    jobid: 595
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_10.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_10                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_10.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10_genome.fasta -n Bf_10_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr -p Bf_10 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_10.log:
================================================================================
2023-11-23 11:44:01.643 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr as -f or --force was specified.
2023-11-23 11:44:01.655 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:44:01.655 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bf_10', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:44:01.655 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:44:01.656 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:44:01.656 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:44:01.656 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:44:01.656 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:44:01.796 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:44:01.797 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:44:01.805 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:44:01.805 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:44:01.889 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:44:01.890 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:44:01.960 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:44:01.960 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:44:01.975 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:44:01.975 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:44:01.986 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:44:01.987 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:44:02.483 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:44:02.483 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:44:02.483 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:44:02.483 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:44:02.484 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:44:02.484 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:44:02.489 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10_genome.fasta.
2023-11-23 11:44:02.490 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10_genome.fasta is in FASTA format.
2023-11-23 11:44:02.490 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10_genome.fasta for duplicate FASTA headers.
2023-11-23 11:44:02.490 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10_genome.fasta are unique.
2023-11-23 11:44:02.491 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:44:02.491 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:44:02.491 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:44:02.496 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10_genome.fasta ...
2023-11-23 11:44:04.066 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_10-sr/Bf_10_genome.fasta
2023-11-23 11:44:04.073 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:44:04.077 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:44:10.977 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:44:10.983 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:44:18.094 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:44:18.124 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:44:18.127 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:44:18.313 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:44:18.316 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:44:18.319 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_minced.gff ...
2023-11-23 11:44:18.430 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_minced.gff
2023-11-23 11:44:18.432 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:44:18.436 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:44:18.456 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:44:18.459 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:44:18.459 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:44:18.464 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/target_dir/target_seqs ...
2023-11-23 11:44:19.288 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/target_dir/target_seqs
2023-11-23 11:44:19.293 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:46:57.964 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:46:57.970 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:46:58.137 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:46:58.156 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:46:58.162 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:46:58.883 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/CARD_target_dir/target_seqs
2023-11-23 11:46:58.889 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:47:23.814 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:47:23.820 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:47:23.899 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:47:23.916 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:47:23.921 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:47:24.593 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/VFDB_target_dir/target_seqs
2023-11-23 11:47:24.598 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:47:59.903 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:47:59.908 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:47:59.996 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:48:00.014 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:48:14.658 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:48:14.672 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:48:14.672 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:48:14.849 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:48:14.856 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:48:14.857 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:48:14.864 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:48:14.990 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:48:15.036 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:48:15.050 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:48:15.054 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/input_mash_sketch.msh -i ...
2023-11-23 11:48:15.073 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/input_mash_sketch.msh -i
2023-11-23 11:48:15.078 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:48:15.640 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:48:15.894 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:48:15.895 | INFO     | __main__:main:481 - Elapsed time: 254.24 seconds
2023-11-23 11:48:15.895 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:48:15.895 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:48:15.895 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:48:15.895 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:48:15.895 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:48:15.895 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_10-sr/Bf_10_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:48:21 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_24.log
    jobid: 547
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/top_hits_card.tsv
    wildcards: sample=Bu_24
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bu_24                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_24.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24_genome.fasta -n Bu_24_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr -p Bu_24 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:48:22 2023]
Error in rule pharokka_flye:
    jobid: 513
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_01.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_01                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_01.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01_genome.fasta -n Bf_01_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr -p Bf_01 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_01.log:
================================================================================
2023-11-23 11:44:01.304 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr as -f or --force was specified.
2023-11-23 11:44:01.315 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:44:01.316 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bf_01', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:44:01.316 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:44:01.316 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:44:01.316 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:44:01.316 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:44:01.316 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:44:01.448 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:44:01.448 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:44:01.459 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:44:01.460 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:44:01.543 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:44:01.543 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:44:01.613 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:44:01.613 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:44:01.618 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:44:01.619 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:44:01.630 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:44:01.630 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:44:02.160 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:44:02.160 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:44:02.160 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:44:02.160 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:44:02.160 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:44:02.161 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:44:02.167 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01_genome.fasta.
2023-11-23 11:44:02.168 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01_genome.fasta is in FASTA format.
2023-11-23 11:44:02.168 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01_genome.fasta for duplicate FASTA headers.
2023-11-23 11:44:02.168 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01_genome.fasta are unique.
2023-11-23 11:44:02.168 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:44:02.169 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:44:02.169 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:44:02.174 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01_genome.fasta ...
2023-11-23 11:44:03.660 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_01-sr/Bf_01_genome.fasta
2023-11-23 11:44:03.668 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:44:03.671 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:44:10.813 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:44:10.820 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:44:17.982 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:44:18.013 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:44:18.017 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:44:18.194 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:44:18.196 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:44:18.200 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_minced.gff ...
2023-11-23 11:44:18.320 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_minced.gff
2023-11-23 11:44:18.323 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:44:18.326 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:44:18.345 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:44:18.347 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:44:18.347 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:44:18.352 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/target_dir/target_seqs ...
2023-11-23 11:44:19.168 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/target_dir/target_seqs
2023-11-23 11:44:19.174 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:46:55.247 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:46:55.254 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:46:55.410 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:46:55.436 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:46:55.441 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:46:56.141 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/CARD_target_dir/target_seqs
2023-11-23 11:46:56.147 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:47:20.575 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:47:20.581 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:47:20.682 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:47:20.702 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:47:20.708 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:47:21.405 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/VFDB_target_dir/target_seqs
2023-11-23 11:47:21.411 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:48:00.687 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:48:00.693 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:48:00.775 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:48:00.791 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:48:15.404 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:48:15.418 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:48:15.418 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:48:15.606 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:48:15.614 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:48:15.614 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:48:15.621 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:48:15.744 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:48:15.789 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:48:15.793 | INFO     | post_processing:extract_terl:1969 - More than one CDS annotated as terminase large subunit found. 
Saving all.
2023-11-23 11:48:15.803 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:48:15.807 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/input_mash_sketch.msh -i ...
2023-11-23 11:48:15.827 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/input_mash_sketch.msh -i
2023-11-23 11:48:15.833 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:48:16.392 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:48:16.653 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:48:16.653 | INFO     | __main__:main:481 - Elapsed time: 255.34 seconds
2023-11-23 11:48:16.653 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:48:16.653 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:48:16.653 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:48:16.653 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:48:16.653 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:48:16.654 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_01-sr/Bf_01_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:48:22 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_20.log
    jobid: 611
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_pharokka_plot.png
    wildcards: sample=Bu_20
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bu_20                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_20.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20_genome.fasta -n Bu_20_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr -p Bu_20 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
2023-11-23 11:48:31.866 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:48:31.866 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:48:31.867 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03_genome.fasta', plot_name='Bf_03_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr', gff='', genbank='', prefix='Bf_03', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:48:31.867 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:48:31.867 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:48:31.867 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:48:31.867 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:48:31.867 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:48:31.867 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:48:31.867 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:48:31.867 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:48:31.871 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03_genome.fasta.
2023-11-23 11:48:31.871 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03_genome.fasta is in FASTA format.
2023-11-23 11:48:31.871 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03_genome.fasta for duplicate FASTA headers.
2023-11-23 11:48:31.872 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03_genome.fasta are unique.
2023-11-23 11:48:31.872 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:48:31.872 | INFO     | __main__:<module>:291 - Plotting the phage.
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:48:36 2023]
Error in rule pharokka_flye:
    jobid: 567
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_03.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_03                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_03.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03_genome.fasta -n Bf_03_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr -p Bf_03 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_03.log:
================================================================================
2023-11-23 11:44:12.949 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr as -f or --force was specified.
2023-11-23 11:44:13.009 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:44:13.009 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bf_03', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:44:13.009 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:44:13.009 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:44:13.009 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:44:13.010 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:44:13.011 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:44:13.162 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:44:13.162 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:44:13.171 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:44:13.171 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:44:13.259 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:44:13.259 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:44:13.334 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:44:13.334 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:44:13.340 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:44:13.340 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:44:13.352 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:44:13.352 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:44:13.899 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:44:13.899 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:44:13.899 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:44:13.899 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:44:13.899 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:44:13.899 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:44:13.906 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03_genome.fasta.
2023-11-23 11:44:13.906 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03_genome.fasta is in FASTA format.
2023-11-23 11:44:13.906 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03_genome.fasta for duplicate FASTA headers.
2023-11-23 11:44:13.907 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03_genome.fasta are unique.
2023-11-23 11:44:13.907 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:44:13.907 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:44:13.907 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:44:13.912 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03_genome.fasta ...
2023-11-23 11:44:15.548 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_03-sr/Bf_03_genome.fasta
2023-11-23 11:44:15.556 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:44:15.560 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:44:22.983 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:44:22.989 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:44:30.457 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:44:30.486 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:44:30.490 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:44:30.688 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:44:30.691 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:44:30.694 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_minced.gff ...
2023-11-23 11:44:30.825 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_minced.gff
2023-11-23 11:44:30.828 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:44:30.831 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:44:30.851 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:44:30.853 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:44:30.854 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:44:30.858 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/target_dir/target_seqs ...
2023-11-23 11:44:31.509 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/target_dir/target_seqs
2023-11-23 11:44:31.515 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:47:11.851 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:47:11.857 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:47:11.989 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:47:12.008 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:47:12.014 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:47:12.703 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/CARD_target_dir/target_seqs
2023-11-23 11:47:12.709 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:47:36.744 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:47:36.750 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:47:36.830 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:47:36.847 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:47:36.851 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:47:37.529 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/VFDB_target_dir/target_seqs
2023-11-23 11:47:37.535 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:48:14.484 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:48:14.490 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:48:14.577 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:48:14.595 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:48:29.017 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:48:29.030 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:48:29.030 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:48:29.217 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:48:29.225 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:48:29.226 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:48:29.242 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:48:29.361 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:48:29.406 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:48:29.407 | INFO     | post_processing:extract_terl:1969 - More than one CDS annotated as terminase large subunit found. 
Saving all.
2023-11-23 11:48:29.416 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:48:29.420 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/input_mash_sketch.msh -i ...
2023-11-23 11:48:29.439 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/input_mash_sketch.msh -i
2023-11-23 11:48:29.444 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:48:29.989 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:48:30.253 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:48:30.253 | INFO     | __main__:main:481 - Elapsed time: 257.25 seconds
2023-11-23 11:48:30.253 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:48:30.253 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:48:30.253 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:48:30.253 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:48:30.253 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:48:30.253 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_03-sr/Bf_03_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:48:36 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_18.log
    jobid: 623
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_top_hits_mash_inphared.tsv
    wildcards: sample=Bu_18
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bu_18                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_18.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18_genome.fasta -n Bu_18_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr -p Bu_18 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
2023-11-23 11:51:24.070 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:51:24.071 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:51:24.071 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11_genome.fasta', plot_name='CS-2_11_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr', gff='', genbank='', prefix='CS-2_11', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:51:24.071 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:51:24.071 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:51:24.071 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:51:24.071 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:51:24.071 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:51:24.072 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:51:24.072 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:51:24.072 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:51:24.077 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11_genome.fasta.
2023-11-23 11:51:24.077 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11_genome.fasta is in FASTA format.
2023-11-23 11:51:24.077 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11_genome.fasta for duplicate FASTA headers.
2023-11-23 11:51:24.078 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11_genome.fasta are unique.
2023-11-23 11:51:24.078 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:51:24.078 | INFO     | __main__:<module>:291 - Plotting the phage.
2023-11-23 11:51:25.195 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:51:25.195 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:51:25.195 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12_genome.fasta', plot_name='CS-2_12_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr', gff='', genbank='', prefix='CS-2_12', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:51:25.196 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:51:25.196 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:51:25.196 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:51:25.196 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:51:25.196 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:51:25.196 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:51:25.196 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:51:25.196 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:51:25.200 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12_genome.fasta.
2023-11-23 11:51:25.201 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12_genome.fasta is in FASTA format.
2023-11-23 11:51:25.201 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12_genome.fasta for duplicate FASTA headers.
2023-11-23 11:51:25.201 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12_genome.fasta are unique.
2023-11-23 11:51:25.201 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:51:25.201 | INFO     | __main__:<module>:291 - Plotting the phage.
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:51:28 2023]
Error in rule pharokka_flye:
    jobid: 553
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-2_11.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p CS-2_11                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-2_11.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11_genome.fasta -n CS-2_11_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr -p CS-2_11 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-2_11.log:
================================================================================
2023-11-23 11:47:26.099 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr as -f or --force was specified.
2023-11-23 11:47:26.113 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:47:26.113 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='CS-2_11', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:47:26.113 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:47:26.113 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:47:26.113 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:47:26.115 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:47:26.115 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:47:26.277 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:47:26.277 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:47:26.286 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:47:26.286 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:47:26.378 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:47:26.378 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:47:26.458 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:47:26.458 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:47:26.465 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:47:26.465 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:47:26.477 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:47:26.477 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:47:27.083 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:47:27.083 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:47:27.083 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:47:27.083 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:47:27.083 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:47:27.083 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:47:27.090 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11_genome.fasta.
2023-11-23 11:47:27.090 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11_genome.fasta is in FASTA format.
2023-11-23 11:47:27.090 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11_genome.fasta for duplicate FASTA headers.
2023-11-23 11:47:27.091 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11_genome.fasta are unique.
2023-11-23 11:47:27.091 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:47:27.091 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:47:27.091 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:47:27.096 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11_genome.fasta ...
2023-11-23 11:47:28.800 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_11-sr/CS-2_11_genome.fasta
2023-11-23 11:47:28.809 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:47:28.812 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:47:37.084 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:47:37.091 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:47:45.167 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:47:45.194 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:47:45.198 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:47:45.385 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:47:45.388 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:47:45.392 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_minced.gff ...
2023-11-23 11:47:45.501 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_minced.gff
2023-11-23 11:47:45.504 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:47:45.507 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:47:45.529 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:47:45.532 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:47:45.532 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:47:45.537 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/target_dir/target_seqs ...
2023-11-23 11:47:46.344 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/target_dir/target_seqs
2023-11-23 11:47:46.351 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:50:03.225 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:50:03.231 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:50:03.386 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:50:03.406 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:50:03.412 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:50:04.154 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CARD_target_dir/target_seqs
2023-11-23 11:50:04.160 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:50:26.624 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:50:26.631 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:50:26.731 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:50:26.749 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:50:26.753 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:50:27.466 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/VFDB_target_dir/target_seqs
2023-11-23 11:50:27.473 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:51:05.989 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:51:05.995 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:51:06.097 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:51:06.116 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:51:20.820 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:51:20.833 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:51:20.834 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:51:21.063 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:51:21.071 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:51:21.072 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:51:21.080 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:51:21.201 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:51:21.247 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:51:21.256 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:51:21.260 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/input_mash_sketch.msh -i ...
2023-11-23 11:51:21.281 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/input_mash_sketch.msh -i
2023-11-23 11:51:21.287 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:51:21.869 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:51:22.177 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:51:22.177 | INFO     | __main__:main:481 - Elapsed time: 236.07 seconds
2023-11-23 11:51:22.177 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:51:22.177 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:51:22.178 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:51:22.178 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:51:22.178 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:51:22.178 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_11-sr/CS-2_11_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:51:28 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_14.log
    jobid: 579
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_length_gc_cds_density.tsv
    wildcards: sample=Bu_14
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bu_14                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_14.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14_genome.fasta -n Bu_14_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr -p Bu_14 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:51:29 2023]
Error in rule pharokka_flye:
    jobid: 517
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-2_12.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p CS-2_12                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-2_12.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12_genome.fasta -n CS-2_12_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr -p CS-2_12 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-2_12.log:
================================================================================
2023-11-23 11:47:28.833 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr as -f or --force was specified.
2023-11-23 11:47:28.846 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:47:28.847 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='CS-2_12', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:47:28.847 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:47:28.847 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:47:28.847 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:47:28.847 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:47:28.847 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:47:28.991 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:47:28.992 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:47:29.000 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:47:29.001 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:47:29.085 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:47:29.086 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:47:29.164 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:47:29.164 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:47:29.170 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:47:29.170 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:47:29.181 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:47:29.182 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:47:29.733 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:47:29.734 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:47:29.734 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:47:29.734 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:47:29.734 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:47:29.734 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:47:29.740 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12_genome.fasta.
2023-11-23 11:47:29.741 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12_genome.fasta is in FASTA format.
2023-11-23 11:47:29.741 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12_genome.fasta for duplicate FASTA headers.
2023-11-23 11:47:29.741 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12_genome.fasta are unique.
2023-11-23 11:47:29.741 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:47:29.742 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:47:29.742 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:47:29.748 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12_genome.fasta ...
2023-11-23 11:47:31.478 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_12-sr/CS-2_12_genome.fasta
2023-11-23 11:47:31.486 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:47:31.490 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:47:38.681 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:47:38.687 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:47:45.768 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:47:45.799 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:47:45.804 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:47:45.982 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:47:45.985 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:47:45.990 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_minced.gff ...
2023-11-23 11:47:46.096 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_minced.gff
2023-11-23 11:47:46.100 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:47:46.104 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:47:46.130 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:47:46.132 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:47:46.132 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:47:46.144 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/target_dir/target_seqs ...
2023-11-23 11:47:47.047 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/target_dir/target_seqs
2023-11-23 11:47:47.052 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:50:03.929 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:50:03.935 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:50:04.070 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:50:04.090 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:50:04.096 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:50:04.835 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CARD_target_dir/target_seqs
2023-11-23 11:50:04.841 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:50:27.253 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:50:27.260 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:50:27.359 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:50:27.381 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:50:27.387 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:50:28.242 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/VFDB_target_dir/target_seqs
2023-11-23 11:50:28.248 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:51:06.872 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:51:06.878 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:51:06.968 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:51:06.986 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:51:22.039 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:51:22.055 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:51:22.055 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:51:22.275 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:51:22.283 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:51:22.284 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:51:22.292 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:51:22.431 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:51:22.480 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:51:22.484 | INFO     | post_processing:extract_terl:1969 - More than one CDS annotated as terminase large subunit found. 
Saving all.
2023-11-23 11:51:22.497 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:51:22.501 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/input_mash_sketch.msh -i ...
2023-11-23 11:51:22.522 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/input_mash_sketch.msh -i
2023-11-23 11:51:22.528 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:51:23.122 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:51:23.421 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:51:23.422 | INFO     | __main__:main:481 - Elapsed time: 234.58 seconds
2023-11-23 11:51:23.422 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:51:23.422 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:51:23.422 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:51:23.422 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:51:23.422 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:51:23.422 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_12-sr/CS-2_12_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:51:29 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bb_15.log
    jobid: 597
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_top_hits_mash_inphared.tsv
    wildcards: sample=Bb_15
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bb_15                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bb_15.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta -n Bb_15_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr -p Bb_15 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
2023-11-23 11:51:45.000 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:51:45.001 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:51:45.001 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17_genome.fasta', plot_name='Ecoli_17_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr', gff='', genbank='', prefix='Ecoli_17', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:51:45.001 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:51:45.001 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:51:45.001 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:51:45.001 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:51:45.002 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:51:45.002 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:51:45.002 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:51:45.002 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:51:45.006 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17_genome.fasta.
2023-11-23 11:51:45.007 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17_genome.fasta is in FASTA format.
2023-11-23 11:51:45.007 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17_genome.fasta for duplicate FASTA headers.
2023-11-23 11:51:45.007 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17_genome.fasta are unique.
2023-11-23 11:51:45.007 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:51:45.007 | INFO     | __main__:<module>:291 - Plotting the phage.
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:51:49 2023]
Error in rule pharokka_flye:
    jobid: 529
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_17.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_17                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_17.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17_genome.fasta -n Ecoli_17_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr -p Ecoli_17 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_17.log:
================================================================================
2023-11-23 11:47:47.887 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr as -f or --force was specified.
2023-11-23 11:47:47.900 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:47:47.900 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Ecoli_17', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:47:47.900 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:47:47.901 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:47:47.901 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:47:47.901 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:47:47.901 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:47:48.051 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:47:48.051 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:47:48.060 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:47:48.060 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:47:48.147 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:47:48.147 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:47:48.223 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:47:48.223 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:47:48.230 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:47:48.230 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:47:48.242 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:47:48.243 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:47:48.831 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:47:48.831 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:47:48.831 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:47:48.831 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:47:48.831 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:47:48.831 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:47:48.838 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17_genome.fasta.
2023-11-23 11:47:48.838 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17_genome.fasta is in FASTA format.
2023-11-23 11:47:48.838 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17_genome.fasta for duplicate FASTA headers.
2023-11-23 11:47:48.839 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17_genome.fasta are unique.
2023-11-23 11:47:48.839 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:47:48.839 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:47:48.839 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:47:48.845 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17_genome.fasta ...
2023-11-23 11:47:50.322 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_17-sr/Ecoli_17_genome.fasta
2023-11-23 11:47:50.331 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:47:50.335 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:47:58.408 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:47:58.414 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:06.443 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:06.468 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:48:06.471 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:06.651 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:06.653 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:48:06.657 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_minced.gff ...
2023-11-23 11:48:06.766 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_minced.gff
2023-11-23 11:48:06.768 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:48:06.771 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:06.791 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:06.793 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:48:06.794 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:48:06.798 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/target_dir/target_seqs ...
2023-11-23 11:48:07.435 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/target_dir/target_seqs
2023-11-23 11:48:07.440 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:50:25.791 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:50:25.797 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:50:25.977 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:50:25.997 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:50:26.002 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:50:26.708 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/CARD_target_dir/target_seqs
2023-11-23 11:50:26.714 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:50:49.291 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:50:49.298 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:50:49.389 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:50:49.411 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:50:49.418 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:50:50.272 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/VFDB_target_dir/target_seqs
2023-11-23 11:50:50.278 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:51:27.728 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:51:27.734 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:51:27.833 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:51:27.850 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:51:41.760 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:51:41.771 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:51:41.772 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:51:41.982 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:51:41.990 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:51:41.991 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:51:42.004 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:51:42.112 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:51:42.153 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:51:42.154 | INFO     | post_processing:extract_terl:1969 - More than one CDS annotated as terminase large subunit found. 
Saving all.
2023-11-23 11:51:42.166 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:51:42.169 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/input_mash_sketch.msh -i ...
2023-11-23 11:51:42.188 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/input_mash_sketch.msh -i
2023-11-23 11:51:42.194 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:51:42.809 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:51:43.119 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:51:43.119 | INFO     | __main__:main:481 - Elapsed time: 235.22 seconds
2023-11-23 11:51:43.119 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:51:43.119 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:51:43.119 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:51:43.120 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:51:43.120 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:51:43.120 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_17-sr/Ecoli_17_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:51:49 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_03-sr/Bu_03_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_03.log
    jobid: 561
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03_length_gc_cds_density.tsv
    wildcards: sample=Bu_03
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_03-sr/Bu_03_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_03-sr/Bu_03_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bu_03                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_03.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_03-sr/Bu_03_genome.fasta -n Bu_03_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr -p Bu_03 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
[Thu Nov 23 11:51:52 2023]
Error in rule pharokka_flye:
    jobid: 561
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_03-sr/Bu_03_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_03.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_03-sr/Bu_03_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_03-sr/Bu_03_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bu_03                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_03.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_03-sr/Bu_03_genome.fasta -n Bu_03_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr -p Bu_03 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr/Bu_03_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_03.log:
================================================================================
2023-11-23 11:51:51.304 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr as -f or --force was specified.
2023-11-23 11:51:51.318 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:51:51.318 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_03-sr/Bu_03_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_03-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bu_03', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:51:51.318 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:51:51.318 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:51:51.318 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:51:51.319 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:51:51.319 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:51:51.470 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:51:51.470 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:51:51.479 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:51:51.480 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:51:51.567 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:51:51.567 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:51:51.645 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:51:51.645 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:51:51.651 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:51:51.652 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:51:51.664 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:51:51.664 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:51:52.269 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:51:52.269 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:51:52.270 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:51:52.270 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:51:52.270 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:51:52.270 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:51:52.276 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_03-sr/Bu_03_genome.fasta.
2023-11-23 11:51:52.277 | ERROR    | input_commands:validate_fasta:222 - Error: Input file is not in the FASTA format.
================================================================================

Select jobs to execute...

[Thu Nov 23 11:51:52 2023]
rule checkv_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/assembly.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/checkv/quality_summary.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Ecoli_39.log
    jobid: 315
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/checkv_flye_nano.Ecoli_39.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/checkv/quality_summary.tsv
    wildcards: sample=Ecoli_39
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        export CHECKVDB=/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/checkv-db-v1.5
        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/assembly.fasta ]]
        then
            checkv end_to_end                ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/assembly.fasta                 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/checkv                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Ecoli_39.log
        fi
        
Activating conda environment: sphae/workflow/conda/a4d2d492cde88381b68d5529e4f01bae_
Waiting at most 5 seconds for missing files.
MissingOutputException in rule checkv_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.checkv.smk, line 38:
Job 315  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_39-sr/checkv/quality_summary.tsv
Select jobs to execute...

[Thu Nov 23 11:51:57 2023]
rule checkv_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/assembly.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/checkv/quality_summary.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Eu_6.log
    jobid: 301
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/checkv_flye_nano.Eu_6.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/checkv/quality_summary.tsv
    wildcards: sample=Eu_6
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        export CHECKVDB=/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/checkv-db-v1.5
        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/assembly.fasta ]]
        then
            checkv end_to_end                ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/assembly.fasta                 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/checkv                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Eu_6.log
        fi
        
Activating conda environment: sphae/workflow/conda/a4d2d492cde88381b68d5529e4f01bae_
Waiting at most 5 seconds for missing files.
MissingOutputException in rule checkv_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.checkv.smk, line 38:
Job 301  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Eu_6-sr/checkv/quality_summary.tsv
Select jobs to execute...

[Thu Nov 23 11:52:03 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Eu_4-sr/Eu_4_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Eu_4.log
    jobid: 519
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4_pharokka_plot.png
    wildcards: sample=Eu_4
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Eu_4-sr/Eu_4_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Eu_4-sr/Eu_4_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Eu_4                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Eu_4.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Eu_4-sr/Eu_4_genome.fasta -n Eu_4_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr -p Eu_4 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
[Thu Nov 23 11:52:05 2023]
Error in rule pharokka_flye:
    jobid: 519
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Eu_4-sr/Eu_4_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Eu_4.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Eu_4-sr/Eu_4_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Eu_4-sr/Eu_4_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Eu_4                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Eu_4.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Eu_4-sr/Eu_4_genome.fasta -n Eu_4_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr -p Eu_4 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr/Eu_4_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Eu_4.log:
================================================================================
2023-11-23 11:52:04.949 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr as -f or --force was specified.
2023-11-23 11:52:04.961 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:52:04.961 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Eu_4-sr/Eu_4_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_4-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Eu_4', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:52:04.961 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:52:04.961 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:52:04.961 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:52:04.962 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:52:04.962 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:52:05.104 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:52:05.105 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:52:05.113 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:52:05.114 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:52:05.199 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:52:05.200 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:52:05.271 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:52:05.271 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:52:05.277 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:52:05.278 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:52:05.289 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:52:05.290 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:52:05.821 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:52:05.821 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:52:05.821 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:52:05.822 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:52:05.822 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:52:05.822 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:52:05.829 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Eu_4-sr/Eu_4_genome.fasta.
2023-11-23 11:52:05.829 | ERROR    | input_commands:validate_fasta:222 - Error: Input file is not in the FASTA format.
================================================================================

Select jobs to execute...

[Thu Nov 23 11:52:05 2023]
rule checkv_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/assembly.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/checkv/quality_summary.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Bu_13.log
    jobid: 281
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/checkv_flye_nano.Bu_13.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/checkv/quality_summary.tsv
    wildcards: sample=Bu_13
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        export CHECKVDB=/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/checkv-db-v1.5
        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/assembly.fasta ]]
        then
            checkv end_to_end                ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/assembly.fasta                 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/checkv                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Bu_13.log
        fi
        
Activating conda environment: sphae/workflow/conda/a4d2d492cde88381b68d5529e4f01bae_
Waiting at most 5 seconds for missing files.
2023-11-23 11:52:06.911 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:52:06.912 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:52:06.912 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30_genome.fasta', plot_name='Bu_30_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr', gff='', genbank='', prefix='Bu_30', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:52:06.912 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:52:06.912 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:52:06.912 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:52:06.912 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:52:06.912 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:52:06.912 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:52:06.913 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:52:06.913 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:52:06.917 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30_genome.fasta.
2023-11-23 11:52:06.917 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30_genome.fasta is in FASTA format.
2023-11-23 11:52:06.917 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30_genome.fasta for duplicate FASTA headers.
2023-11-23 11:52:06.917 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30_genome.fasta are unique.
2023-11-23 11:52:06.918 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:52:06.918 | INFO     | __main__:<module>:291 - Plotting the phage.
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:52:10 2023]
Error in rule pharokka_flye:
    jobid: 629
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_30.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bu_30                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_30.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30_genome.fasta -n Bu_30_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr -p Bu_30 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_30.log:
================================================================================
2023-11-23 11:48:07.626 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr as -f or --force was specified.
2023-11-23 11:48:07.638 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:48:07.638 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bu_30', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:48:07.638 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:48:07.638 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:48:07.639 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:48:07.639 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:48:07.639 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:48:07.781 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:48:07.781 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:48:07.789 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:48:07.793 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:48:07.877 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:48:07.878 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:48:07.944 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:48:07.944 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:48:07.949 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:48:07.949 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:48:07.960 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:48:07.960 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:48:08.499 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:48:08.500 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:48:08.500 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:48:08.500 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:48:08.500 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:48:08.500 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:48:08.507 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30_genome.fasta.
2023-11-23 11:48:08.508 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30_genome.fasta is in FASTA format.
2023-11-23 11:48:08.508 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30_genome.fasta for duplicate FASTA headers.
2023-11-23 11:48:08.508 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30_genome.fasta are unique.
2023-11-23 11:48:08.508 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:48:08.508 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:48:08.509 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:48:08.514 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30_genome.fasta ...
2023-11-23 11:48:10.117 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_30-sr/Bu_30_genome.fasta
2023-11-23 11:48:10.125 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:48:10.128 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:16.171 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:16.176 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:22.214 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:22.240 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:48:22.243 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:22.409 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:22.412 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:48:22.415 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_minced.gff ...
2023-11-23 11:48:22.517 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_minced.gff
2023-11-23 11:48:22.519 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:48:22.523 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:22.541 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:22.543 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:48:22.543 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:48:22.548 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/target_dir/target_seqs ...
2023-11-23 11:48:23.334 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/target_dir/target_seqs
2023-11-23 11:48:23.339 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:50:49.440 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:50:49.446 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:50:49.592 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:50:49.612 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:50:49.617 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:50:50.466 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/CARD_target_dir/target_seqs
2023-11-23 11:50:50.472 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:51:12.792 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:51:12.798 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:51:12.879 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:51:12.898 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:51:12.903 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:51:13.670 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/VFDB_target_dir/target_seqs
2023-11-23 11:51:13.676 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:51:49.832 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:51:49.838 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:51:49.926 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:51:49.943 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:52:03.989 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:52:04.000 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:52:04.000 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:52:04.169 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:52:04.177 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:52:04.178 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:52:04.186 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:52:04.299 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:52:04.342 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:52:04.345 | INFO     | post_processing:extract_terl:1969 - More than one CDS annotated as terminase large subunit found. 
Saving all.
2023-11-23 11:52:04.353 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:52:04.357 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/input_mash_sketch.msh -i ...
2023-11-23 11:52:04.376 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/input_mash_sketch.msh -i
2023-11-23 11:52:04.382 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:52:04.946 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:52:05.222 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:52:05.223 | INFO     | __main__:main:481 - Elapsed time: 237.59 seconds
2023-11-23 11:52:05.223 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:52:05.223 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:52:05.223 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:52:05.223 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:52:05.223 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:52:05.223 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

MissingOutputException in rule checkv_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.checkv.smk, line 38:
Job 281  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/checkv/quality_summary.tsv
Select jobs to execute...

[Thu Nov 23 11:52:11 2023]
rule checkv_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/assembly.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/checkv/quality_summary.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.CS-1_4.log
    jobid: 274
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/checkv_flye_nano.CS-1_4.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/checkv/quality_summary.tsv
    wildcards: sample=CS-1_4
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        export CHECKVDB=/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/checkv-db-v1.5
        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/assembly.fasta ]]
        then
            checkv end_to_end                ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/assembly.fasta                 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/checkv                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.CS-1_4.log
        fi
        
Activating conda environment: sphae/workflow/conda/a4d2d492cde88381b68d5529e4f01bae_
Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_30-sr/Bu_30_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:52:11 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Eu_3-sr/Eu_3_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Eu_3.log
    jobid: 555
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3.gbk
    wildcards: sample=Eu_3
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Eu_3-sr/Eu_3_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Eu_3-sr/Eu_3_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Eu_3                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Eu_3.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Eu_3-sr/Eu_3_genome.fasta -n Eu_3_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr -p Eu_3 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
Waiting at most 5 seconds for missing files.
[Thu Nov 23 11:52:14 2023]
Error in rule pharokka_flye:
    jobid: 555
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Eu_3-sr/Eu_3_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Eu_3.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Eu_3-sr/Eu_3_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Eu_3-sr/Eu_3_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Eu_3                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Eu_3.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Eu_3-sr/Eu_3_genome.fasta -n Eu_3_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr -p Eu_3 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr/Eu_3_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Eu_3.log:
================================================================================
2023-11-23 11:52:12.955 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr as -f or --force was specified.
2023-11-23 11:52:12.967 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:52:12.968 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Eu_3-sr/Eu_3_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Eu_3-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Eu_3', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:52:12.968 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:52:12.968 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:52:12.968 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:52:12.969 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:52:12.969 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:52:13.116 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:52:13.116 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:52:13.125 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:52:13.126 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:52:13.212 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:52:13.212 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:52:13.287 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:52:13.288 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:52:13.296 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:52:13.297 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:52:13.308 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:52:13.308 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:52:13.889 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:52:13.889 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:52:13.889 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:52:13.889 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:52:13.889 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:52:13.889 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:52:13.897 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Eu_3-sr/Eu_3_genome.fasta.
2023-11-23 11:52:13.897 | ERROR    | input_commands:validate_fasta:222 - Error: Input file is not in the FASTA format.
================================================================================

MissingOutputException in rule checkv_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.checkv.smk, line 38:
Job 274  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/checkv/quality_summary.tsv
Select jobs to execute...

[Thu Nov 23 11:52:16 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_19-sr/Bb_19_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bb_19.log
    jobid: 541
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19.gbk
    wildcards: sample=Bb_19
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_19-sr/Bb_19_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_19-sr/Bb_19_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bb_19                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bb_19.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_19-sr/Bb_19_genome.fasta -n Bb_19_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr -p Bb_19 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
Select jobs to execute...

[Thu Nov 23 11:52:16 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-1_10-sr/CS-1_10_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-1_10.log
    jobid: 583
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10_length_gc_cds_density.tsv
    wildcards: sample=CS-1_10
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-1_10-sr/CS-1_10_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-1_10-sr/CS-1_10_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p CS-1_10                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-1_10.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-1_10-sr/CS-1_10_genome.fasta -n CS-1_10_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr -p CS-1_10 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
2023-11-23 11:52:19.323 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:52:19.323 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:52:19.324 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09_genome.fasta', plot_name='Bu_09_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr', gff='', genbank='', prefix='Bu_09', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:52:19.324 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:52:19.324 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:52:19.324 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:52:19.324 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:52:19.324 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:52:19.324 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:52:19.324 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:52:19.324 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:52:19.328 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09_genome.fasta.
2023-11-23 11:52:19.329 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09_genome.fasta is in FASTA format.
2023-11-23 11:52:19.329 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09_genome.fasta for duplicate FASTA headers.
2023-11-23 11:52:19.329 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09_genome.fasta are unique.
2023-11-23 11:52:19.330 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:52:19.330 | INFO     | __main__:<module>:291 - Plotting the phage.
[Thu Nov 23 11:52:19 2023]
[Thu Nov 23 11:52:19 2023]
Error in rule pharokka_flye:
    jobid: 583
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-1_10-sr/CS-1_10_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-1_10.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-1_10-sr/CS-1_10_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-1_10-sr/CS-1_10_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p CS-1_10                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-1_10.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-1_10-sr/CS-1_10_genome.fasta -n CS-1_10_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr -p CS-1_10 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr/CS-1_10_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-1_10.log:
================================================================================
2023-11-23 11:52:18.393 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr as -f or --force was specified.
2023-11-23 11:52:18.405 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:52:18.405 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-1_10-sr/CS-1_10_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-1_10-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='CS-1_10', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:52:18.405 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:52:18.405 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:52:18.405 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:52:18.406 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:52:18.406 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:52:18.548 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:52:18.548 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:52:18.556 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:52:18.556 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:52:18.636 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:52:18.636 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:52:18.701 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:52:18.701 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:52:18.708 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:52:18.708 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:52:18.719 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:52:18.719 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:52:19.245 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:52:19.246 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:52:19.246 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:52:19.246 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:52:19.246 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:52:19.246 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:52:19.252 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-1_10-sr/CS-1_10_genome.fasta.
2023-11-23 11:52:19.252 | ERROR    | input_commands:validate_fasta:222 - Error: Input file is not in the FASTA format.
================================================================================

Error in rule pharokka_flye:
    jobid: 541
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_19-sr/Bb_19_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bb_19.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_19-sr/Bb_19_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_19-sr/Bb_19_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bb_19                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bb_19.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_19-sr/Bb_19_genome.fasta -n Bb_19_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr -p Bb_19 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr/Bb_19_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bb_19.log:
================================================================================
2023-11-23 11:52:18.373 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr as -f or --force was specified.
2023-11-23 11:52:18.386 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:52:18.386 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_19-sr/Bb_19_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_19-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bb_19', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:52:18.386 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:52:18.386 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:52:18.387 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:52:18.387 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:52:18.387 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:52:18.537 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:52:18.537 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:52:18.546 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:52:18.546 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:52:18.627 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:52:18.627 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:52:18.695 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:52:18.696 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:52:18.703 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:52:18.703 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:52:18.714 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:52:18.714 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:52:19.246 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:52:19.247 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:52:19.247 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:52:19.247 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:52:19.247 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:52:19.247 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:52:19.253 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_19-sr/Bb_19_genome.fasta.
2023-11-23 11:52:19.253 | ERROR    | input_commands:validate_fasta:222 - Error: Input file is not in the FASTA format.
================================================================================

Select jobs to execute...

[Thu Nov 23 11:52:19 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_29-sr/Ecoli_29_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_29.log
    jobid: 625
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29_pharokka_plot.png
    wildcards: sample=Ecoli_29
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_29-sr/Ecoli_29_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_29-sr/Ecoli_29_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_29                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_29.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_29-sr/Ecoli_29_genome.fasta -n Ecoli_29_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr -p Ecoli_29 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
Select jobs to execute...

[Thu Nov 23 11:52:19 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_15-sr/Bf_15_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_15.log
    jobid: 569
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15_dnaapler_reoriented.fasta
    wildcards: sample=Bf_15
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_15-sr/Bf_15_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_15-sr/Bf_15_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_15                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_15.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_15-sr/Bf_15_genome.fasta -n Bf_15_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr -p Bf_15 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
[Thu Nov 23 11:52:21 2023]
Error in rule pharokka_flye:
    jobid: 625
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_29-sr/Ecoli_29_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_29.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_29-sr/Ecoli_29_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_29-sr/Ecoli_29_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_29                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_29.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_29-sr/Ecoli_29_genome.fasta -n Ecoli_29_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr -p Ecoli_29 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr/Ecoli_29_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_29.log:
================================================================================
2023-11-23 11:52:20.820 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr as -f or --force was specified.
2023-11-23 11:52:20.835 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:52:20.835 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_29-sr/Ecoli_29_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_29-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Ecoli_29', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:52:20.835 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:52:20.835 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:52:20.835 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:52:20.836 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:52:20.836 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:52:20.969 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:52:20.969 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:52:20.979 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:52:20.980 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:52:21.061 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:52:21.062 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:52:21.126 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:52:21.126 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:52:21.286 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:52:21.286 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:52:21.297 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:52:21.297 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:52:21.797 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:52:21.797 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:52:21.797 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:52:21.797 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:52:21.798 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:52:21.798 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:52:21.803 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_29-sr/Ecoli_29_genome.fasta.
2023-11-23 11:52:21.803 | ERROR    | input_commands:validate_fasta:222 - Error: Input file is not in the FASTA format.
================================================================================

Select jobs to execute...

[Thu Nov 23 11:52:21 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bs_13-sr/Bs_13_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bs_13.log
    jobid: 563
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/top_hits_vfdb.tsv
    wildcards: sample=Bs_13
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bs_13-sr/Bs_13_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bs_13-sr/Bs_13_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bs_13                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bs_13.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bs_13-sr/Bs_13_genome.fasta -n Bs_13_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr -p Bs_13 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13_dnaapler_reoriented.fasta
        fi
        
[Thu Nov 23 11:52:21 2023]
Error in rule pharokka_flye:
    jobid: 569
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_15-sr/Bf_15_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_15.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_15-sr/Bf_15_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_15-sr/Bf_15_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_15                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_15.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_15-sr/Bf_15_genome.fasta -n Bf_15_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr -p Bf_15 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr/Bf_15_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_15.log:
================================================================================
2023-11-23 11:52:20.917 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr as -f or --force was specified.
2023-11-23 11:52:20.927 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:52:20.927 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_15-sr/Bf_15_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_15-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bf_15', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:52:20.928 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:52:20.928 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:52:20.928 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:52:20.928 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:52:20.928 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:52:21.061 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:52:21.061 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:52:21.069 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:52:21.070 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:52:21.151 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:52:21.151 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:52:21.358 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:52:21.359 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:52:21.364 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:52:21.364 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:52:21.375 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:52:21.375 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:52:21.878 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:52:21.879 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:52:21.879 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:52:21.879 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:52:21.879 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:52:21.879 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:52:21.885 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_15-sr/Bf_15_genome.fasta.
2023-11-23 11:52:21.885 | ERROR    | input_commands:validate_fasta:222 - Error: Input file is not in the FASTA format.
================================================================================

Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
Select jobs to execute...

[Thu Nov 23 11:52:22 2023]
rule checkv_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/assembly.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/checkv/quality_summary.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Ec_23.log
    jobid: 268
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/checkv_flye_nano.Ec_23.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/checkv/quality_summary.tsv
    wildcards: sample=Ec_23
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        export CHECKVDB=/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/checkv-db-v1.5
        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/assembly.fasta ]]
        then
            checkv end_to_end                ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/assembly.fasta                 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/checkv                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Ec_23.log
        fi
        
Activating conda environment: sphae/workflow/conda/a4d2d492cde88381b68d5529e4f01bae_
Waiting at most 5 seconds for missing files.
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:52:23 2023]
Error in rule pharokka_flye:
    jobid: 525
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_09.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bu_09                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_09.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09_genome.fasta -n Bu_09_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr -p Bu_09 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_09.log:
================================================================================
2023-11-23 11:48:04.418 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr as -f or --force was specified.
2023-11-23 11:48:04.431 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:48:04.431 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bu_09', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:48:04.431 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:48:04.431 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:48:04.431 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:48:04.431 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:48:04.432 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:48:04.570 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:48:04.571 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:48:04.579 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:48:04.579 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:48:04.663 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:48:04.664 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:48:04.733 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:48:04.734 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:48:04.739 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:48:04.740 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:48:04.750 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:48:04.751 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:48:05.287 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:48:05.288 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:48:05.288 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:48:05.288 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:48:05.288 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:48:05.288 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:48:05.298 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09_genome.fasta.
2023-11-23 11:48:05.298 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09_genome.fasta is in FASTA format.
2023-11-23 11:48:05.299 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09_genome.fasta for duplicate FASTA headers.
2023-11-23 11:48:05.299 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09_genome.fasta are unique.
2023-11-23 11:48:05.299 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:48:05.299 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:48:05.300 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:48:05.305 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09_genome.fasta ...
2023-11-23 11:48:06.650 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_09-sr/Bu_09_genome.fasta
2023-11-23 11:48:06.659 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:48:06.663 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:12.797 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:12.804 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:18.858 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:18.887 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:48:18.891 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:19.051 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:19.053 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:48:19.057 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_minced.gff ...
2023-11-23 11:48:19.159 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_minced.gff
2023-11-23 11:48:19.161 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:48:19.165 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:19.182 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:19.185 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:48:19.185 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:48:19.190 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/target_dir/target_seqs ...
2023-11-23 11:48:19.870 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/target_dir/target_seqs
2023-11-23 11:48:19.876 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:50:56.693 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:50:56.699 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:50:56.837 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:50:56.856 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:50:56.861 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:50:57.611 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/CARD_target_dir/target_seqs
2023-11-23 11:50:57.616 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:51:22.215 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:51:22.220 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:51:22.297 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:51:22.314 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:51:22.319 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:51:23.003 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/VFDB_target_dir/target_seqs
2023-11-23 11:51:23.009 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:52:01.996 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:52:02.002 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:52:02.095 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:52:02.112 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:52:16.362 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:52:16.374 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:52:16.375 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:52:16.528 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:52:16.536 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:52:16.537 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:52:16.545 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:52:16.663 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:52:16.706 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:52:16.709 | INFO     | post_processing:extract_terl:1969 - More than one CDS annotated as terminase large subunit found. 
Saving all.
2023-11-23 11:52:16.718 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:52:16.722 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/input_mash_sketch.msh -i ...
2023-11-23 11:52:16.741 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/input_mash_sketch.msh -i
2023-11-23 11:52:16.746 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:52:17.297 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:52:17.569 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:52:17.570 | INFO     | __main__:main:481 - Elapsed time: 253.14 seconds
2023-11-23 11:52:17.570 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:52:17.570 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:52:17.570 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:52:17.570 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:52:17.570 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:52:17.570 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

[Thu Nov 23 11:52:24 2023]
Error in rule pharokka_flye:
    jobid: 563
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bs_13-sr/Bs_13_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bs_13.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bs_13-sr/Bs_13_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bs_13-sr/Bs_13_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bs_13                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bs_13.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bs_13-sr/Bs_13_genome.fasta -n Bs_13_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr -p Bs_13 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr/Bs_13_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bs_13.log:
================================================================================
2023-11-23 11:52:23.403 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr as -f or --force was specified.
2023-11-23 11:52:23.416 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:52:23.416 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bs_13-sr/Bs_13_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bs_13-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bs_13', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:52:23.416 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:52:23.416 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:52:23.416 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:52:23.417 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:52:23.417 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:52:23.554 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:52:23.554 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:52:23.563 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:52:23.563 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:52:23.643 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:52:23.644 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:52:23.706 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:52:23.706 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:52:23.712 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:52:23.712 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:52:23.722 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:52:23.723 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:52:24.246 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:52:24.246 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:52:24.246 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:52:24.247 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:52:24.247 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:52:24.247 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:52:24.254 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bs_13-sr/Bs_13_genome.fasta.
2023-11-23 11:52:24.254 | ERROR    | input_commands:validate_fasta:222 - Error: Input file is not in the FASTA format.
================================================================================

MissingOutputException in rule checkv_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.checkv.smk, line 38:
Job 268  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_23-sr/checkv/quality_summary.tsv
Select jobs to execute...

[Thu Nov 23 11:52:27 2023]
rule checkv_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/assembly.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/checkv/quality_summary.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.CS-1_9.log
    jobid: 310
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/checkv_flye_nano.CS-1_9.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/checkv/quality_summary.tsv
    wildcards: sample=CS-1_9
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        export CHECKVDB=/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/checkv-db-v1.5
        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/assembly.fasta ]]
        then
            checkv end_to_end                ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/assembly.fasta                 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/checkv                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.CS-1_9.log
        fi
        
Activating conda environment: sphae/workflow/conda/a4d2d492cde88381b68d5529e4f01bae_
Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_09-sr/Bu_09_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:52:27 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_37-sr/Ecoli_37_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_37.log
    jobid: 521
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37_pharokka_plot.png
    wildcards: sample=Ecoli_37
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_37-sr/Ecoli_37_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_37-sr/Ecoli_37_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_37                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_37.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_37-sr/Ecoli_37_genome.fasta -n Ecoli_37_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr -p Ecoli_37 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37_dnaapler_reoriented.fasta
        fi
        

Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
[Thu Nov 23 11:52:27 2023]
rule checkv_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/assembly.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/checkv/quality_summary.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Ec_25.log
    jobid: 303
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/checkv_flye_nano.Ec_25.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/checkv/quality_summary.tsv
    wildcards: sample=Ec_25
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        export CHECKVDB=/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/checkv-db-v1.5
        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/assembly.fasta ]]
        then
            checkv end_to_end                ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/assembly.fasta                 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/checkv                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Ec_25.log
        fi
        
Select jobs to execute...
Activating conda environment: sphae/workflow/conda/a4d2d492cde88381b68d5529e4f01bae_
Waiting at most 5 seconds for missing files.
[Thu Nov 23 11:52:29 2023]
Error in rule pharokka_flye:
    jobid: 521
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_37-sr/Ecoli_37_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_37.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_37-sr/Ecoli_37_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_37-sr/Ecoli_37_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_37                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_37.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_37-sr/Ecoli_37_genome.fasta -n Ecoli_37_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr -p Ecoli_37 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr/Ecoli_37_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_37.log:
================================================================================
2023-11-23 11:52:28.914 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr as -f or --force was specified.
2023-11-23 11:52:28.927 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:52:28.927 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_37-sr/Ecoli_37_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_37-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Ecoli_37', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:52:28.927 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:52:28.927 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:52:28.927 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:52:28.928 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:52:28.928 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:52:29.057 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:52:29.057 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:52:29.065 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:52:29.065 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:52:29.146 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:52:29.146 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:52:29.205 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:52:29.206 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:52:29.211 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:52:29.211 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:52:29.222 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:52:29.222 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:52:29.702 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:52:29.702 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:52:29.702 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:52:29.703 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:52:29.703 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:52:29.703 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:52:29.709 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_37-sr/Ecoli_37_genome.fasta.
2023-11-23 11:52:29.709 | ERROR    | input_commands:validate_fasta:222 - Error: Input file is not in the FASTA format.
================================================================================

MissingOutputException in rule checkv_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.checkv.smk, line 38:
Job 310  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_9-sr/checkv/quality_summary.tsv

[Thu Nov 23 11:52:32 2023]
rule checkv_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/assembly.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/checkv/quality_summary.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.CS-1_8.log
    jobid: 289
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/checkv_flye_nano.CS-1_8.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/checkv/quality_summary.tsv
    wildcards: sample=CS-1_8
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        export CHECKVDB=/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/checkv-db-v1.5
        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/assembly.fasta ]]
        then
            checkv end_to_end                ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/assembly.fasta                 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/checkv                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.CS-1_8.log
        fi
        
Activating conda environment: sphae/workflow/conda/a4d2d492cde88381b68d5529e4f01bae_
Waiting at most 5 seconds for missing files.
2023-11-23 11:52:33.168 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:52:33.168 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:52:33.168 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24_genome.fasta', plot_name='Bu_24_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr', gff='', genbank='', prefix='Bu_24', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:52:33.168 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:52:33.168 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:52:33.168 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:52:33.168 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:52:33.168 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:52:33.169 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:52:33.169 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:52:33.169 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:52:33.173 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24_genome.fasta.
2023-11-23 11:52:33.173 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24_genome.fasta is in FASTA format.
2023-11-23 11:52:33.173 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24_genome.fasta for duplicate FASTA headers.
2023-11-23 11:52:33.174 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24_genome.fasta are unique.
2023-11-23 11:52:33.174 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:52:33.174 | INFO     | __main__:<module>:291 - Plotting the phage.
2023-11-23 11:52:35.576 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:52:35.577 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:52:35.577 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20_genome.fasta', plot_name='Bu_20_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr', gff='', genbank='', prefix='Bu_20', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:52:35.577 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:52:35.577 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:52:35.577 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:52:35.577 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:52:35.577 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:52:35.577 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:52:35.578 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:52:35.578 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:52:35.581 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20_genome.fasta.
2023-11-23 11:52:35.582 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20_genome.fasta is in FASTA format.
2023-11-23 11:52:35.582 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20_genome.fasta for duplicate FASTA headers.
2023-11-23 11:52:35.582 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20_genome.fasta are unique.
2023-11-23 11:52:35.582 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:52:35.582 | INFO     | __main__:<module>:291 - Plotting the phage.
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:52:37 2023]
Error in rule pharokka_flye:
    jobid: 547
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_24.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bu_24                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_24.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24_genome.fasta -n Bu_24_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr -p Bu_24 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_24.log:
================================================================================
2023-11-23 11:48:23.353 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr as -f or --force was specified.
2023-11-23 11:48:23.366 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:48:23.366 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bu_24', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:48:23.366 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:48:23.366 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:48:23.366 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:48:23.367 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:48:23.367 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:48:23.509 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:48:23.509 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:48:23.517 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:48:23.518 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:48:23.604 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:48:23.605 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:48:23.690 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:48:23.690 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:48:23.696 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:48:23.696 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:48:23.708 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:48:23.708 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:48:24.258 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:48:24.259 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:48:24.259 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:48:24.259 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:48:24.259 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:48:24.259 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:48:24.266 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24_genome.fasta.
2023-11-23 11:48:24.267 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24_genome.fasta is in FASTA format.
2023-11-23 11:48:24.267 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24_genome.fasta for duplicate FASTA headers.
2023-11-23 11:48:24.267 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24_genome.fasta are unique.
2023-11-23 11:48:24.268 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:48:24.268 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:48:24.268 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:48:24.273 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24_genome.fasta ...
2023-11-23 11:48:25.683 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_24-sr/Bu_24_genome.fasta
2023-11-23 11:48:25.693 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:48:25.696 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:31.293 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:31.299 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:36.874 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:36.899 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:48:36.903 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:37.076 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:37.079 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:48:37.082 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_minced.gff ...
2023-11-23 11:48:37.191 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_minced.gff
2023-11-23 11:48:37.194 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:48:37.197 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:37.216 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:37.218 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:48:37.218 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:48:37.223 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/target_dir/target_seqs ...
2023-11-23 11:48:37.964 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/target_dir/target_seqs
2023-11-23 11:48:37.969 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:51:17.728 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:51:17.735 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:51:17.890 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:51:17.912 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:51:17.916 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:51:18.736 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/CARD_target_dir/target_seqs
2023-11-23 11:51:18.743 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:51:40.196 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:51:40.201 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:51:40.279 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:51:40.296 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:51:40.301 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:51:41.061 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/VFDB_target_dir/target_seqs
2023-11-23 11:51:41.067 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:52:16.587 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:52:16.593 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:52:16.681 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:52:16.700 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:52:30.415 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:52:30.426 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:52:30.426 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:52:30.567 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:52:30.575 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:52:30.575 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:52:30.586 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:52:30.693 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:52:30.733 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:52:30.736 | INFO     | post_processing:extract_terl:1969 - More than one CDS annotated as terminase large subunit found. 
Saving all.
2023-11-23 11:52:30.745 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:52:30.748 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/input_mash_sketch.msh -i ...
2023-11-23 11:52:30.767 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/input_mash_sketch.msh -i
2023-11-23 11:52:30.772 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:52:31.307 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:52:31.581 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:52:31.581 | INFO     | __main__:main:481 - Elapsed time: 248.22 seconds
2023-11-23 11:52:31.581 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:52:31.581 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:52:31.581 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:52:31.581 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:52:31.581 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:52:31.581 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

MissingOutputException in rule checkv_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.checkv.smk, line 38:
Job 303  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_25-sr/checkv/quality_summary.tsv
Select jobs to execute...

[Thu Nov 23 11:52:37 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_35-sr/Ecoli_35_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_35.log
    jobid: 613
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35_top_hits_mash_inphared.tsv
    wildcards: sample=Ecoli_35
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_35-sr/Ecoli_35_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_35-sr/Ecoli_35_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_35                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_35.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_35-sr/Ecoli_35_genome.fasta -n Ecoli_35_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr -p Ecoli_35 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35_dnaapler_reoriented.fasta
        fi
        

Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
[Thu Nov 23 11:52:37 2023]
rule checkv_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/assembly.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/checkv/quality_summary.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Bu_06.log
    jobid: 276
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/checkv_flye_nano.Bu_06.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/checkv/quality_summary.tsv
    wildcards: sample=Bu_06
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        export CHECKVDB=/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/checkv-db-v1.5
        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/assembly.fasta ]]
        then
            checkv end_to_end                ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/assembly.fasta                 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/checkv                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Bu_06.log
        fi
        
Activating conda environment: sphae/workflow/conda/a4d2d492cde88381b68d5529e4f01bae_
Waiting at most 5 seconds for missing files.
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:52:39 2023]
Error in rule pharokka_flye:
    jobid: 611
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_20.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bu_20                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_20.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20_genome.fasta -n Bu_20_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr -p Bu_20 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_20.log:
================================================================================
2023-11-23 11:48:24.153 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr as -f or --force was specified.
2023-11-23 11:48:24.167 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:48:24.167 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bu_20', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:48:24.167 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:48:24.167 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:48:24.167 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:48:24.167 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:48:24.168 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:48:24.314 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:48:24.314 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:48:24.322 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:48:24.323 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:48:24.407 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:48:24.408 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:48:24.475 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:48:24.476 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:48:24.481 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:48:24.481 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:48:24.493 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:48:24.493 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:48:25.054 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:48:25.054 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:48:25.054 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:48:25.054 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:48:25.054 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:48:25.054 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:48:25.061 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20_genome.fasta.
2023-11-23 11:48:25.061 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20_genome.fasta is in FASTA format.
2023-11-23 11:48:25.061 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20_genome.fasta for duplicate FASTA headers.
2023-11-23 11:48:25.062 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20_genome.fasta are unique.
2023-11-23 11:48:25.062 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:48:25.062 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:48:25.062 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:48:25.067 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20_genome.fasta ...
2023-11-23 11:48:26.517 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_20-sr/Bu_20_genome.fasta
2023-11-23 11:48:26.525 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:48:26.529 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:32.140 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:32.146 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:37.718 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:37.743 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:48:37.747 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:37.910 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:37.913 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:48:37.916 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_minced.gff ...
2023-11-23 11:48:38.020 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_minced.gff
2023-11-23 11:48:38.022 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:48:38.025 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:38.042 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:38.044 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:48:38.044 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:48:38.049 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/target_dir/target_seqs ...
2023-11-23 11:48:38.713 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/target_dir/target_seqs
2023-11-23 11:48:38.718 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:51:17.835 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:51:17.842 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:51:17.985 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:51:18.006 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:51:18.011 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:51:18.834 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/CARD_target_dir/target_seqs
2023-11-23 11:51:18.839 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:51:40.698 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:51:40.705 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:51:40.803 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:51:40.824 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:51:40.830 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:51:41.640 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/VFDB_target_dir/target_seqs
2023-11-23 11:51:41.646 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:52:19.055 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:52:19.061 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:52:19.144 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:52:19.161 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:52:32.883 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:52:32.895 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:52:32.895 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:52:33.034 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:52:33.042 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:52:33.042 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:52:33.049 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:52:33.157 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:52:33.196 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:52:33.199 | INFO     | post_processing:extract_terl:1969 - More than one CDS annotated as terminase large subunit found. 
Saving all.
2023-11-23 11:52:33.208 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:52:33.212 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/input_mash_sketch.msh -i ...
2023-11-23 11:52:33.231 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/input_mash_sketch.msh -i
2023-11-23 11:52:33.237 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:52:33.774 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:52:34.049 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:52:34.050 | INFO     | __main__:main:481 - Elapsed time: 249.89 seconds
2023-11-23 11:52:34.050 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:52:34.050 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:52:34.050 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:52:34.050 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:52:34.050 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:52:34.050 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

[Thu Nov 23 11:52:40 2023]
Error in rule pharokka_flye:
    jobid: 613
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_35-sr/Ecoli_35_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_35.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_35-sr/Ecoli_35_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_35-sr/Ecoli_35_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_35                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_35.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_35-sr/Ecoli_35_genome.fasta -n Ecoli_35_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr -p Ecoli_35 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr/Ecoli_35_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_35.log:
================================================================================
2023-11-23 11:52:39.241 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr as -f or --force was specified.
2023-11-23 11:52:39.253 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:52:39.253 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_35-sr/Ecoli_35_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_35-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Ecoli_35', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:52:39.254 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:52:39.254 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:52:39.254 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:52:39.255 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:52:39.256 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:52:39.389 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:52:39.389 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:52:39.397 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:52:39.397 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:52:39.479 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:52:39.479 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:52:39.540 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:52:39.540 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:52:39.546 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:52:39.546 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:52:39.556 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:52:39.557 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:52:40.033 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:52:40.033 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:52:40.033 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:52:40.033 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:52:40.033 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:52:40.033 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:52:40.039 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_35-sr/Ecoli_35_genome.fasta.
2023-11-23 11:52:40.039 | ERROR    | input_commands:validate_fasta:222 - Error: Input file is not in the FASTA format.
================================================================================

MissingOutputException in rule checkv_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.checkv.smk, line 38:
Job 289  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/checkv/quality_summary.tsv
Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_24-sr/Bu_24_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:52:42 2023]
rule checkv_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/assembly.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/checkv/quality_summary.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Bu_05.log
    jobid: 269
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/checkv_flye_nano.Bu_05.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/checkv/quality_summary.tsv
    wildcards: sample=Bu_05
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        export CHECKVDB=/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/checkv-db-v1.5
        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/assembly.fasta ]]
        then
            checkv end_to_end                ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/assembly.fasta                 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/checkv                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Bu_05.log
        fi
        
Activating conda environment: sphae/workflow/conda/a4d2d492cde88381b68d5529e4f01bae_

[Thu Nov 23 11:52:42 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_13-sr/CS-2_13_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-2_13.log
    jobid: 543
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13_minced_spacers.txt
    wildcards: sample=CS-2_13
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_13-sr/CS-2_13_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_13-sr/CS-2_13_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p CS-2_13                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-2_13.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_13-sr/CS-2_13_genome.fasta -n CS-2_13_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr -p CS-2_13 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
Waiting at most 5 seconds for missing files.
[Thu Nov 23 11:52:45 2023]
Error in rule pharokka_flye:
    jobid: 543
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_13-sr/CS-2_13_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-2_13.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_13-sr/CS-2_13_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_13-sr/CS-2_13_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p CS-2_13                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-2_13.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_13-sr/CS-2_13_genome.fasta -n CS-2_13_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr -p CS-2_13 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr/CS-2_13_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.CS-2_13.log:
================================================================================
2023-11-23 11:52:44.440 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr as -f or --force was specified.
2023-11-23 11:52:44.453 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:52:44.453 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_13-sr/CS-2_13_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/CS-2_13-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='CS-2_13', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:52:44.453 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:52:44.453 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:52:44.453 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:52:44.454 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:52:44.454 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:52:44.584 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:52:44.584 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:52:44.593 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:52:44.593 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:52:44.673 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:52:44.674 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:52:44.732 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:52:44.733 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:52:44.738 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:52:44.738 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:52:44.748 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:52:44.748 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:52:45.233 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:52:45.233 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:52:45.233 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:52:45.233 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:52:45.233 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:52:45.233 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:52:45.239 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/CS-2_13-sr/CS-2_13_genome.fasta.
2023-11-23 11:52:45.239 | ERROR    | input_commands:validate_fasta:222 - Error: Input file is not in the FASTA format.
================================================================================

2023-11-23 11:52:46.513 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:52:46.513 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:52:46.513 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18_genome.fasta', plot_name='Bu_18_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr', gff='', genbank='', prefix='Bu_18', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:52:46.513 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:52:46.513 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:52:46.513 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:52:46.514 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:52:46.514 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:52:46.514 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:52:46.514 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:52:46.514 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:52:46.518 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18_genome.fasta.
2023-11-23 11:52:46.518 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18_genome.fasta is in FASTA format.
2023-11-23 11:52:46.518 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18_genome.fasta for duplicate FASTA headers.
2023-11-23 11:52:46.518 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18_genome.fasta are unique.
2023-11-23 11:52:46.519 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:52:46.519 | INFO     | __main__:<module>:291 - Plotting the phage.
MissingOutputException in rule checkv_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.checkv.smk, line 38:
Job 276  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_06-sr/checkv/quality_summary.tsv
Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_20-sr/Bu_20_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:52:48 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_33-sr/Ecoli_33_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_33.log
    jobid: 585
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33_top_hits_mash_inphared.tsv
    wildcards: sample=Ecoli_33
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_33-sr/Ecoli_33_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_33-sr/Ecoli_33_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_33                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_33.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_33-sr/Ecoli_33_genome.fasta -n Ecoli_33_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr -p Ecoli_33 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_

[Thu Nov 23 11:52:48 2023]
rule checkv_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/assembly.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/checkv/quality_summary.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Bu_02.log
    jobid: 297
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/checkv_flye_nano.Bu_02.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/checkv/quality_summary.tsv
    wildcards: sample=Bu_02
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        export CHECKVDB=/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/checkv-db-v1.5
        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/assembly.fasta ]]
        then
            checkv end_to_end                ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/assembly.fasta                 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/checkv                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Bu_02.log
        fi
        
Activating conda environment: sphae/workflow/conda/a4d2d492cde88381b68d5529e4f01bae_

[Thu Nov 23 11:52:48 2023]
rule checkv_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/assembly.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/checkv/quality_summary.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.CS-1_7.log
    jobid: 311
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/checkv_flye_nano.CS-1_7.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/checkv/quality_summary.tsv
    wildcards: sample=CS-1_7
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        export CHECKVDB=/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/checkv-db-v1.5
        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/assembly.fasta ]]
        then
            checkv end_to_end                ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/assembly.fasta                 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/checkv                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.CS-1_7.log
        fi
        
Activating conda environment: sphae/workflow/conda/a4d2d492cde88381b68d5529e4f01bae_
Waiting at most 5 seconds for missing files.
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:52:50 2023]
Error in rule pharokka_flye:
    jobid: 623
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_18.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bu_18                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_18.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18_genome.fasta -n Bu_18_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr -p Bu_18 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_18.log:
================================================================================
2023-11-23 11:48:37.681 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr as -f or --force was specified.
2023-11-23 11:48:37.694 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:48:37.694 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bu_18', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:48:37.694 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:48:37.695 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:48:37.695 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:48:37.697 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:48:37.697 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:48:37.841 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:48:37.842 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:48:37.852 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:48:37.852 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:48:37.933 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:48:37.933 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:48:38.008 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:48:38.008 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:48:38.014 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:48:38.014 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:48:38.024 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:48:38.025 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:48:38.535 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:48:38.535 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:48:38.535 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:48:38.535 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:48:38.535 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:48:38.535 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:48:38.542 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18_genome.fasta.
2023-11-23 11:48:38.542 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18_genome.fasta is in FASTA format.
2023-11-23 11:48:38.542 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18_genome.fasta for duplicate FASTA headers.
2023-11-23 11:48:38.542 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18_genome.fasta are unique.
2023-11-23 11:48:38.543 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:48:38.543 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:48:38.543 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:48:38.549 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18_genome.fasta ...
2023-11-23 11:48:40.167 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_18-sr/Bu_18_genome.fasta
2023-11-23 11:48:40.175 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:48:40.178 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:46.169 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:46.175 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:52.085 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:52.116 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:48:52.120 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:52.293 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:52.296 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:48:52.300 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_minced.gff ...
2023-11-23 11:48:52.409 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_minced.gff
2023-11-23 11:48:52.412 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:48:52.415 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:48:52.433 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:48:52.436 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:48:52.436 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:48:52.441 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/target_dir/target_seqs ...
2023-11-23 11:48:53.130 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/target_dir/target_seqs
2023-11-23 11:48:53.136 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:51:33.108 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:51:33.114 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:51:33.245 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:51:33.263 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:51:33.268 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:51:33.909 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/CARD_target_dir/target_seqs
2023-11-23 11:51:33.915 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:51:55.133 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:51:55.139 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:51:55.216 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:51:55.240 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:51:55.245 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:51:55.955 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/VFDB_target_dir/target_seqs
2023-11-23 11:51:55.960 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:52:30.284 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:52:30.289 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:52:30.378 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:52:30.396 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:52:43.748 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:52:43.758 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:52:43.758 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:52:43.895 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:52:43.902 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:52:43.903 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:52:43.910 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:52:44.008 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:52:44.044 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:52:44.047 | INFO     | post_processing:extract_terl:1969 - More than one CDS annotated as terminase large subunit found. 
Saving all.
2023-11-23 11:52:44.056 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:52:44.059 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/input_mash_sketch.msh -i ...
2023-11-23 11:52:44.078 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/input_mash_sketch.msh -i
2023-11-23 11:52:44.084 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:52:44.626 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:52:44.886 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:52:44.887 | INFO     | __main__:main:481 - Elapsed time: 247.2 seconds
2023-11-23 11:52:44.887 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:52:44.887 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:52:44.887 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:52:44.887 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:52:44.887 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:52:44.887 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

[Thu Nov 23 11:52:50 2023]
Error in rule pharokka_flye:
    jobid: 585
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_33-sr/Ecoli_33_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_33.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_33-sr/Ecoli_33_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_33-sr/Ecoli_33_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_33                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_33.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_33-sr/Ecoli_33_genome.fasta -n Ecoli_33_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr -p Ecoli_33 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr/Ecoli_33_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_33.log:
================================================================================
2023-11-23 11:52:49.539 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr as -f or --force was specified.
2023-11-23 11:52:49.552 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:52:49.552 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_33-sr/Ecoli_33_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_33-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Ecoli_33', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:52:49.552 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:52:49.552 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:52:49.552 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:52:49.552 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:52:49.552 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:52:49.682 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:52:49.682 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:52:49.690 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:52:49.690 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:52:49.770 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:52:49.770 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:52:49.829 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:52:49.829 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:52:49.834 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:52:49.834 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:52:49.843 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:52:49.843 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:52:50.334 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:52:50.335 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:52:50.335 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:52:50.335 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:52:50.335 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:52:50.335 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:52:50.341 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_33-sr/Ecoli_33_genome.fasta.
2023-11-23 11:52:50.341 | ERROR    | input_commands:validate_fasta:222 - Error: Input file is not in the FASTA format.
================================================================================

MissingOutputException in rule checkv_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.checkv.smk, line 38:
Job 269  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_05-sr/checkv/quality_summary.tsv
Select jobs to execute...

[Thu Nov 23 11:52:53 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_16-sr/Bb_16_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bb_16.log
    jobid: 515
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16_minced_spacers.txt
    wildcards: sample=Bb_16
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_16-sr/Bb_16_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_16-sr/Bb_16_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bb_16                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bb_16.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_16-sr/Bb_16_genome.fasta -n Bb_16_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr -p Bb_16 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_

[Thu Nov 23 11:52:53 2023]
rule checkv_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/assembly.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/checkv/quality_summary.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.CS-1_6.log
    jobid: 290
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/checkv_flye_nano.CS-1_6.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/checkv/quality_summary.tsv
    wildcards: sample=CS-1_6
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        export CHECKVDB=/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/checkv-db-v1.5
        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/assembly.fasta ]]
        then
            checkv end_to_end                ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/assembly.fasta                 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/checkv                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.CS-1_6.log
        fi
        
Activating conda environment: sphae/workflow/conda/a4d2d492cde88381b68d5529e4f01bae_
Waiting at most 5 seconds for missing files.
[Thu Nov 23 11:52:55 2023]
Error in rule pharokka_flye:
    jobid: 515
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_16-sr/Bb_16_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bb_16.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_16-sr/Bb_16_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_16-sr/Bb_16_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bb_16                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bb_16.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_16-sr/Bb_16_genome.fasta -n Bb_16_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr -p Bb_16 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr/Bb_16_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bb_16.log:
================================================================================
2023-11-23 11:52:54.686 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr as -f or --force was specified.
2023-11-23 11:52:54.742 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:52:54.743 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_16-sr/Bb_16_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_16-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bb_16', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:52:54.743 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:52:54.743 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:52:54.743 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:52:54.743 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:52:54.743 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:52:54.884 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:52:54.885 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:52:54.893 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:52:54.893 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:52:54.978 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:52:54.978 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:52:55.050 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:52:55.051 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:52:55.057 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:52:55.057 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:52:55.068 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:52:55.068 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:52:55.595 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:52:55.595 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:52:55.595 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:52:55.595 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:52:55.595 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:52:55.595 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:52:55.602 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_16-sr/Bb_16_genome.fasta.
2023-11-23 11:52:55.602 | ERROR    | input_commands:validate_fasta:222 - Error: Input file is not in the FASTA format.
================================================================================

MissingOutputException in rule checkv_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.checkv.smk, line 38:
Job 297  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_02-sr/checkv/quality_summary.tsv
Waiting at most 5 seconds for missing files.
MissingOutputException in rule checkv_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.checkv.smk, line 38:
Job 311  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/checkv/quality_summary.tsv
Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_18-sr/Bu_18_length_gc_cds_density.tsv
Select jobs to execute...

[Thu Nov 23 11:53:03 2023]
rule medaka:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Bu_13_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Bu_13.log
    jobid: 92
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/medaka.Bu_13.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/consensus.fasta
    wildcards: sample=Bu_13
    threads: 32
    resources: tmpdir=/local/nala0006/2279931, mem_mb=64000, mem_mib=61036, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Bu_13_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Bu_13.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/consensus.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
Waiting at most 5 seconds for missing files.
[Thu Nov 23 11:53:06 2023]
Error in rule medaka:
    jobid: 92
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Bu_13_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Bu_13.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Bu_13_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Bu_13.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/consensus.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Bu_13.log:
================================================================================
[11:53:05 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpwjmduns4.
[11:53:06 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmp89vrwhc_.
Creating fai index file /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/assembly.fasta.fai
[faidx] Could not build fai index /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Bu_13-sr/assembly.fasta.fai
================================================================================

MissingOutputException in rule checkv_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.checkv.smk, line 38:
Job 290  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/checkv/quality_summary.tsv
Select jobs to execute...

[Thu Nov 23 11:53:08 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_18-sr/Bb_18_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bb_18.log
    jobid: 565
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/top_hits_card.tsv
    wildcards: sample=Bb_18
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_18-sr/Bb_18_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_18-sr/Bb_18_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bb_18                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bb_18.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_18-sr/Bb_18_genome.fasta -n Bb_18_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr -p Bb_18 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_

[Thu Nov 23 11:53:08 2023]
rule checkv_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/assembly.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/checkv/quality_summary.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Ec_24.log
    jobid: 270
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/checkv_flye_nano.Ec_24.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/checkv/quality_summary.tsv
    wildcards: sample=Ec_24
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        export CHECKVDB=/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/checkv-db-v1.5
        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/assembly.fasta ]]
        then
            checkv end_to_end                ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/assembly.fasta                 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/checkv                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Ec_24.log
        fi
        
Activating conda environment: sphae/workflow/conda/a4d2d492cde88381b68d5529e4f01bae_
Select jobs to execute...

[Thu Nov 23 11:53:08 2023]
rule medaka:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_7_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_7.log
    jobid: 122
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/medaka.CS-1_7.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/consensus.fasta
    wildcards: sample=CS-1_7
    threads: 32
    resources: tmpdir=/local/nala0006/2279931, mem_mb=64000, mem_mib=61036, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_7_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_7.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/consensus.fasta
        fi
        
Select jobs to execute...
Activating conda environment: sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
Waiting at most 5 seconds for missing files.
[Thu Nov 23 11:53:10 2023]
Error in rule pharokka_flye:
    jobid: 565
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_18-sr/Bb_18_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bb_18.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_18-sr/Bb_18_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_18-sr/Bb_18_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bb_18                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bb_18.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_18-sr/Bb_18_genome.fasta -n Bb_18_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr -p Bb_18 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr/Bb_18_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bb_18.log:
================================================================================
2023-11-23 11:53:09.862 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr as -f or --force was specified.
2023-11-23 11:53:09.876 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:53:09.876 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_18-sr/Bb_18_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_18-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bb_18', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:53:09.876 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:53:09.876 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:53:09.876 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:53:09.877 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:53:09.877 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:53:10.022 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:53:10.022 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:53:10.030 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:53:10.031 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:53:10.114 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:53:10.115 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:53:10.186 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:53:10.187 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:53:10.193 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:53:10.193 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:53:10.204 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:53:10.205 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:53:10.737 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:53:10.737 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:53:10.737 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:53:10.738 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:53:10.738 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:53:10.738 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:53:10.744 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_18-sr/Bb_18_genome.fasta.
2023-11-23 11:53:10.744 | ERROR    | input_commands:validate_fasta:222 - Error: Input file is not in the FASTA format.
================================================================================

[Thu Nov 23 11:53:11 2023]
Error in rule medaka:
    jobid: 122
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_7_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_7.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_7_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_7.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/consensus.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_7.log:
================================================================================
[11:53:10 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmp99twy_yy.
[11:53:11 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpmzac7c8q.
Creating fai index file /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/assembly.fasta.fai
[faidx] Could not build fai index /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_7-sr/assembly.fasta.fai
================================================================================

MissingOutputException in rule checkv_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.checkv.smk, line 38:
Job 270  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ec_24-sr/checkv/quality_summary.tsv

[Thu Nov 23 11:53:13 2023]
rule checkv_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/assembly.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/checkv/quality_summary.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.CS-1_1.log
    jobid: 271
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/checkv_flye_nano.CS-1_1.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/checkv/quality_summary.tsv
    wildcards: sample=CS-1_1
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        export CHECKVDB=/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/checkv-db-v1.5
        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/assembly.fasta ]]
        then
            checkv end_to_end                ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/assembly.fasta                 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/checkv                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.CS-1_1.log
        fi
        
Activating conda environment: sphae/workflow/conda/a4d2d492cde88381b68d5529e4f01bae_
Select jobs to execute...

[Thu Nov 23 11:53:13 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_09-sr/Bf_09_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_09.log
    jobid: 601
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09_minced_spacers.txt
    wildcards: sample=Bf_09
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_09-sr/Bf_09_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_09-sr/Bf_09_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_09                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_09.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_09-sr/Bf_09_genome.fasta -n Bf_09_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr -p Bf_09 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09_dnaapler_reoriented.fasta
        fi
        

Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
[Thu Nov 23 11:53:13 2023]
rule medaka:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_6_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_6.log
    jobid: 101
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/medaka.CS-1_6.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/consensus.fasta
    wildcards: sample=CS-1_6
    threads: 32
    resources: tmpdir=/local/nala0006/2279931, mem_mb=64000, mem_mib=61036, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_6_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_6.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/consensus.fasta
        fi
        
Select jobs to execute...
Activating conda environment: sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
Waiting at most 5 seconds for missing files.
[Thu Nov 23 11:53:16 2023]
Error in rule pharokka_flye:
    jobid: 601
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_09-sr/Bf_09_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_09.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_09-sr/Bf_09_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_09-sr/Bf_09_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bf_09                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_09.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_09-sr/Bf_09_genome.fasta -n Bf_09_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr -p Bf_09 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr/Bf_09_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bf_09.log:
================================================================================
2023-11-23 11:53:15.383 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr as -f or --force was specified.
2023-11-23 11:53:15.396 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:53:15.397 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_09-sr/Bf_09_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bf_09-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bf_09', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:53:15.397 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:53:15.397 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:53:15.397 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:53:15.398 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:53:15.398 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:53:15.540 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:53:15.540 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:53:15.549 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:53:15.549 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:53:15.633 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:53:15.633 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:53:15.706 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:53:15.706 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:53:15.712 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:53:15.712 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:53:15.724 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:53:15.724 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:53:16.253 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:53:16.254 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:53:16.254 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:53:16.254 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:53:16.254 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:53:16.254 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:53:16.260 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bf_09-sr/Bf_09_genome.fasta.
2023-11-23 11:53:16.260 | ERROR    | input_commands:validate_fasta:222 - Error: Input file is not in the FASTA format.
================================================================================

[Thu Nov 23 11:53:16 2023]
Error in rule medaka:
    jobid: 101
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_6_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_6.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_6_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_6.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/consensus.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_6.log:
================================================================================
[11:53:16 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpz7dzoe8k.
[11:53:16 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpyg45o_2u.
Creating fai index file /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/assembly.fasta.fai
[faidx] Could not build fai index /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_6-sr/assembly.fasta.fai
================================================================================

MissingOutputException in rule checkv_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.checkv.smk, line 38:
Job 271  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/checkv/quality_summary.tsv

[Thu Nov 23 11:53:19 2023]
rule checkv_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/assembly.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/checkv/quality_summary.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Ecoli_26.log
    jobid: 257
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/checkv_flye_nano.Ecoli_26.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/checkv/quality_summary.tsv
    wildcards: sample=Ecoli_26
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        export CHECKVDB=/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/checkv-db-v1.5
        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/assembly.fasta ]]
        then
            checkv end_to_end                ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/assembly.fasta                 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/checkv                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Ecoli_26.log
        fi
        
Activating conda environment: sphae/workflow/conda/a4d2d492cde88381b68d5529e4f01bae_
Select jobs to execute...

[Thu Nov 23 11:53:19 2023]
rule checkv_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/assembly.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/checkv/quality_summary.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Lg_25.log
    jobid: 256
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/checkv_flye_nano.Lg_25.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/checkv/quality_summary.tsv
    wildcards: sample=Lg_25
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        export CHECKVDB=/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/checkv-db-v1.5
        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/assembly.fasta ]]
        then
            checkv end_to_end                ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/assembly.fasta                 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/checkv                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Lg_25.log
        fi
        

[Thu Nov 23 11:53:19 2023]
rule medaka:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Lg_25_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Lg_25.log
    jobid: 67
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/medaka.Lg_25.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/consensus.fasta
    wildcards: sample=Lg_25
    threads: 32
    resources: tmpdir=/local/nala0006/2279931, mem_mb=64000, mem_mib=61036, time=480
Activating conda environment: sphae/workflow/conda/a4d2d492cde88381b68d5529e4f01bae_


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Lg_25_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Lg_25.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/consensus.fasta
        fi
        
Select jobs to execute...
Activating conda environment: sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
Waiting at most 5 seconds for missing files.
[Thu Nov 23 11:53:22 2023]
Error in rule medaka:
    jobid: 67
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Lg_25_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Lg_25.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Lg_25_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Lg_25.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/consensus.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Lg_25.log:
================================================================================
[11:53:21 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpy2meo39b.
[11:53:22 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpe196r3xm.
Creating fai index file /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/assembly.fasta.fai
[faidx] Could not build fai index /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/assembly.fasta.fai
================================================================================

MissingOutputException in rule checkv_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.checkv.smk, line 38:
Job 257  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_26-sr/checkv/quality_summary.tsv

[Thu Nov 23 11:53:24 2023]
rule checkv_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/assembly.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/checkv/quality_summary.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Ecoli_33_1.log
    jobid: 312
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/checkv_flye_nano.Ecoli_33_1.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/checkv/quality_summary.tsv
    wildcards: sample=Ecoli_33_1
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        export CHECKVDB=/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/checkv-db-v1.5
        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/assembly.fasta ]]
        then
            checkv end_to_end                ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/assembly.fasta                 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/checkv                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.Ecoli_33_1.log
        fi
        
Activating conda environment: sphae/workflow/conda/a4d2d492cde88381b68d5529e4f01bae_
Waiting at most 5 seconds for missing files.
MissingOutputException in rule checkv_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.checkv.smk, line 38:
Job 256  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Lg_25-sr/checkv/quality_summary.tsv
Select jobs to execute...

[Thu Nov 23 11:53:29 2023]
rule medaka:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_3_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_3.log
    jobid: 116
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/medaka.CS-1_3.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/consensus.fasta
    wildcards: sample=CS-1_3
    threads: 32
    resources: tmpdir=/local/nala0006/2279931, mem_mb=64000, mem_mib=61036, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_3_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_3.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/consensus.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_

[Thu Nov 23 11:53:29 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_27-sr/Ecoli_27_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_27.log
    jobid: 587
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27.gbk
    wildcards: sample=Ecoli_27
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_27-sr/Ecoli_27_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_27-sr/Ecoli_27_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_27                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_27.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_27-sr/Ecoli_27_genome.fasta -n Ecoli_27_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr -p Ecoli_27 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
Waiting at most 5 seconds for missing files.
[Thu Nov 23 11:53:32 2023]
Error in rule pharokka_flye:
    jobid: 587
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_27-sr/Ecoli_27_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_27.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_27-sr/Ecoli_27_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_27-sr/Ecoli_27_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_27                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_27.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_27-sr/Ecoli_27_genome.fasta -n Ecoli_27_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr -p Ecoli_27 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr/Ecoli_27_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_27.log:
================================================================================
2023-11-23 11:53:31.191 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr as -f or --force was specified.
2023-11-23 11:53:31.205 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:53:31.205 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_27-sr/Ecoli_27_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_27-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Ecoli_27', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:53:31.205 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:53:31.205 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:53:31.205 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:53:31.206 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:53:31.207 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:53:31.345 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:53:31.346 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:53:31.354 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:53:31.354 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:53:31.438 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:53:31.438 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:53:31.509 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:53:31.509 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:53:31.515 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:53:31.515 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:53:31.527 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:53:31.527 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:53:32.062 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:53:32.063 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:53:32.063 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:53:32.063 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:53:32.063 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:53:32.063 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:53:32.071 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_27-sr/Ecoli_27_genome.fasta.
2023-11-23 11:53:32.071 | ERROR    | input_commands:validate_fasta:222 - Error: Input file is not in the FASTA format.
================================================================================

[Thu Nov 23 11:53:32 2023]
Error in rule medaka:
    jobid: 116
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_3_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_3.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_3_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_3.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/consensus.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_3.log:
================================================================================
[11:53:32 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpdwwxi1m9.
[11:53:32 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmp0qqo8rjv.
Creating fai index file /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/assembly.fasta.fai
[faidx] Could not build fai index /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/assembly.fasta.fai
================================================================================

MissingOutputException in rule checkv_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.checkv.smk, line 38:
Job 312  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/checkv/quality_summary.tsv
Select jobs to execute...

[Thu Nov 23 11:53:34 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_28-sr/Ecoli_28_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_28.log
    jobid: 573
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/top_hits_vfdb.tsv
    wildcards: sample=Ecoli_28
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_28-sr/Ecoli_28_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_28-sr/Ecoli_28_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_28                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_28.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_28-sr/Ecoli_28_genome.fasta -n Ecoli_28_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr -p Ecoli_28 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28_dnaapler_reoriented.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
Select jobs to execute...

[Thu Nov 23 11:53:34 2023]
rule pharokka_flye:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_19-sr/Bu_19_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_19.log
    jobid: 609
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19_length_gc_cds_density.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19_top_hits_mash_inphared.tsv
    wildcards: sample=Bu_19
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_19-sr/Bu_19_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_19-sr/Bu_19_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bu_19                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_19.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_19-sr/Bu_19_genome.fasta -n Bu_19_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr -p Bu_19 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19_dnaapler_reoriented.fasta
        fi
        

Activating conda environment: sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
[Thu Nov 23 11:53:34 2023]
rule medaka:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_1_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_1.log
    jobid: 82
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/medaka.CS-1_1.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/consensus.fasta
    wildcards: sample=CS-1_1
    threads: 32
    resources: tmpdir=/local/nala0006/2279931, mem_mb=64000, mem_mib=61036, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_1_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_1.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/consensus.fasta
        fi
        
Select jobs to execute...
Activating conda environment: sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
[Thu Nov 23 11:53:37 2023]
Error in rule pharokka_flye:
    jobid: 573
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_28-sr/Ecoli_28_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_28.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_28-sr/Ecoli_28_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_28-sr/Ecoli_28_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Ecoli_28                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_28.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_28-sr/Ecoli_28_genome.fasta -n Ecoli_28_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr -p Ecoli_28 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr/Ecoli_28_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Ecoli_28.log:
================================================================================
2023-11-23 11:53:36.231 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr as -f or --force was specified.
2023-11-23 11:53:36.244 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:53:36.244 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_28-sr/Ecoli_28_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Ecoli_28-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Ecoli_28', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:53:36.244 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:53:36.244 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:53:36.244 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:53:36.244 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:53:36.244 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:53:36.388 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:53:36.389 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:53:36.397 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:53:36.397 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:53:36.498 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:53:36.498 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:53:36.569 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:53:36.569 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:53:36.575 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:53:36.575 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:53:36.587 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:53:36.587 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:53:37.123 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:53:37.124 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:53:37.124 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:53:37.124 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:53:37.124 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:53:37.124 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:53:37.130 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Ecoli_28-sr/Ecoli_28_genome.fasta.
2023-11-23 11:53:37.130 | ERROR    | input_commands:validate_fasta:222 - Error: Input file is not in the FASTA format.
================================================================================

[Thu Nov 23 11:53:37 2023]
Error in rule pharokka_flye:
    jobid: 609
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_19-sr/Bu_19_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_19.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_19-sr/Bu_19_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_19-sr/Bu_19_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bu_19                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_19.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_19-sr/Bu_19_genome.fasta -n Bu_19_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr -p Bu_19 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr/Bu_19_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_19.log:
================================================================================
2023-11-23 11:53:36.257 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr as -f or --force was specified.
2023-11-23 11:53:36.275 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:53:36.276 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_19-sr/Bu_19_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_19-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bu_19', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:53:36.276 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:53:36.276 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:53:36.276 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:53:36.276 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:53:36.276 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:53:36.421 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:53:36.421 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:53:36.430 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:53:36.430 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:53:36.514 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:53:36.514 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:53:36.584 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:53:36.584 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:53:36.590 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:53:36.590 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:53:36.601 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:53:36.602 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:53:37.136 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:53:37.136 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:53:37.136 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:53:37.136 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:53:37.137 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:53:37.137 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:53:37.143 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_19-sr/Bu_19_genome.fasta.
2023-11-23 11:53:37.143 | ERROR    | input_commands:validate_fasta:222 - Error: Input file is not in the FASTA format.
================================================================================


[Thu Nov 23 11:53:37 2023]
rule checkv_flye_nano:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/assembly.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/checkv/quality_summary.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.CS-1_3.log
    jobid: 305
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/checkv_flye_nano.CS-1_3.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/checkv/quality_summary.tsv
    wildcards: sample=CS-1_3
    threads: 8
    resources: tmpdir=/local/nala0006/2279931, mem_mb=16000, mem_mib=15259, time=480


        export CHECKVDB=/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/checkv-db-v1.5
        if [[ -s ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/assembly.fasta ]]
        then
            checkv end_to_end                ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/assembly.fasta                 ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/checkv                 -t 8                 &> ../nanopore/nanoporeSDSU.spae.out/logs/checkv_flye_nano.CS-1_3.log
        fi
        
Activating conda environment: sphae/workflow/conda/a4d2d492cde88381b68d5529e4f01bae_
Select jobs to execute...
Waiting at most 5 seconds for missing files.
[Thu Nov 23 11:53:37 2023]
Error in rule medaka:
    jobid: 82
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_1_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_1.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_1_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_1.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/consensus.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_1.log:
================================================================================
[11:53:37 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpqu5kt_di.
[11:53:37 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmplj7pmgwv.
Creating fai index file /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/assembly.fasta.fai
[faidx] Could not build fai index /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_1-sr/assembly.fasta.fai
================================================================================

MissingOutputException in rule checkv_flye_nano in file /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/rules/5.checkv.smk, line 38:
Job 305  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_3-sr/checkv/quality_summary.tsv

[Thu Nov 23 11:53:42 2023]
rule medaka:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_8_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_8.log
    jobid: 100
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/medaka.CS-1_8.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/consensus.fasta
    wildcards: sample=CS-1_8
    threads: 32
    resources: tmpdir=/local/nala0006/2279931, mem_mb=64000, mem_mib=61036, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_8_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_8.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/consensus.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
[Thu Nov 23 11:53:45 2023]
Error in rule medaka:
    jobid: 100
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_8_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_8.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_8_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_8.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/consensus.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_8.log:
================================================================================
[11:53:45 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpul8uvdln.
[11:53:45 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmp2t3epy_e.
Creating fai index file /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/assembly.fasta.fai
[faidx] Could not build fai index /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_8-sr/assembly.fasta.fai
================================================================================

Select jobs to execute...

[Thu Nov 23 11:53:45 2023]
rule medaka:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_4_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_4.log
    jobid: 85
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/medaka.CS-1_4.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/consensus.fasta
    wildcards: sample=CS-1_4
    threads: 32
    resources: tmpdir=/local/nala0006/2279931, mem_mb=64000, mem_mib=61036, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_4_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_4.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/consensus.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
[Thu Nov 23 11:53:48 2023]
Error in rule medaka:
    jobid: 85
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_4_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_4.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/CS-1_4_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_4.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/consensus.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/medaka.CS-1_4.log:
================================================================================
[11:53:48 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpy05w07_4.
[11:53:48 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmp8u8it1uy.
Creating fai index file /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/assembly.fasta.fai
[faidx] Could not build fai index /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/CS-1_4-sr/assembly.fasta.fai
================================================================================

Select jobs to execute...

[Thu Nov 23 11:53:48 2023]
rule medaka:
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ecoli_33_1_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ecoli_33_1.log
    jobid: 123
    benchmark: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/bench/medaka.Ecoli_33_1.txt
    reason: Missing output files: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/consensus.fasta
    wildcards: sample=Ecoli_33_1
    threads: 32
    resources: tmpdir=/local/nala0006/2279931, mem_mb=64000, mem_mib=61036, time=480


        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ecoli_33_1_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ecoli_33_1.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/consensus.fasta
        fi
        
Activating conda environment: sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
[Thu Nov 23 11:53:51 2023]
Error in rule medaka:
    jobid: 123
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/assembly.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ecoli_33_1_S.subsampled.fastq.gz
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/consensus.fasta
    log: ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ecoli_33_1.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/2c939cb56b3d22c5781e34f0c34d8112_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/assembly.fasta ]]; then
            medaka_consensus                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/results/filtlong/Ecoli_33_1_S.subsampled.fastq.gz                 -d ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/assembly.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr                 -m r1041_e82_400bps_sup_v4.2.0                 -t 32                 2> ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ecoli_33_1.log
        else
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/consensus.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/medaka.Ecoli_33_1.log:
================================================================================
[11:53:51 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpf6tc1dqf.
[11:53:51 - MdlStrTF] Successfully removed temporary files from /local/nala0006/2279931/tmpjojs1aso.
Creating fai index file /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/assembly.fasta.fai
[faidx] Could not build fai index /scratch/user/nala0006/spae-paper/nanopore/nanoporeSDSU.spae.out/PROCESSING/assembly/flye/Ecoli_33_1-sr/assembly.fasta.fai
================================================================================

2023-11-23 11:55:06.121 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:55:06.122 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:55:06.122 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta', plot_name='Bb_15_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr', gff='', genbank='', prefix='Bb_15', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:55:06.122 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:55:06.122 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:55:06.122 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:55:06.122 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:55:06.122 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:55:06.122 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:55:06.122 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:55:06.123 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:55:06.127 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta.
2023-11-23 11:55:06.127 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta is in FASTA format.
2023-11-23 11:55:06.127 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta for duplicate FASTA headers.
2023-11-23 11:55:06.127 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta are unique.
2023-11-23 11:55:06.128 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:55:06.128 | INFO     | __main__:<module>:291 - Plotting the phage.
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:55:09 2023]
Error in rule pharokka_flye:
    jobid: 597
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bb_15.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bb_15                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bb_15.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta -n Bb_15_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr -p Bb_15 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bb_15.log:
================================================================================
2023-11-23 11:51:31.538 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr as -f or --force was specified.
2023-11-23 11:51:31.551 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:51:31.552 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bb_15', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:51:31.552 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:51:31.552 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:51:31.552 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:51:31.552 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:51:31.552 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:51:31.702 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:51:31.702 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:51:31.711 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:51:31.711 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:51:31.795 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:51:31.796 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:51:31.874 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:51:31.875 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:51:31.881 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:51:31.881 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:51:31.894 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:51:31.894 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:51:32.518 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:51:32.519 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:51:32.519 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:51:32.519 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:51:32.519 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:51:32.519 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:51:32.525 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta.
2023-11-23 11:51:32.526 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta is in FASTA format.
2023-11-23 11:51:32.526 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta for duplicate FASTA headers.
2023-11-23 11:51:32.526 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta are unique.
2023-11-23 11:51:32.526 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:51:32.526 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:51:32.527 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:51:32.532 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta ...
2023-11-23 11:51:33.519 | ERROR    | external_tools:run_tool:94 - Error calling dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta (return code 1)
2023-11-23 11:51:33.519 | WARNING  | processes:run_dnaapler:981 - Dnaapler failed to find the large terminase subunit.
2023-11-23 11:51:33.519 | WARNING  | processes:run_dnaapler:982 - For reorientation, please run pharokka again without --dnaapler and use --terminase instead.
2023-11-23 11:51:33.519 | WARNING  | processes:run_dnaapler:985 - Pharokka will now continue without reorientation.
2023-11-23 11:51:33.520 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:51:33.524 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta ...
2023-11-23 11:51:37.861 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta
2023-11-23 11:51:37.867 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta ...
2023-11-23 11:51:42.138 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta
2023-11-23 11:51:42.159 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:51:42.162 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta ...
2023-11-23 11:51:42.333 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta
2023-11-23 11:51:42.336 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:51:42.340 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_minced.gff ...
2023-11-23 11:51:42.445 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_minced.gff
2023-11-23 11:51:42.447 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:51:42.451 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta ...
2023-11-23 11:51:42.467 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta
2023-11-23 11:51:42.469 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:51:42.469 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:51:42.475 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/target_dir/target_seqs ...
2023-11-23 11:51:43.275 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/target_dir/target_seqs
2023-11-23 11:51:43.280 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:53:57.861 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:53:57.867 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:53:58.000 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:53:58.020 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:53:58.025 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:53:58.817 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/CARD_target_dir/target_seqs
2023-11-23 11:53:58.823 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:54:17.758 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:54:17.764 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:54:17.846 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:54:17.867 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:54:17.872 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:54:18.575 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/VFDB_target_dir/target_seqs
2023-11-23 11:54:18.580 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:54:50.876 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:54:50.882 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:54:50.967 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:54:50.985 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:55:03.466 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:55:03.473 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:55:03.473 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:55:03.599 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:55:03.607 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:55:03.607 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:55:03.614 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:55:03.688 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:55:03.722 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:55:03.726 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/input_mash_sketch.msh -i ...
2023-11-23 11:55:03.745 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bb_15-sr/Bb_15_genome.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/input_mash_sketch.msh -i
2023-11-23 11:55:03.749 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:55:04.271 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:55:04.523 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:55:04.524 | INFO     | __main__:main:481 - Elapsed time: 212.98 seconds
2023-11-23 11:55:04.524 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:55:04.524 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:55:04.524 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:55:04.524 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:55:04.524 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:55:04.524 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bb_15-sr/Bb_15_length_gc_cds_density.tsv
2023-11-23 11:55:10.666 | INFO     | __main__:<module>:116 - Starting Pharokka v1.5.1
2023-11-23 11:55:10.666 | INFO     | __main__:<module>:117 - Running pharokka_plotter.py to plot your phage.
2023-11-23 11:55:10.666 | INFO     | __main__:<module>:118 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14_genome.fasta', plot_name='Bu_14_pharokka_plot', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr', gff='', genbank='', prefix='Bu_14', plot_title='Phage', force=True, label_hypotheticals=False, remove_other_features_labels=False, title_size='20', label_size='8', interval='5000', truncate='20', dpi='600', annotations='1', label_ids='')
2023-11-23 11:55:10.666 | INFO     | __main__:<module>:119 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:55:10.666 | INFO     | __main__:<module>:120 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:55:10.666 | INFO     | __main__:<module>:121 - Checking your inputs.
2023-11-23 11:55:10.667 | WARNING  | __main__:<module>:170 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:55:10.667 | WARNING  | __main__:<module>:173 - Continuing
2023-11-23 11:55:10.667 | WARNING  | __main__:<module>:184 - --force was specified even though the output plot file does not already exist.
2023-11-23 11:55:10.667 | WARNING  | __main__:<module>:187 - Continuing
2023-11-23 11:55:10.667 | INFO     | __main__:<module>:203 - You have specified a Pharokka output directory.
2023-11-23 11:55:10.670 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14_genome.fasta.
2023-11-23 11:55:10.671 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14_genome.fasta is in FASTA format.
2023-11-23 11:55:10.671 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14_genome.fasta for duplicate FASTA headers.
2023-11-23 11:55:10.671 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14_genome.fasta are unique.
2023-11-23 11:55:10.671 | INFO     | __main__:<module>:290 - All files checked.
2023-11-23 11:55:10.671 | INFO     | __main__:<module>:291 - Plotting the phage.
/usr/bin/bash: line 6: else:: command not found
[Thu Nov 23 11:55:14 2023]
Error in rule pharokka_flye:
    jobid: 579
    input: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14_genome.fasta
    output: ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_length_gc_cds_density.tsv
    log: ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_14.log (check log file(s) for error details)
    conda-env: /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/conda/0795089d14530694325b61c8ef787c16_
    shell:
        
        if [[ -f ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14_genome.fasta ]]; then
            pharokka.py                 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14_genome.fasta                 -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr                 -d /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db                 -t 8                 --dnaapler                 -f -p Bu_14                2> ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_14.log

            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_dnaapler_reoriented.fasta
            pharokka_plotter.py -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14_genome.fasta -n Bu_14_pharokka_plot -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr -p Bu_14 -f
        else:
            touch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_dnaapler_reoriented.fasta
        fi
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)
Logfile ../nanopore/nanoporeSDSU.spae.out/logs/pharokka.Bu_14.log:
================================================================================
2023-11-23 11:51:30.276 | INFO     | input_commands:instantiate_dirs:171 - Removing output directory ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr as -f or --force was specified.
2023-11-23 11:51:30.289 | INFO     | __main__:main:105 - Starting Pharokka v1.5.1
2023-11-23 11:51:30.289 | INFO     | __main__:main:106 - Command executed: Namespace(infile='../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14_genome.fasta', outdir='../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr', database='/scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db', threads='8', force=True, prefix='Bu_14', locustag='Default', gene_predictor='phanotate', meta=False, split=False, coding_table='11', evalue='1E-05', fast=False, mmseqs2_only=False, meta_hmm=False, dnaapler=True, custom_hmm='', genbank=False, terminase=False, terminase_strand='nothing', terminase_start='nothing', skip_extra_annotations=False, skip_mash=False, citation=False)
2023-11-23 11:51:30.289 | INFO     | __main__:main:107 - Repository homepage is https://github.com/gbouras13/pharokka
2023-11-23 11:51:30.289 | INFO     | __main__:main:108 - Written by George Bouras: george.bouras@adelaide.edu.au
2023-11-23 11:51:30.289 | INFO     | __main__:main:110 - Checking database installation in /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db.
2023-11-23 11:51:30.291 | INFO     | __main__:main:113 - All databases have been successfully checked.
2023-11-23 11:51:30.291 | INFO     | __main__:main:129 - Checking dependencies.
2023-11-23 11:51:30.454 | INFO     | input_commands:check_dependencies:367 - Phanotate version found is v1.5.1
2023-11-23 11:51:30.455 | INFO     | input_commands:check_dependencies:376 - Phanotate version is ok.
2023-11-23 11:51:30.464 | INFO     | input_commands:check_dependencies:398 - MMseqs2 version found is v13.45111
2023-11-23 11:51:30.464 | INFO     | input_commands:check_dependencies:407 - MMseqs2 version is ok.
2023-11-23 11:51:30.557 | INFO     | input_commands:check_dependencies:431 - tRNAscan-SE version found is v2.0.12
2023-11-23 11:51:30.557 | INFO     | input_commands:check_dependencies:442 - tRNAscan-SE version is ok.
2023-11-23 11:51:30.634 | INFO     | input_commands:check_dependencies:466 - MinCED version found is v0.4.2
2023-11-23 11:51:30.635 | INFO     | input_commands:check_dependencies:477 - MinCED version is ok.
2023-11-23 11:51:30.641 | INFO     | input_commands:check_dependencies:503 - ARAGORN version found is v1.2.41
2023-11-23 11:51:30.641 | INFO     | input_commands:check_dependencies:514 - ARAGORN version is ok.
2023-11-23 11:51:30.654 | INFO     | input_commands:check_dependencies:531 - mash version found is v2.3
2023-11-23 11:51:30.655 | INFO     | input_commands:check_dependencies:538 - mash version is ok.
2023-11-23 11:51:31.240 | INFO     | input_commands:check_dependencies:557 - Dnaapler version found is v0.4.0
2023-11-23 11:51:31.241 | INFO     | input_commands:check_dependencies:564 - Dnaapler version is ok.
2023-11-23 11:51:31.241 | INFO     | input_commands:check_dependencies:576 - Pyrodigal version is v3.1.1
2023-11-23 11:51:31.241 | INFO     | input_commands:check_dependencies:577 - Pyrodigal version is ok.
2023-11-23 11:51:31.241 | INFO     | input_commands:check_dependencies:589 - Pyrodigal_gv version is v0.2.0
2023-11-23 11:51:31.241 | INFO     | input_commands:check_dependencies:590 - Pyrodigal_gv version is ok.
2023-11-23 11:51:31.248 | INFO     | input_commands:validate_fasta:218 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14_genome.fasta.
2023-11-23 11:51:31.248 | INFO     | input_commands:validate_fasta:220 - Input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14_genome.fasta is in FASTA format.
2023-11-23 11:51:31.248 | INFO     | input_commands:validate_fasta:225 - Checking input ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14_genome.fasta for duplicate FASTA headers.
2023-11-23 11:51:31.249 | INFO     | input_commands:validate_fasta:227 - All headers in ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14_genome.fasta are unique.
2023-11-23 11:51:31.249 | INFO     | input_commands:validate_gene_predictor:252 - Phanotate will be used for gene prediction.
2023-11-23 11:51:31.249 | INFO     | __main__:main:164 - You have chosen to reorient your contigs by specifying --dnaapler. Checking the input.
2023-11-23 11:51:31.249 | INFO     | processes:run_dnaapler:952 - Running Dnaapler to rerorient all contigs to begin with the terminase large subunit.
2023-11-23 11:51:31.255 | INFO     | external_tools:run:50 - Started running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14_genome.fasta ...
2023-11-23 11:51:32.565 | INFO     | external_tools:run:52 - Done running dnaapler phage -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/dnaapler -t 8 -i ../nanopore/nanoporeSDSU.spae.out/PROCESSING/genome/Bu_14-sr/Bu_14_genome.fasta
2023-11-23 11:51:32.572 | INFO     | __main__:main:292 - Running Phanotate.
2023-11-23 11:51:32.576 | INFO     | external_tools:run:50 - Started running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:51:37.811 | INFO     | external_tools:run:52 - Done running phanotate.py -f fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/phanotate_out_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:51:37.817 | INFO     | external_tools:run:50 - Started running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:51:43.026 | INFO     | external_tools:run:52 - Done running phanotate.py -f tabular -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/phanotate_out.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:51:43.057 | INFO     | __main__:main:321 - Starting tRNA-scanSE.
2023-11-23 11:51:43.062 | INFO     | external_tools:run:50 - Started running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:51:43.250 | INFO     | external_tools:run:52 - Done running tRNAscan-SE --thread 8 -G -Q -j ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/trnascan_out.gff ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:51:43.253 | INFO     | processes:run_minced:786 - Running MinCED.
2023-11-23 11:51:43.257 | INFO     | external_tools:run:50 - Started running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_minced.gff ...
2023-11-23 11:51:43.380 | INFO     | external_tools:run:52 - Done running minced ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/dnaapler/dnaapler_reoriented.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_minced_spacers.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_minced.gff
2023-11-23 11:51:43.382 | INFO     | processes:run_aragorn:815 - Running Aragorn.
2023-11-23 11:51:43.386 | INFO     | external_tools:run:50 - Started running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/dnaapler/dnaapler_reoriented.fasta ...
2023-11-23 11:51:43.404 | INFO     | external_tools:run:52 - Done running aragorn -l -gcbact -w -m -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_aragorn.txt ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/dnaapler/dnaapler_reoriented.fasta
2023-11-23 11:51:43.406 | INFO     | __main__:main:329 - Starting MMseqs2.
2023-11-23 11:51:43.406 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on PHROG Database.
2023-11-23 11:51:43.411 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/target_dir/target_seqs ...
2023-11-23 11:51:44.162 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/target_dir/target_seqs
2023-11-23 11:51:44.168 | INFO     | external_tools:run:50 - Started running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/tmp_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:54:00.897 | INFO     | external_tools:run:52 - Done running mmseqs search -e 1E-05 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/tmp_dir/ -s 8.5 --threads 8
2023-11-23 11:54:00.902 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/mmseqs_results.tsv --full-header --threads 8 ...
2023-11-23 11:54:01.053 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/phrogs_profile_db ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/mmseqs/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/mmseqs_results.tsv --full-header --threads 8
2023-11-23 11:54:01.070 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on CARD Database.
2023-11-23 11:54:01.074 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/CARD_target_dir/target_seqs ...
2023-11-23 11:54:01.773 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/CARD_target_dir/target_seqs
2023-11-23 11:54:01.778 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/CARD_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:54:20.807 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/CARD_dir/ -s 8.5 --threads 8
2023-11-23 11:54:20.812 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/CARD_results.tsv --full-header --threads 8 ...
2023-11-23 11:54:20.891 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/CARD ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/CARD_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/CARD/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/CARD_results.tsv --full-header --threads 8
2023-11-23 11:54:20.910 | INFO     | processes:run_mmseqs:643 - Running MMseqs2 on VFDB Database.
2023-11-23 11:54:20.915 | INFO     | external_tools:run:50 - Started running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/VFDB_target_dir/target_seqs ...
2023-11-23 11:54:21.660 | INFO     | external_tools:run:52 - Done running mmseqs createdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/phanotate_aas_tmp.fasta ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/VFDB_target_dir/target_seqs
2023-11-23 11:54:21.665 | INFO     | external_tools:run:50 - Started running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/VFDB_dir/ -s 8.5 --threads 8 ...
2023-11-23 11:54:54.228 | INFO     | external_tools:run:52 - Done running mmseqs search --min-seq-id 0.8 -c 0.4 /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/VFDB_dir/ -s 8.5 --threads 8
2023-11-23 11:54:54.234 | INFO     | external_tools:run:50 - Started running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/vfdb_results.tsv --full-header --threads 8 ...
2023-11-23 11:54:54.319 | INFO     | external_tools:run:52 - Done running mmseqs createtsv /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/vfdb ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/VFDB_target_dir/target_seqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/VFDB/results_mmseqs ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/vfdb_results.tsv --full-header --threads 8
2023-11-23 11:54:54.336 | INFO     | __main__:main:360 - Running PyHMMER on PHROGs.
2023-11-23 11:55:07.983 | INFO     | __main__:main:376 - Post Processing Output.
2023-11-23 11:55:07.994 | INFO     | post_processing:create_mmseqs_tophits:2128 - Processing MMseqs2 outputs.
2023-11-23 11:55:07.995 | INFO     | post_processing:create_mmseqs_tophits:2129 - Processing PHROGs output.
2023-11-23 11:55:08.134 | INFO     | post_processing:process_vfdb_results:2332 - Processing VFDB output.
2023-11-23 11:55:08.142 | INFO     | post_processing:process_vfdb_results:2415 - 0 VFDB virulence factors identified.
2023-11-23 11:55:08.142 | INFO     | post_processing:process_card_results:2432 - Processing CARD output.
2023-11-23 11:55:08.149 | INFO     | post_processing:process_card_results:2550 - 0 CARD AMR genes identified.
2023-11-23 11:55:08.265 | INFO     | __main__:main:447 - Converting gff to genbank.
2023-11-23 11:55:08.305 | INFO     | post_processing:extract_terl:1966 - Terminase large subunit found.
2023-11-23 11:55:08.305 | INFO     | post_processing:extract_terl:1969 - More than one CDS annotated as terminase large subunit found. 
Saving all.
2023-11-23 11:55:08.317 | INFO     | __main__:main:460 - Finding the closest match for each contig in INPHARED using mash.
2023-11-23 11:55:08.320 | INFO     | external_tools:run:50 - Started running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/input_mash_sketch.msh -i ...
2023-11-23 11:55:08.339 | INFO     | external_tools:run:52 - Done running mash sketch ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/dnaapler/dnaapler_reoriented.fasta -o ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/input_mash_sketch.msh -i
2023-11-23 11:55:08.344 | INFO     | external_tools:run_to_stdout:59 - Started running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i ...
2023-11-23 11:55:08.880 | INFO     | external_tools:run_to_stdout:61 - Done running mash dist ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/input_mash_sketch.msh /scratch/user/nala0006/spae-paper/sphae/sphae/workflow/databases/pharokka_db/1Aug2023_genomes.fa.msh -d 0.2 -i
2023-11-23 11:55:09.128 | INFO     | __main__:main:480 - Pharokka has finished.
2023-11-23 11:55:09.129 | INFO     | __main__:main:481 - Elapsed time: 218.84 seconds
2023-11-23 11:55:09.129 | INFO     | __main__:main:483 - If you use Pharokka in your research, please cite:
2023-11-23 11:55:09.129 | INFO     | __main__:main:484 - George Bouras, Roshan Nepal, Ghais Houtak, Alkis James Psaltis, Peter-John Wormald, Sarah Vreugde.
2023-11-23 11:55:09.129 | INFO     | __main__:main:487 - Pharokka: a fast scalable bacteriophage annotation tool.
2023-11-23 11:55:09.129 | INFO     | __main__:main:488 - Bioinformatics, Volume 39, Issue 1, January 2023, btac776.
2023-11-23 11:55:09.129 | INFO     | __main__:main:489 - https://doi.org/10.1093/bioinformatics/btac776.
2023-11-23 11:55:09.129 | INFO     | __main__:main:490 - You should also cite the full list of tools Pharokka uses, which can be found at https://github.com/gbouras13/pharokka#citation.
================================================================================

Removing output files of failed job pharokka_flye since they might be corrupted:
../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14.gbk, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_pharokka_plot.png, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/top_hits_card.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/top_hits_vfdb.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_minced_spacers.txt, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_top_hits_mash_inphared.tsv, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_dnaapler_reoriented.fasta, ../nanopore/nanoporeSDSU.spae.out/PROCESSING/pharokka/Bu_14-sr/Bu_14_length_gc_cds_density.tsv
Exiting because a job execution failed. Look above for error message
Complete log: .snakemake/log/2023-11-23T113733.047902.snakemake.log
[2023:11:23 11:55:14] ERROR: Snakemake failed
